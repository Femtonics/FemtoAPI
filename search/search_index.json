{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"FemtoAPI v2.0 Home","text":"<p>This article contains documentation for the FemtoAPI 2.0 and the provided wrappers.</p> <p>Wrapper source codes and examples can be found at https://github.com/Femtonics/FemtoAPI</p>"},{"location":"kb/api2/femtoapi-v2-0-home/","title":"FemtoAPI v2.0 Home","text":"<p>This article contains documentation for the FemtoAPI 2.0 and the provided wrappers.</p> <p>Wrapper source codes and examples can be found at https://github.com/Femtonics/FemtoAPI</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/","title":"FemtoAPI 2.0","text":"<p>The FemtoAPI version 2.0 is available with MESc 4.5 and above.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/prerequisites-for-using-the-femtoapi-library/","title":"Prerequisites for using the FemtoAPI library","text":"<ul> <li>The FemtoAPI library depends on Qt framework, so it needs to be installed and added to the Windows PATH. The minimum Qt version required is Qt 5.15. Other tools are not needed.</li> <li>A valid FemtoAPI license is necessary to use the tool. See the License page for more information.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/tutorial-use-cases/","title":"Tutorial: use cases","text":"<p>Below are some practical usage examples and instructions given on how to implement these using the FemtoAPI command set.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/tutorial-use-cases/#starting-measurement-or-snap-and-get-the-measured-images","title":"Starting measurement (or snap) and get the measured images","text":"<p>Needed FemtoAPI commands:</p> <ul> <li>setActiveTaskAndSubTask() (Tools)</li> <li>setMeasurementDuration() (Setting measurement duration) (optionally)</li> <li>getAcquisitionState() (Get acquisition state)</li> <li>start/stop measurement commands (Starting and stopping measurements)</li> <li>set measurement duration (Setting measurement duration)</li> <li>getMicroscopeState() (Get microscope state)</li> <li>getProcessingState() (Get processing state)</li> <li>read channel data commands, e.g.  readRawChannelDataToClientsBlob() (Read-write binary channel data) or  readChannelDataToClientsBlob() (Read-write binary channel data)</li> </ul> <p>Instructions on implementation:</p> <ol> <li>Use the setActiveTaskAndSubTask() command to set the type of measurement you want to start (e.g. for resonant zStack, use 'resonant' and 'zStack' parameters)</li> <li>Optionally, you can set measurement duration for the selected task and sub task by calling setMesurementDuration() command. (In case of Z-stack, measurement duration can't be set, it is calculated)</li> <li>Use getAcquisitionState() command and check the 'activeTask' and 'measurementMode' fields in the appropriate json object</li> <li>You can set the measurement duration with the setMeasurementDuration() command.</li> <li>call the appropriate start measurement (or measurement snap) command</li> <li>poll the microscope state by calling getMicroscopeState() , if it has 'Working' state, the measurement is running properly.</li> <li>In case of snap or finite duration measurement, it will stop automatically, otherwise, you must call the stop command. When it has stopped, microscope state will show 'Ready'.</li> <li>After the measurement is done, you will need the runtime unique index of current measurement unit. You can get this information by calling the getProcessingState() command. The returned json will tell you the current measurement session's runtime index, and meta informations about measurements. The measurement unit with the greatest index is the last measurement's unit.</li> <li>By composing measurement unit runtime unique index and channel index, you can pass this as input to read channel data commands.</li> </ol>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/tutorial-use-cases/#tile-scan-measurement","title":"Tile scan measurement","text":"<p>This type of measurement can be implemented by doing 9 measurements in different stage positions. Every \"tile\" will be in a measurement unit and could be commented as 1x1, 1x2, 1x3 and so on. They can be packed in a measurement group.</p> <p>You will need the following input parameters:</p> <ul> <li>resonant/galvo scanner parameters</li> <li>type of measurement: z-Stack or time series frame</li> <li>number of tiles</li> <li>size of the viewport</li> <li>overlapping between tiles</li> </ul> <p>Needed FemtoAPI commands:</p> <ul> <li>API2-A-1448161794</li> <li>API2-A-1448161792</li> <li>API2-A-1448161790</li> <li>API2-A-1448161795</li> <li>API2-A-1448161786</li> <li>setActiveTaskAndSubTask() (Tools) (optionally)</li> <li>setMeasurementDuration() (Setting measurement duration) (optionally)</li> </ul> <p>Instructions on implementation:</p> <ol> <li>Setup the measurement: set imaging window parameters, measurement type with setActiveTaskAndSubTask() command,    set device intensities, measurement duration, etc.</li> <li>As described above, start the measurement</li> <li>when measurement has ended, move the stage(s) with setAxisPosition() command,    and check whether the axis movement is done by calling isAxisMoving() in a loop.</li> <li>If axis has moved to the requested position, repeat 2-3 until the number of tiles</li> </ol>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-femtoapi-with-simple-websocket-client/","title":"Using FemtoAPI with Simple WebSocket Client","text":"<p>FemtoAPI can be used in any environment that supports WebSocket. It only needs to connect, no login is required, and there is no handshake mechanism.</p> <p>With Simple WebSocket Client, only textual data are sent/received on the communication line, so the FemtoAPI commands that send/receive binary data to/from the server cannot be used here. Currently, this concerns the following commands:</p> <ul> <li> <p>FemtoAPIFile.read(Raw)ChannelDataToClientsBlob </p> </li> <li> <p>FemtoAPIFile.write(Raw)ChannelDataFromAttachment</p> </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-femtoapi-with-simple-websocket-client/#example","title":"Example:","text":"<p>For the Chrome browser, install the Simple WebSocket Client extension, open MESc on the same machine, type ws://localhost:8888 in the URL field, then click connect. After connecting to the server, you can type FemtoAPI commands, described later in this manual, in the Request field. You can write your own script in javascript and issue it in one command.</p> <p>An example of the Python websocket client code can be found in the following chapter:  API2-A-1448161780 </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/","title":"Introduction and architecture","text":"<p>Femto API (Application Programming Interface) is an optional module of the MESc measurement control and analysis application by Femtonics Ltd. It serves as a programmable client-server user interface to MESc, complementing its graphical user interface, the MESc GUI.</p> <p></p> <p>The figure above depicts the main components of FemtoAPI.</p> <ul> <li>The black box represents a running instance of the MESc application, which serves as the FemtoAPI server. You can run only one MESc instance per computer.</li> <li>The blue boxes represent the core data handled by the MESc application: the .mesc files currently open in MESc, the microscope control interface, etc. These data are shared with the MESc GUI and all FemtoAPI connections, which means that each change in the open files or the microscope state is immediately and consistently reflected on the MESc GUI and in all FemtoAPI clients.</li> <li>The \"Javascript-MESc function interface\" represents a transcription layer making MESc core data accessible through a JavaScript code.</li> <li>The yellow boxes represent single-threaded JavaScript interpreters, one for each active FemtoAPI connection. These interpreters implement the Qt Script dialect of JavaScript described at the following link: https://doc.qt.io/qt-5/ecmascript.html.</li> <li>The green box represents the outermost server-side component of the FemtoAPI, a WebSocket server listening on TCP/IP port 8888 by default. Each FemtoAPI client communicates through a separate WebSocket connection of this service. The number of pending connections is limited to a preset value. Currently, the server accepts no more than 30 pending client connections.</li> <li>The top black boxes represent FemtoAPI clients running on different technologies. Currently, a MATLAB, C++ and a Python client is implemented.</li> <li>The black lines connecting the WebSocket server and the FemtoAPI clients represent FemtoAPI WebSocket connections. Since the WebSocket communication protocol is based on TCP/IP, FemtoAPI clients and servers can be run on the same computer or on different computers with a working TCP/IP network connection.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/#femtoapi-conventions","title":"FemtoAPI conventions","text":"<ul> <li>All textual information is encoded in UTF-8.</li> <li>All binary information is sent and received in little-endian byte ordering.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/#simple-websocket-and-extended-binary-websocket-connection-methods","title":"Simple WebSocket and extended binary WebSocket connection methods","text":"<p>Each FemtoAPI client can choose between two connection methods: simple WebSocket and extended binary WebSocket.</p> <ul> <li>Extended binary WebSocket connections utilize a 64-bit Windows DLL provided by Femtonics Ltd. to connect, log in, and issue commands to the running MESc application. This connection type uses an efficient, proprietary binary communication protocol and supports the complete FemtoAPI command set described in this manual.</li> <li>Simple FemtoAPI WebSocket connections can be created by any computer system implementing the WebSocket protocol. You can issue all FemtoAPI commands through simple WebSocket connections that do not send binary data through the communication line; i.e., all of the text-only FemtoAPI commands. A login mechanism is not implemented.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/main-features-overview/","title":"Main features overview","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/main-features-overview/#common","title":"Common","text":"<ul> <li>Connect to running MESc instance from local or remote PC</li> <li>API actions logged, most important commands displayed in MESc</li> <li>only safe operations allowed (but you can cause damage with your script)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/main-features-overview/#measurement-control-femtoapimicroscope-namespace","title":"Measurement control (FemtoAPIMicroscope namespace)","text":"<ul> <li>Get current status of the microscope</li> <li>Start and stop image acquisition</li> <li>Set measurement duration</li> <li>Select a scanner type for measurement: Galvo-galvo or Resonant-Galvo </li> <li>Select acquisition mode: Time series, Z-Stack or Volume Scan</li> <li>Set measurement parameters for Z-Stack acquisition such as PMT reference voltages or Laser intensity</li> <li>Set depth correction parameters for Z-Stack acquisition</li> <li>Control the objective Arm or motorized stage</li> <li>Save the last acquired frame to a measurement unit</li> <li>Set text description for measurement units</li> </ul> <p>Note: Please test your measurement control script first in safe conditions (without objective and tissue, etc)</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/introduction-and-architecture/main-features-overview/#data-processing-femtoapifile-namespace","title":"Data processing (FemtoAPIFile namespace)","text":"<ul> <li>create measurement file, unit, channel and curve</li> <li>open, modify and close measurement files</li> <li>copy, modify and delete measurement units</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/","title":"The FemtoAPI command reference","text":"<p>This section details the syntax and the semantics of the commands that can be sent from the FemtoAPI client to the FemtoAPI server. As discussed above, these commands are sent with the following C++ method:</p> <p>virtual ReplyMessageParser::ReleasePtr APIWebSocketClient::sendJSCommand(const QString &amp;message)</p> <p>FemtoAPIFile namespace contains functions used for processing. These functions can be used on all machines with an installed MESc (ver 4.5) and a valid API license. E.g.: ATLAS systems, processing setups with MES8.</p> <p>FemtoAPIMicroscope namespace contains the functions used for measurement control. These are only used with Femto Smart systems.</p> <p>Warning: UNSAFE commands</p> <p>The commands marked as UNSAFE do not yet properly isolate the GUI and the API from each other. Please do not manipulate the MESc GUI while running one or more of these UNSAFE commands through the FemtoAPI, because this can lead to unwanted parameter settings in the MESc GUI. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/#list-of-commands","title":"List of commands:","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/#femtoapifile-namespace","title":"FemtoAPIFile namespace","text":"<p>Get/set processing state: </p> <ul> <li>getProcessingState() (Get processing state)</li> </ul> <p>Read/write channel data: </p> <ul> <li>readRawChannelDataToClientsBlob(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>readChannelDataToClientsBlob(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>readRawChannelDataJSON(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>readChannelDataJSON(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>readRawChannelData(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>readChannelData(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>writeRawChannelData(data, handle, fromDims, countDims) (Read-write binary channel data)</li> <li>writeChannelData(data, handle, fromDims, countDims) (Read-write binary channel data)</li> <li>writeRawChannelDataFromAttachment(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>writeChannelDataFromAttachment(handle, fromDims, countDims) (Read-write binary channel data)</li> <li>addLastFrameToMSession(sDestMSession, SpaceName) (Read-write binary channel data)</li> </ul> <p>File operations:</p> <ul> <li>createNewFile() (Handling measurement files)</li> <li>setCurrentFile(handle) (Handling measurement files)</li> <li>saveFileAsync( fileHandle = '') (Handling measurement files)</li> <li>saveFileAsAsync(newAbsoluteUnicodePath, fileHandle = '', overWriteExistingFile = false) (Handling measurement files)</li> <li>closeFileNoSaveAsync(fileHandle = '') (Handling measurement files)</li> <li>closeFileAndSaveAsync(fileHandle = '', compressFileIfPossible = false) (Handling measurement files)</li> <li>closeFileAndSaveAsAsync(newAbsoluteFilePath, fileHandle = '', overWriteExistingFile = false, compressFileIfPossible = false) (Handling measurement files)</li> <li>openFilesAsync(filePaths) (Handling measurement files)</li> </ul> <p>Get/set properties for measurement items:</p> <ul> <li>getUnitMetadata(nodeDescriptor, jsonItemStr, subscribe = \"\") (Get-set properties for measurement items)</li> <li>setUnitMetadata(nodeDescriptor, jsonItemStr) (Get-set properties for measurement items)</li> <li>setUnitMetadata(nodeDescriptor, jsonItemStr, json) (Get-set properties for measurement items)</li> <li>getDisplayedProperties(nodeDescriptor, bDetailed) (Get-set properties for measurement items)</li> </ul> <p>Measurement unit operations:</p> <ul> <li>createTimeSeriesMUnit(xDim, yDim, taskXMLParameters,viewportJson, z0InMs = 0.0, zStepInMs = 1.0, zDimInitial = 1) (MUnit manipulations)</li> <li>createZStackMUnit(xDim, yDim, zDim, taskXMLParameters,viewportJson, zStepInMicrons = 1.0) (MUnit manipulations)</li> <li>extendMUnit(nodeDescriptor, countDims) (MUnit manipulations)</li> <li>deleteMUnit(nodeDescriptor) (MUnit manipulations)</li> <li>copyMUnit(sSourceMImage, sDestMSession, bCopyChannelContents = true) (MUnit manipulations)</li> <li>moveMUnit(sSourceMImage, sDestMSession) (MUnit manipulations)</li> </ul> <p>MultiROI operations:</p> <ul> <li>createBackgroundFrame(xDim, yDim, technologyType, backgroundImageRole, viewportJson, fileNodeDescriptor = '', t0InMs = 0.0, deltaTInMs = 1.0, tDimInitial = 1) (MultiROI commands)</li> <li>createBackgroundZStack(xDim, yDim, zDim, technologyType, backgroundImageRole, viewportJson, fileNodeDescriptor = '', zStepInMicrons = 1.0) (MultiROI commands)</li> <li>createMultiROI2DMUnit(xDim, tDim, methodType, backgroundImagePath, deltaTInMs = 1.0,\u00a0t0InMs= 0.0) (MultiROI commands)</li> <li>createMultiROI3DMUnit(xDim, yDim, tDim, methodType, backgroundImagePath, deltaTInMs = 1.0,\u00a0t0InMs= 0.0) (MultiROI commands)</li> <li>createMultiROI4DMUnit(xDim, yDim, zDim, tDim, methodType, backgroundImagePath, deltaTInMs = 1.0,\u00a0t0InMs= 0.0) (MultiROI commands)</li> </ul> <p>Channel operations: </p> <ul> <li>addChannel(nodeDescriptor, channelName (Add and remove channels) , c (Add and remove channels) ompressionPreset = 0) (Add and remove channels)</li> <li>deleteChannel(nodeDescriptor) (Add and remove channels)</li> </ul> <p>Curve operations: </p> <ul> <li>deleteCurve(nodeDescriptor, idxCurve) (Curve operations)</li> <li>addCurve(nodeDescriptor, name, xType, xDataType, yType, yDataType) (Curve operations)</li> <li>curveInfo(nodeDescriptor, idxCurve) (Curve operations)</li> <li>appendToCurveRaw(nodeDescriptor, idxCurve, size, xType, xDataType, yType, yDataType) (Curve operations)</li> <li>appendToCurve(nodeDescriptor, idxCurve, size, xType, xDataType, yType, yDataType) (Curve operations)</li> <li>readCurveRaw(nodeDescriptor, idxCurve, vectorFormat, forceDouble) (Curve operations)</li> <li>readCurve(nodeDescriptor, idxCurve, vectorFormat, forceDouble) (Curve operations)</li> </ul> <p>Tools:</p> <ul> <li>modifyConversion(conversionName, scale, offset, bSave = false) (Tools)</li> <li>getStatus(commandID) (Tools)</li> <li>getStatus() (Tools)</li> <li>getCommandSetVersion() (Tools)</li> <li>getLastCommandError() (Tools)</li> </ul> <p>Export:</p> <ul> <li>createTmpTiff('identifier', nodeDescriptor, applyLUT[, channels, compress, breakView, exportRawData, startTimeSlice, endTimeSlice]); (Image Export)</li> <li>getTmpTiff('identifier') (Image Export)</li> <li>cancelTiff('identifier') (Image Export)</li> </ul> <p>Metadata and event related functions:</p> <ul> <li>getChildTree('handler') (API file events and query functions)</li> <li>getFileList([,'subscribe' | 'unsubscribe']) (API file events and query functions)</li> <li>getFileMetadata('fileHandler'[,'subscribe' | 'unsubscribe']) (API file events and query functions)</li> <li>getSessionMetadata('sessionHandler'[,'subscribe' | 'unsubscribe']) (API file events and query functions)</li> <li>setSessionMetadata('sessionHandler',JSON) (API file events and query functions)</li> <li>getUnitMetadataJson('unitHandler', 'JsonItemName',[ ,'subscribe' | 'unsubscribe']) (API file events and query functions)</li> <li>setUnitMetadataJson('unitHandler','JsonItemName',\u00a0JSON) (API file events and query functions)</li> </ul> <p>Events:</p> <ul> <li>fileListChanged() (API file events and query functions)</li> <li>fileMetadataChanged() (API file events and query functions)</li> <li>sessionMetadataChanged() (API file events and query functions)</li> <li>unitMetadataChanged() (API file events and query functions)</li> </ul> <p>Space commands:</p> <ul> <li>setPointsToSpace('nodeDescriptor', 'spaceName', bAppend=false)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/#femtoapimicroscope-namespace","title":"FemtoAPIMicroscope namespace","text":"<p>Getting states: </p> <ul> <li>getMicroscopeState() (Get microscope state)</li> <li>getAcquisitionState() (Get acquisition state)</li> </ul> <p>Start/stop measurements, setting duration: </p> <ul> <li>startGalvoScanSnapAsync() (Starting and stopping measurements)</li> <li>startGalvoScanAsync() (Starting and stopping measurements)</li> <li>stopGalvoScanAsync() (Starting and stopping measurements)</li> <li>startResonantScanSnapAsync() (Starting and stopping measurements)</li> <li>startResonantScanAsync() (Starting and stopping measurements)</li> <li>stopResonantScanAsync() (Starting and stopping measurements)</li> <li>setMeasurementDuration(duration, taskName = '', spaceName = '') (Setting measurement duration)</li> </ul> <p>Manipulating axis positions:</p> <ul> <li>getAxisPositions() (Manipulating axis positions)</li> <li>getAxisPosition(axisName, spaceName = '') (Manipulating axis positions)</li> <li>setAxisPosition(axisName, newPosition, isRelativePosition=true, isRelativeToCurrentPosition=true, spaceName = '') (Manipulating axis positions)</li> <li>doZero(axisName, spaceName = '') (Manipulating axis positions)</li> <li>isAxisMoving(axisName, spaceName = '') (Manipulating axis positions)</li> </ul> <p>Get/set Z-stack device intensity depth profile: </p> <ul> <li>getZStackLaserIntensityProfile(measurementType = '', spaceName = '') (Get-set ZStack PMT/laser intensity device depth profile)</li> <li>setZStackLaserIntensityProfile(json) (Get-set ZStack PMT/laser intensity device depth profile)</li> </ul> <p>Get/set imaging window parameters: </p> <ul> <li>getImagingWindowParameters(measurementType = '', spaceName = '') (Get-set imaging window (viewport) parameters)</li> <li>setImagingWindowParameters(json) (Get-set imaging window (viewport) parameters)</li> </ul> <p>Get/set device values: </p> <ul> <li>getPMTAndLaserIntensityDeviceValues() (Get-set PMT/Laserintensity device values)</li> <li>setPMTAndLaserIntensityDeviceValues(json) (Get-set PMT/Laserintensity device values)</li> </ul> <p>Tools: </p> <ul> <li>setFocusingMode(focusingMode, spaceName = '') (Tools)</li> <li>getFocusingModes(spaceName = '') (Tools)</li> <li>getActiveProtocol() (Tools)</li> <li>setActiveTaskAndSubTask(taskName, subTaskName = '') (Tools)</li> <li>getCommandSetVersion() (Tools)</li> <li>getLastCommandError() (Tools)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/","title":"Add and remove channels","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#_1","title":"Add and remove channels","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#var-result-femtoapifileaddchannelmunithandle-channelname-compressionpreset0","title":"var result = FemtoAPIFile.addChannel(mUnitHandle, channelName, compressionPreset=0)","text":"<p>Adds a new channel to the unit of measure with the specified channel name if there is no channel with that name, otherwise the json returned is set to \"false\".</p> <p>Input parameters:</p> <ul> <li>mUnitHandle: unique index of an open unit of measurement converted to a string, e.g. \"55,0,1\"</li> <li>channelName: The name of the channel you want to add</li> <li>0=No compression</li> <li>1=Preset1: ZLib, compression level=2</li> <li>2=Preset2: ZLib, compression level=9</li> <li>~~3=Preset3: BLOSC - Currently disabled~~</li> <li>~~4=Preset4: IP~~ \u2013 Currently disabled~~~~</li> </ul> <p>Returns a JSON object that contains the following fields:</p> <ul> <li>Success: True if the synchronized portion of the command completed successfully and the channel add command was issued successfully, otherwise false</li> <li>id: Command ID that can be used to retrieve command status information</li> <li>added ChannelIdx: unique index of the input unit appended by the newly added channel index, converted to a string, e.g. \"55,0,1,2\".</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#use-in-matlab","title":"Use in Matlab","text":"<p>First, create a FemtoApiProcessing object as described  here (Tutorial: using the FemtoAPI Matlab client). The use is the same as described above,</p> <p>result = femtoapiObj.addChannel(mUnitHandle, channelName) </p> <p>where mUnitHandle is as a Matlab array, channelName is char as an array, and \"result\" is the JSON returned by the server in a Matlab structure.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#examples","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.addChannel('43,0,1','PMT_UR')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Example Matlab client code: </p> <pre><code>femtoapiObj = FemtoApiProcessing;\nresult = femtoapiObj.addChannel ([43,0,1],'PMT_UR');\naddedChannelHandle = result.addedChannelIdx; % vector of added channel handle\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.addChannel('43,0,1','PMT_UG');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"addChannel(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#_2","title":"Add and remove channels","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#var-result-femtoapifiledeletechannelchannelhandle","title":"var result = FemtoAPIFile.deleteChannel(channelHandle)","text":"<p>Removes the specified channel. If there is no channel with that channel handle, \"false\" is set in the json returned.</p> <p>Input parameter:</p> <ul> <li>channelHandle: unique index of the unit of measurement, including channel index, in string format, e.g. \"65,0,1,2\"</li> </ul> <p>Returns a JSON object that contains the following fields:</p> <ul> <li>Success: True if the synchronized portion of the command completed successfully and the channel add command was issued successfully, otherwise false</li> <li>id: Command ID that can be used to retrieve command status information</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#use-in-matlab_1","title":"Use in Matlab","text":"<p>First, create a FemtoApiProcessing object as described  here (Tutorial: using the FemtoAPI Matlab client). The use is the same as described above,</p> <p>result = femtoapiObj.deleteChannel(channelHandle) </p> <p>where channelHandle is specified as a Matlab array, and \"result\" is the JSON returned by the server into a Matlab structure.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/add-and-remove-channels/#examples_1","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.deleteChannel('43,0,1,1')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoApiProcessing;\nresult = femtoapiObj.deleteChannel ([43,0,1,1]);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.deleteChannel('43,0,1,1');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"deleteChannel(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_1","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilegetchildtreehandler-function","title":"var JSON=FemtoAPIFile.getChildTree('handler') -function","text":"<p>getProcessingState()=GetChildTree(),No associated signal.</p> <p>The handler parameter can be defined on the file/session/unit level. In case of empty parameter the whole tree will be returned. If the handler contain a file id the whole property tree of the file will be returned. Similarly if it contains a session id the properties of the given session will be returned and in case of a unit id the properties of that unit will be returned.</p> <p>The metadata in the JSON can differ from the metadata in the file.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#file","title":"File:","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_2","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilegetfilelistsubscribe-unsubscribe-function","title":"var JSON=FemtoAPIFile.getFileList([,'subscribe' | 'unsubscribe']) -function","text":"<p>Returns a simple list of the opened files. The client will subscribe for the file close/open event when given the 'subscribe' argument. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_3","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilefileopened-event","title":"var JSON=FemtoAPIFile.fileOpened() -event","text":"<p>After opening a file an event is generated on the API. The result JSON contains the file name and id (runtime unique index).</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_4","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilefileclosed-event","title":"var JSON=FemtoAPIFile.fileClosed() -event","text":"<p>After closing a file an event is generated on the API. The result JSON contains the file name and id (runtime unique index).</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_5","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilegetfilemetadatafilehandlersubscribe-unsubscribe-function","title":"var JSON=FemtoAPIFile.getFileMetadata('fileHandler'[,'subscribe' | 'unsubscribe']) -function","text":"<p>Returns the metadata in JSON format from an open file's 'FILE' section (AccessTime, Vendor, VecMSessionSize...). The client will subscribe for the file's simple metadata changes when given the 'subscribe' argument. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-boolfemtoapifilesetfilemetadatafilehandlerjson-function","title":"var bool=FemtoAPIFile.setFileMetadata('fileHandler',JSON) -function","text":"<p>Sets the basic parameters of the file defined by the 'fileHandler'. Currently only the isModified field can be changed. The JSON must contain the result of the getFileMetadata() with the appropriate changes.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_6","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilefilemetadatachanged-event","title":"var JSON=FemtoAPIFile.fileMetadataChanged() -event","text":"<p>Returns the JSON result of the getFileMetadata() function if any of those values have changed.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#session","title":"Session:","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_7","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilegetsessionmetadatasessionhandlersubscribe-unsubscribe-function","title":"var JSON=FemtoAPIFile.getSessionMetadata('sessionHandler'[,'subscribe' | 'unsubscribe']) -function","text":"<p>Returns the metadata in JSON format from the session's 'MSESSION' section (MSessionType,Comment, VecMUnitsSize...) defined by the 'sessionHandler'. The client will subscribe for the session's metadata changes when given the 'subscribe' argument. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_8","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-boolfemtoapifilesetsessionmetadatasessionhandlerjson-function","title":"var bool=FemtoAPIFile.setSessionMetadata('sessionHandler',JSON) -function","text":"<p>Sets the basic parameters of the session defined by the 'sessionHandler'. Currently only the 'comment' field can be changed. The JSON must contain the result of the getSessionMetadata() with the appropriate changes.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_9","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilesessionmetadatachanged-esemeny","title":"var JSON=FemtoAPIFile.sessionMetadataChanged() -esem\u00e9ny","text":"<p>Returns the JSON result of the getSessionMetadata() function if any of those values have changed.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_10","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilegetcurrentsessionsubscribe-unsubscribe-function","title":"var JSON=FemtoAPIFile.getCurrentSession([,'subscribe' | 'unsubscribe']) -function","text":"<p>Returns the current session's handler in JSON format. The client will subscribe for the changes when given the 'subscribe' argument. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_11","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-boolfemtoapifilesetcurrentsessionsessionhandler-function","title":"var bool=FemtoAPIFile.setCurrentSession('sessionHandler') -function","text":"<p>Sets the current session according to the 'sessionHandler'.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_12","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilecurrentsessionchanged-event","title":"var JSON=FemtoAPIFile.currentSessionChanged() -event","text":"<p>Returns the JSON result of the getCurrentSession() function if it changed.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#munit","title":"MUnit:","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_13","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifilegetunitmetadatajsonunithandler-jsonitemname-subscribe-unsubscribe-function","title":"var JSON=FemtoAPIFile.getUnitMetadataJson('unitHandler', 'JsonItemName',[ ,'subscribe' | 'unsubscribe']) -function","text":"<p>Returns the metadata of the 'JsonItemName' key in JSON format from the MUnit defined by the 'unitHandler'. The client will subscribe for the change events of the defined JsonItem's metadata in the MUnit when given the 'subscribe' argument. </p> <p>JsonItemName keys:</p> <ul> <li>BaseUnitMetadata</li> <li>ReferenceViewport</li> <li>ChannelInfo</li> <li>Roi</li> <li>Points</li> <li>Device</li> <li>AxisControl</li> <li>UserData</li> <li>AoSettings</li> <li>IntensityCompensation</li> <li>CoordinateTuning</li> <li>Protocol</li> <li>MultiRoiProtocol</li> <li>RasterScanProtocol</li> <li>CurveInfo</li> <li>FullFrameParams</li> <li>Modality</li> <li>CameraSettings</li> <li>BreakView</li> <li>CoordinateMap</li> <li>VersionInfo</li> <li>ViewerParams</li> <li>TriggeredActions</li> <li>TileScan</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_14","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-boolfemtoapifilesetunitmetadatajsonunithandlerjsonitemname-json-function","title":"var bool=FemtoAPIFile.setUnitMetadataJson('unitHandler','JsonItemName', JSON) -function","text":"<p>Sets the parameters of the JsonItem in the MUnit defined by the 'unitHandler'. The JSON must contain the result of the getUnitMetadata() with the appropriate changes.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#_15","title":"API file events and query functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/api-file-events-and-query-functions/#var-jsonfemtoapifileunitmetadatachanged-event","title":"var JSON=FemtoAPIFile.unitMetadataChanged() -event","text":"<p>Returns the JSON result of the getUnitMetadata() function if it changed.</p> <p>It also contains the following extra fields:</p> <ul> <li>'event' - Name of the event. In this case it will always be unitMetadataChanged</li> <li>'time' - The time when the event was generated</li> <li>'nodeDescriptor' - Descriptor of the unit node which triggered the event</li> <li>'jsonItem' - JsonItemName's value, defines which parameter section changed</li> <li>'values' - Json array which contains the event JSON. Only the first array element is used for now</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_1","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-resultfemtoapifiledeletecurvenodedescriptor-idxcurve","title":"var result=FemtoAPIFile.deleteCurve(nodeDescriptor, idxCurve)","text":"<p>Deletes a curve</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#arguments","title":"Arguments","text":"<ul> <li>nodeDescriptor: string containing the node descriptor in which the curve is located</li> <li>idxCurve: integer containing the curve index to delete</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#return","title":"Return","text":"<p>Returns bool value. True on success, false otherwise. If false returned, an error message is also set</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_2","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-jsonfemtoapifileaddcurvenodedescriptor-name-xtype-xdatatype-ytype-ydatatype","title":"var json=FemtoAPIFile.addCurve(nodeDescriptor, name, xType, xDataType, yType, yDataType)","text":"<p>Adds a new curve without curve data. Curve data has to be written by one of the appendToCurveRaw and appendToCurve commands.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#arguments_1","title":"Arguments","text":"<ul> <li> <p>nodeDescriptor: string containing the node descriptor in which the curve is located</p> </li> <li> <p>xType: string, value can be one of the followings:</p> </li> <li> <p>equidistant: input data is represented as equidistant values, i.e the first value and the step are provided</p> </li> <li> <p>vector: input data is a vector of x values</p> </li> <li> <p>xDataType: string, value can be one of the followings:</p> </li> <li> <p>double: input data is represented in IEEE 754 64-bit floating point type</p> </li> <li> <p>yType: string, value can be one of the followings:</p> </li> <li> <p>rle: input data is run-length encoded, i.e pairs of repetition count and value are provided</p> </li> <li> <p>vector: input data is a vector of y values</p> </li> <li> <p>yDataType: string, value can be one of the followings:</p> </li> <li> <p>double: input data is represented in IEEE 754 64-bit floating point type</p> </li> <li>uint16: input data is represented in 16-bit unsigned integers</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#attachment","title":"Attachment","text":"<p>Some curve parameters are provided via attachment:</p> <ul> <li>if xType == equidistant: it contains two values of xDataType: x0 and xstep. xstep must be greater than zero.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#return_1","title":"Return","text":"<p>Returns a JSON string. On success:</p> <pre><code>{\n    \"success\": true,\n    \"size\": integer meaning the count of samples,\n    \"curveIdx\": integer containing the index of the inserted curve,\n    \"xType\": storage type of x in string, can be \"equidistant\" or \"vector\",\n    \"xDataType\": storage data type of x in string, can be \"uint16\" or \"double\",\n    \"yType\": storage type of y in string, can be \"rle\" or \"vector\",\n    \"yDataType\": storage data type of y in string, can be \"uint16\" or \"double\"\n}\n</code></pre> <p>On fail:</p> <pre><code>{\n    \"success\": false\n}\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_3","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-success-femtoapifilesetcurveequidistantsnodedescriptor-idxcurve-x0raw-deltaraw","title":"var success =FemtoAPIFile.setCurveEquidistants(nodeDescriptor, idxCurve, x0Raw, deltaRaw)","text":"<p>Sets the equidistant parameters of a curve.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#arguments_2","title":"Arguments","text":"<ul> <li>nodeDescriptor: string containing the node descriptor in which the curve is located</li> <li>idxCurve: index of the curve</li> <li>x0Raw: first equidistant double parameter</li> <li>deltaRaw: second equidistant double parameter</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#return_2","title":"Return","text":"<p>Returns whether the operation was successfull.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_4","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-jsonfemtoapifilecurveinfonodedescriptor-idxcurve","title":"var json=FemtoAPIFile.curveInfo(nodeDescriptor, idxCurve)","text":"<p>Returns information about the selected curve</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#arguments_3","title":"Arguments","text":"<ul> <li>nodeDescriptor: string containing the node descriptor in which the curve is located</li> <li>idxCurve: integer containing the curve index</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#return_3","title":"Return","text":"<p>The function returns the same JSON as the addCurve function</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_5","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-resultfemtoapifileappendtocurverawnodedescriptor-idxcurve-size-xtype-xdatatype-ytype-ydatatype","title":"var result=FemtoAPIFile.appendToCurveRaw(nodeDescriptor, idxCurve, size, xType, xDataType, yType, yDataType)","text":"<p>Appends raw data to a curve.</p> <p>See appendToCurve function for details.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_6","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-resultfemtoapifileappendtocurvenodedescriptor-idxcurve-size-xtype-xdatatype-ytype-ydatatype","title":"var result=FemtoAPIFile.appendToCurve(nodeDescriptor, idxCurve, size, xType, xDataType, yType, yDataType)","text":"<p>Appends converted data to a curve.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#arguments_4","title":"Arguments","text":"<ul> <li> <p>nodeDescriptor: string containing the node descriptor in which the curve is located</p> </li> <li> <p>idxCurve: integer containing the curve index</p> </li> <li> <p>size: count of the samples (x=y) to append to the curve</p> </li> <li> <p>xType: string, value can be one of the followings:</p> </li> <li> <p>equidistant: input data is represented as equidistant values, i.e the first value and the step are provided. Only possible if the curve x axis is already equidistant</p> </li> <li> <p>vector: input data is a vector of x values. Only possible if the curve x axis is already vector (TODO this could be changed)</p> </li> <li> <p>xDataType: string, value can be one of the followings:</p> </li> <li> <p>double: input data is represented in IEEE 754 64-bit floating point type</p> </li> <li> <p>yType: string, value can be one of the followings:</p> </li> <li> <p>rle: input data is run-length encoded, i.e pairs of repetition count and value are provided</p> </li> <li> <p>vector: input data is a vector of y values</p> </li> <li> <p>yDataType: string, value can be one of the followings:</p> </li> <li> <p>double: input data is represented in IEEE 754 64-bit floating point type</p> </li> <li>uint16: input data is represented in 16-bit unsigned integers</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#attachment_1","title":"Attachment","text":"<p>The actual data is provided as an attachment of the following format:</p> <ul> <li> <p>&lt;x data&gt; &lt;y data&gt;</p> </li> <li> <p>x data:</p> <ul> <li>if xType == equidistant, it is empty, the new values for the x axis are determined by the equidistant axis properties (x0, xstep)</li> <li>if xType == vector, it contains size values of xDataType. Values must be monothonic inreasing.</li> </ul> </li> <li> <p>y data:</p> <ul> <li>if yType == rle, it contains pairs of repetition count and value. Repetition count is always in uint32 format. Value is of yDataType. The sum of repetition counts must be equal to to size</li> <li>if yType == vector, it contains size values of yDataType representing each sample</li> </ul> </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#return_4","title":"Return","text":"<p>Returns bool value. True on success, false otherwise. If false returned, an error message is also set.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_7","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-jsonfemtoapifilereadcurverawnodedescriptor-idxcurve-vectorformat-forcedouble","title":"var json=FemtoAPIFile.readCurveRaw(nodeDescriptor, idxCurve, vectorFormat, forceDouble)","text":"<p>Reads a curve and returns raw curve data as attachment. Y data type will be the same as it is stored on disk (uint16 or double).</p> <p>See readCurve function for details.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#_8","title":"Curve operations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#var-jsonfemtoapifilereadcurvenodedescriptor-idxcurve-vectorformat-forcedouble","title":"var json=FemtoAPIFile.readCurve(nodeDescriptor, idxCurve, vectorFormat, forceDouble)","text":"<p>Reads a curve and returns converted curve data as attachment. Y data type will always double.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#arguments_5","title":"Arguments","text":"<ul> <li>nodeDescriptor: string containing the node descriptor in which the curve is located</li> <li>idxCurve: integer containing the curve index</li> <li>vectorFormat: bool, if true, the RLE and equidistant curve data is extracted to vectors</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/curve-operations/#return_5","title":"Return","text":"<p>The function returns the same JSON as the addCurve function.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-acquisition-state/","title":"Get acquisition state","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-acquisition-state/#var-json-femtoapimicroscopegetacquisitionstate","title":"var json = FemtoAPIMicroscope.getAcquisitionState()","text":"<p>UNSAFE operation.</p> <p>Gets the MESc GUI acquisition state. Currently it contains most of the measurement parameters and metadata information that can be seen on the MESc GUI acquisition panel, but only for resonant and galvo tabs. For example checkbox states, PMT/laser intensity device values, measurement specific parameters (for resonant and galvo measurements). </p> <p>Note: Only input channels metadata information are get with this command, the output channel informations and much more regarding used waveforms, patterns, etc. can be get with the  getActiveProtocol() (Tools) command.</p> <p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.getAcquisitionState()\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIMicroscope.getAcquisitionState();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"getAcquisitionState(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-acquisition-state/#usage-in-matlab","title":"Usage in Matlab","text":"<p>command: </p> <p>acquisitionState = femtoapiAcquisitionObj.getAcquisitionState();</p> <p>Returns the acquisition state JSON as a nested Matlab struct.</p> <p>Code example: </p> <pre><code>femtoapiObj= FemtoAPIAcquisition();\nacquisitionState = femtoapiObj.getAcquisitionState();\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-microscope-state/","title":"Get microscope state","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-microscope-state/#var-jsonfemtoapimicroscopegetmicroscopestate","title":"var json=FemtoAPIMicroscope.getMicroscopeState()","text":"<p>UNSAFE operation.</p> <p>Gets a json object, which contains the following fields: </p> <ul> <li>\"microscopeState\": current state of the microscope</li> <li>\"lastMeasurementError\":  the cause of the error in the last measurement (JSON string), if there was any, otherwise an empty string.</li> </ul> <p>The microscopeState can be one of the following JSON strings:</p> <ul> <li>\"Off\": The microscope hardware is turned off.</li> <li>\"Initializing\": The microscope hardware is being initialized.</li> <li>\"Ready\": The microscope hardware is ready for starting measurements.</li> <li>\"Working\": The microscope is running a measurement.</li> <li>\"In an invalid state\": An error occurred in the operation of the microscope (e.g., microscope hardware error).</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-microscope-state/#usage-in-matlab","title":"Usage in Matlab","text":"<p>command:</p> <p>result = femtoapiMicroscopeObj.getMicroscopeState()</p> <p>It returns the json object mentioned above, converted to a Matlab struct: </p> <ul> <li>microscopeState: enumeration, microscope state</li> <li>lastMeasurementError: character array, the last measurement error, or empty if there was no error</li> </ul> <p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.getMicroscopeState()\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\nresult = femtoapiObj.getMicroscopeState(); \nresult.microscopeState % 'microscopeState' field as enumeration\nresult.lastMeasurementError\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getMicroscopeState();\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n     print (\"Return code: %d\" % resultCode)\n     print (simpleCmdParser.getErrorText())\nelse:   \n     print (\"getMicroscopeState(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-processing-state/","title":"Get processing state","text":"<p>The processing state indicates the file structure and the associated metadata in MESc. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-processing-state/#var-json-femtoapifilegetprocessingstate","title":"var json = FemtoAPIFile.getProcessingState()","text":"<p>DEPRECATED, please use  getChildTree (API file events and query functions) as replacement</p> <p>Gets the list of open files and the trees of all measurement sessions and measurements within them, together with most of the available metadata. The exact JSON format is described at the following link:  DEV-A-1668703787 </p> <p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.getProcessingState()\u201d;\nauto cmdParser=client\u2192sendJSCommand(command);\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.getProcessingState();\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n     print (\"Return code: %d\" % resultCode)\n     print (simpleCmdParser.getErrorText())\nelse:  \n     print (\"getProcessingState(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-processing-state/#matlab-client-usage","title":"Matlab client usage:","text":"<p>command: FemtoAPIProcessingObj.getProcessingState()</p> <p>In Matlab, this command gets the processing state as json from the server, then converts it to a tree based structure for easier data access and saves into FemtoAPIProcessing object. The tree structure is based on the opened file, session, and measurement unit unique indices (handles).</p> <p>It does not return the structured json data, but updates the processing state inner data structure of the FemtoAPIProcessing object. </p> <p>This command is called when a FemtoAPIProcessing object is created. </p> <p>Because of this, you don't have to parse the json returned from server, you can use the following functions to set/get part of the locally stored processing state structure: </p> <ul> <li>data = obj.getMeasurementMetaData(handle) : data will contain the metadata of processing state to the given handle </li> <li>dataRef = obj.getMeasurementMetaDataRef(handle) : same as getMeasurementMetaData, but it will the reference to the specified object</li> <li>data = getMeasurementMetaDataField(handle, fieldName) : returns the value of the specified field to the given measurement handle </li> <li>setMesurementMetaDataField(handle, fieldName, newValue) : sets the given field in the measurement session/unit/channel denoted by handle to newValue</li> <li>etc. </li> </ul> <p>The full list of helper functions that can be used regarding processing state can be found  here (Helper classes and functions). </p> <p>Important note on usage: it is recommended to run getProcessingState() command after the file structure in the processing view in MESc has changed, to synchronize the processing state metadata stored within the FemtoAPIProcessing object to the actual processing state in MESc. </p> <p>Because if you want to set channel LUT/conversion, or comment of measurement session/unit, the helper functions for setting/getting metadata, set(get)MeasurementMetaDataField are using the local structure. And if it is not updated, you may reference to a file/session/unit or channel handle that does not exist anymore.</p> <p>Currently, the following commands change the file structure on server side: </p> <ul> <li>file operations: open/close/create </li> <li>measurement unit operations: create/extend/copy/move/delete</li> <li>channel operations: add/delete channel </li> </ul> <p>Code example:</p> <pre><code>% connects to local server, and updates processing state\nfemtoapiObj = FemtoAPIProcessing(); \n\nmUnitHandle = [23 0 0] % must be an existing measurement unit handle \n\n% get measurement metadata: uses local structure to get data\nmUnitData = femtoapiObj.getMeasurementMetaData(mUnitHandle) \n\n% add new channel to measurement unit \nresult = femtoapiObj.addChannel(mUnitHandle,'Ch1');\nchannelHandle = result.addedChannelIdx;\n\n% file structure changed in MESc -&gt; call getProcessingState() to update processing state in femtoapiObj\nfemtoapiObj.getProcessingState();\n\n% get metadata of newly added channel from local structure\nchannelData = femtoapiObj.getMeasurementMetaData(channelHandle)\n\n% set metadata in local structure \nfemtoapiObj.setMeasurementMetaDataField(mUnitHandle,'comment','new comment');\n\n% update processing state on server -&gt; after this, no getProcessingState() command is needed, because file structure has not changed\nfemtoapiObj.setProcessingState();\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/","title":"Get-set imaging window (viewport) parameters","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#var-json-femtoapimicroscopegetimagingwindowparametersmeasurementtype-spacename","title":"var json = FemtoAPIMicroscope.getImagingWindowParameters(measurementType = '', spaceName = '')","text":"<p>UNSAFE operation.</p> <p>Gets imaging window parameters. </p> <p>It has two optional parameters to filter the imaging parameters by measurement type and space (the examples illustrate their use):</p> <ul> <li>measurementType: measurement type as string, currently it can be 'resonant' or 'galvo', or empty string, in the latter case, both types are considered.</li> <li>spaceName: space name as string, if empty string is given, default space ('space1') is considered. </li> </ul> <p>The \u2018json\u2019 variable returned by the get command contains the same JSON parameters and uses the same JSON schema as the set command, and the following extra parameters:</p> <ul> <li>rotationQuaternion: rotation quaternion, as a JSON array with 4 values in the format [w, x,y,z]. For identity rotation, it is [1,0,0,0].</li> <li>resolutionXLimits: a JSON array, contains the current lower/upper resolution limits in the format [lowerXLimit, upperXLimits]</li> <li>resolutionYLimits: a JSON array, contains the current lower/upper resolution limits in the format [lowerYLimit, upperYLimits]</li> </ul> <p>These parameters appear only when the get command is issued, and cannot be set.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#usage-in-matlab","title":"Usage in Matlab","text":"<p>First, instantiate the FemtoAPIAcquisition class as described in the  tutorial (Tutorial: using the FemtoAPI Matlab client). </p> <p>The syntax of the call is almost the same, only the resulted json is parsed into a Matlab (nested) struct. Otherwise the usage is the same as with the C++/Python client commands:</p> <p>result = femtoapiObj.getImagingWindowParameters(measurementType, spaceName)</p> <p>In case of any error, a Matlab error type exception is thrown.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#examples","title":"Examples","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#c-code-examples","title":"C++ code examples:","text":"<pre><code>// 1. No optional parameters are given: get imaging window parameters for all the measurement types and spaces. The result is the same when one or two empty string is given.\nQString command = \"FemtoAPIMicroscope.getImagingWindowParameters()\" ;\n// or QString command = \"FemtoAPIMicroscope.getImagingWindowParameters(\u2019\u2019)\"\n// or QString command = \"FemtoAPIMicroscope.getImagingWindowParameters(\u2019\u2019,\u2019\u2019)\"\n\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// 2. If the first parameter is given, it is the measurement type, and currently it must be \u2018resonant\u2019 or \u2018galvo\u2019 (case sensitive). It results imaging parameters for the specified measurement in case of all //available spaces. \u00a0\nQString command =\u00a0 \"FemtoAPIMicroscope.getImagingWindowParameters(\u2019resonant\u2019)\" ;\n// or if the second parameter is empty string (default), results are the same: \n// QString command = //\"FemtoAPIMicroscope.getImagingWindowParameters(\u2019resonant\u2019,\u2019\u2019)\"\n\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// 3. If the second parameters is given, the space name, and the first is empty string (default), imaging parameters for all measurements, but only with the specified space are returned.\nQString command = \"FemtoAPIMicroscope.getImagingWindowParameters(\u2019\u2019,\u2019space1\u2019)\" ;\n\n\n// imaging window values for measurements resonant and galvo, with space1, are returned\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = MEScAPIAcquisition();\n\n% get imaging parameters for 'galvo' measurement in case of all (available) spaces \u00a0\nimagingParametersGalvo = femtoapiObj.getImagingWindowParameters('galvo'); \n\n% get imaging parameters for 'resonant' measurement in case of all (available) spaces\nimagingParametersResonant = femtoapiObj.getImagingWindowParameters('resonant');\n\n% get imaging parameters for all available type of measurements ('resonant' and 'galvo', currently), for the specified space\nimagingWindowParamtersForSpace1 = femtoapiObj.getImagingWindowParameters('','space1');\n\n% get imaging window parameters for all the measurement types and spaces. The result is the same when one or two empty string is given\nimagingWindowParametersAll = femtoapiObj.getImagingWindowParameters();\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getImagingWindowParameters();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"getImagingWindowParameters(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#var-succeed-femtoapimicroscopesetimagingwindowparametersjson","title":"var succeed = FemtoAPIMicroscope.setImagingWindowParameters(json)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#or","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#femtoapimicroscopesetimagingwindowparametersjson","title":"FemtoAPIMicroscope.setImagingWindowParameters(json)","text":"<p>This command is used to set the imaging window (viewport) parameters of a selected measurement type and space in a JSON format.</p> <p>In case of the set command, the input is a JSON array, which contains one or more JSON objects for the different measurement types and/or spaces. This JSON object consists of the following values:</p> <ul> <li>space: string, optional, the space used for imaging, if omitted, the default space is used</li> <li>measurementType: the type of measurement to apply the settings of the imaging window to. Currently the value of this can only be one of the strings \u201cresonant\u201d or \u201cgalvo\u201d. The set values have some restrictions based on the measurement type. These will be described later.</li> <li>resolution: a JSON array of two elements containing the imaging window resolution in the X and Y directions, e.g [pixelsX, pixelsY].</li> <li>size: a JSON array of two elements containing the size of the imaging window in \u00b5m, e.g. [widthX,widthY].</li> <li>transformation: a JSON object, which describes the translational and rotational transformations, and consists of two JSON objects according to \"translation\" and \"rotationQuaternion\". Translation means the lower left position of the viewport rectangle given in the (x,y) (or (x,y,z)) JSON array. Currently, only translation in the X and Y directions can be set, translation in the Z direction and rotationQuaternion are omitted, if given. </li> </ul> <p>It returns true if the input json and its values were valid and parameters are successfully set, otherwise false.</p> <p>The input parameter \u2018json\u2019 is validated against the following JSON schema:</p> <pre><code>{\n\u00a0 \u00a0 \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\u00a0 \u00a0 \"title\": \"Imaging window parametes schema\",\n\u00a0 \u00a0 \"description\": \"Json array that contains the imaging window (viewport) parameters for all spaces and measurement types\",\n\u00a0 \u00a0 \"type\": \"array\",\n\u00a0 \u00a0 \"minItems\": 1,\n\u00a0 \u00a0 \"items\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Json object that contains the imaging window parameters for a specific space and measurement type (galvo or resonant)\",\n\u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"object\",\n\u00a0 \u00a0 \u00a0 \u00a0 \"properties\" :{\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"space\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Name of the space\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"string\"},\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"measurementType\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"string\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"enum\":[\"resonant\",\"galvo\"],\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Type of measurement, its value can only be 'resonant' or 'galvo'.\"\u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resolution\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Image X and Y resolution in pixels\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"array\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"items\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"integer\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minimum\": 1\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minItems\": 2,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"maxItems\": 2\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resolutionXLimits\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Json array that contains the limits of X resolution [lowerXLimit, upperXLimit]\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"array\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"items\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"integer\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minimum\": 1\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minItems\": 2,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"maxItems\": 2\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"resolutionYLimits\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Json array that contains the limits of Y resolution [lowerYLimit, upperYLimit]\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"array\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"items\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"integer\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minimum\": 1\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minItems\": 2,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"maxItems\": 2\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"transformation\" : {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Json object that describes viewport translation in order (x,y,z) and rotation quaternion (w,x,y,z)\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\" : \"object\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"properties\" : {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"translation\" : {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\" : \"array\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"items\": { \"type\": \"number\"\u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minItems\" : 2,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"maxItems\" : 3\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"rotationQuaternion\" : {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\" : \"array\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"items\": {\u00a0 \"type\": \"number\"\u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minItems\" : 4,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"maxItems\" : 4\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"required\":[\"translation\"],\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"additionalProperties\": false\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"size\": {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"description\": \"Json array containing the size of viewport in format [width,height]\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"array\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"items\" : {\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"type\": \"number\",\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minimum\" : 0,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"exclusiveMinimum\" : true\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"minItems\":2,\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \"maxItems\":2\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 }\n\u00a0 \u00a0 \u00a0 \u00a0 },\n\u00a0 \u00a0 \u00a0 \u00a0 \"required\": [ \"measurementType\",\"resolution\",\"size\",\"transformation\" ],\n\u00a0 \u00a0 \u00a0 \u00a0 \"additionalProperties\": false\n\u00a0 \u00a0 }\n}\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#important-notes","title":"Important notes","text":"<ul> <li> <p>If some of the parameters are invalid, an error message is returned, which gives information on the valid domain of the parameters.</p> </li> <li> <p>The \u2018measurementType\u2019 and \u2018space\u2019 pairs are unique, so if the outer JSON array contains more than one object with the same measurementType and space, an error message is returned, and no parameter is set.</p> </li> <li> <p>There are some parameters in the JSON schema, which cannot be set, and has no impact when given, these parameters only appear in the result JSON of the getter command:  </p> </li> <li>\u2018rotationQuaternion\u2019  </li> <li>\u2018resolutionXLimits\u2019  </li> <li>\u2018resolutionYLimits\u2019</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#restrictions-on-parameters","title":"Restrictions on parameters","text":"<p>There are some rules applied to the imaging parameters, and some of them depend on the measurement types. If at least one condition is not met, an error message is returned, and nothing is changed.</p> <p>The following rules are applied:</p> <p>For both (resonant and galvo):</p> <ul> <li>aspect ratio calculated from the X and Y resolutions and the imaging window size must be equal (resolution / resolution = width / height)</li> <li>the imaging window must be within its boundaries, which depends on the channel conversion</li> </ul> <p>for galvo:</p> <ul> <li>valid resolution domain: 64x16 \u2013 1024x1024 (These are the absolute limits, but the actual limits depend on the GUI parameter pixel dwell time in case of galvo measurements. Run the FemtoAPIMicroscope.getImagingWindowParameters() to get the exact values)</li> </ul> <p>for resonant:</p> <ul> <li>valid resolution domain: 64x16 \u2013 512x1024</li> <li>the imaging window must be symmetric on the Y axis, so the translation in the X direction must be negative, and its absolute value must be half of the imaging window width (translX = -width/2)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>First, instantiate the FemtoAPIAcquisition class as described in the  tutorial (Tutorial: using the FemtoAPI Matlab client). </p> <p>The syntax of the call is almost the same, only the input json must be parsed into a Matlab (nested) struct. Otherwise the usage is the same as with the C++/Python client commands:</p> <p>succeeded = femtoapiObj.setImagingWindowParameters(imagingWindowParameters)</p> <p>In case of any error, a Matlab error type exception is thrown, otherwise true is returned.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#examples_1","title":"Examples","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-imaging-window-viewport-parameters/#c-code-example","title":"C++ code example:","text":"<pre><code>QString command =\u00a0 \"FemtoAPIMicroscope.setImagingWindowParameters('[{\"space\": \"space1\", \"measurementType\": \"resonant\", \"size\": [200, 400],\"transformation\": {\"translation\": [-175.0,0.0]},\"resolution\": [100, 200]}]') \";\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>This command will set the viewport parameters for the space named \u2018space1\u2019 and the \u2018resonant\u2019 measurement type. The imaging window will be 200 \u00b5m in the X, and 400 \u00b5m in the Y direction, it has a translational transformation, translated by -175.0 \u00b5m in the X, 0.0 \u00b5m in the Y direction. The imaging window resolution in the X direction is 100 pixels, and in the Y direction is 200 pixels.</p> <p>Matlab client code example: </p> <pre><code>femtoapiObj = MEScAPIAcquisition();\n\nimagingWindowParameters = struct();\nimagingWindowParameters.measurementType = 'galvo';\nimagingWindowParameters.space = 'space1';\nimagingWindowParameters.resolution = [280; 280];\nimagingWindowParameters.size = [140; 140];\nimagingWindowParameters.transformation = struct();\nimagingWindowParameters.transformation.translation = [-70;0;0]; \nimagingWindowParameters.transformation.rotationQuaternion = [0,0,0,1]; % default value, it will not be set by this method\n\nfemtoapiObj.setImagingWindowParameters(imagingWindowParameters);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.setImagingWindowParameters('[{\"space\": \"space1\", \"measurementType\": \"resonant\", \"size\": [200, 400],\"transformation\": {\"translation\": [-175.0,0.0]},\"resolution\": [100, 200]}]');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"setImagingWindowParameters(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/","title":"Get-set PMT/Laserintensity device values","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#var-json-femtoapimicroscopegetpmtandlaserintensitydevicevalues","title":"var json = FemtoAPIMicroscope.getPMTAndLaserIntensityDeviceValues()","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#or","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#femtoapimicroscopegetpmtandlaserintensitydevicevalues","title":"FemtoAPIMicroscope.getPMTAndLaserIntensityDeviceValues()","text":"<p>UNSAFE operation.</p> <p>This command is used to get PMT/Laser intensity device values.</p> <p>It uses the same JSON schema as the set() method, so this command results in a JSON array that contains objects, with the following fields:</p> <ul> <li>name: device name</li> <li>value: device intensity value</li> <li>min: device value lower limit</li> <li>max: device value upper limit</li> <li>space: space which the device is configured for</li> </ul> <p>Example output:</p> <pre><code>[\n\u00a0\u00a0\u00a0 {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"max\": 5,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"min\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"name\": \"PMT_UG\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"space\": \"space1\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"value\": 4\n\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0 {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"max\": 5,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"min\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"name\": \"PMT_GALVO\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"space\": \"space1\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"value\": 2.50\n\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0 {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"max\": 5,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"min\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"name\": \"PMT_UR\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"space\": \"space1\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"value\": 2\n\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0 {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"max\": 100,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"min\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"name\": \"ResonantPockelsCell\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"space\": \"space1\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"value\": 27.70\n\u00a0\u00a0\u00a0 }\n]\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#usage-in-matlab","title":"Usage in Matlab","text":"<p>First, you need to create a FemtoAPIAcquisition object, as described  here (Tutorial: using the FemtoAPI Matlab client). Otherwise, the usage is the same as described above, the only change that the returned value has different format: </p> <p>result = femtoapiObj.getPMTAndLaserIntensityDeviceValues();</p> <p>where the returned value is a  DeviceValues (Helper classes and functions) object, that contains the json result returned from server parsed into an array of Matlab structs.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#examples","title":"Examples","text":"<p>C++ example</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.getPMTAndLaserIntensityDeviceValues()\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\ndeviceValues = femtoapiObj.getPMTAndLaserIntensityDeviceValues();\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getPMTAndLaserIntensityDeviceValues();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"getPMTAndLaserIntensityDeviceValues(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#var-succeed-femtoapimicroscopesetpmtandlaserintensitydevicevaluesjson","title":"var succeed = FemtoAPIMicroscope.setPMTAndLaserIntensityDeviceValues(json)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#or_1","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#femtoapimicroscopesetpmtandlaserintensitydevicevalues-json","title":"FemtoAPIMicroscope.setPMTAndLaserIntensityDeviceValues (json)","text":"<p>UNSAFE operation.</p> <p>This command is used to set PMT/Laserintensity device intensity values.</p> <p>The input is a JSON array, which contains JSON objects, with the following fields:</p> <ul> <li>space: string, name of the space for which the device is configured, optional, if not given, default space is considered</li> <li>name: string, device name, it must be a valid, configured PMT/Laser intensity device</li> <li>value: double, the new intensity value of the device specified by \u2019name\u2019, if it is smaller/greater than the lower/upper limit value of the specified device, the function returns with false, and an error message</li> </ul> <p>Output: true, if the device position set command has been sent successfully, false otherwise.</p> <p>The input JSON is validated against the following JSON schema:</p> <pre><code>{\n\u00a0\u00a0\u00a0 \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\u00a0\u00a0\u00a0 \"title\": \"PMT and laser intensity device parametes schema\",\n\u00a0\u00a0\u00a0 \"description\": \"Json array that contains the PMT/laser intensity device parameters\",\n\u00a0\u00a0 \u00a0\"type\": \"array\",\n\u00a0\u00a0\u00a0 \"items\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\": \"object\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"properties\" : {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"name\" : {\"type\" : \"string\" },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"value\" : {\"type\": \"number\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"min\" : {\"type\": \"number\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"max\" : {\"type\": \"number\"},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\"space\": {\"type\": \"string\"}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"required\": [\"name\",\"value\"],\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"additionalProperties\": false\n\u00a0\u00a0\u00a0 }\n}\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#important-notes","title":"Important notes","text":"<ul> <li>In case an invalid device/space name is given, or if the device/space names are valid, but the device is not configured for that space, this command returns false, and an error message</li> <li>If the value that wanted to be set is out of the [min, max] range of a device, this command returns false, and an error message</li> <li>This function checks the JSON validity, and the device name/value/space before setting any value, so in case of any error, the device values currently set on the server stay unchanged.</li> <li>The min/max values are not required in the set method, and if given, it sets nothing, because of its compatibility with the getter method, which uses the same JSON schema.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>First, you need to create a FemtoAPIAcquisition object as described  here (Tutorial: using the FemtoAPI Matlab client). After it, you need to give the input as a DeviceValues object:</p> <p>succeeded = femtoapiObj.setPMTAndLaserIntensityDevices(deviceValues) </p> <p>In case of success, it returns true, otherwise, a Matlab error type exception is thrown containing the error message. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#examples_1","title":"Examples","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-pmt-laserintensity-device-values/#c-code-example","title":"C++ code example","text":"<pre><code>QString command = \u201cFemtoAPIMicroscope.setPMTAndLaserIntensityDeviceValues('[{\"name\":\"PMT_UR\",\"value\":42.0},{\"name\":\"PMT_UG\",\"value\":110.0},{\"name\":\"rPockelsCell\",\"value\":10.0},{\"name\":\"dummyY\",\"value\":11.0,\"space\":\"space2\"}]')\u201d;\nauto cmdParser=client\u2192sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\ndeviceValues = struct();\ndeviceValues(1).name = 'PMT_UR';\ndeviceValues(1).value= 42; \ndeviceValues(2).name = 'PMT_UG';\ndeviceValues(2).value= 12.3;\n\n% and so on, set other device values in the struct array, and create a deviceValues object from it\ndeviceValuesObj = DeviceValues(deviceValues);\n% set device values on server\nfemtoapiObj.setPMTAndLaserIntensityDeviceValues(deviceValuesObj);\n\n\n% You can use DeviceValues object to easily get/set values of devices \ndevicevaluesObj = femtoapiObj.getPMTAndLaserIntensityDeviceValues()\n\n% get device names as cell array, to inspect available devices \ndeviceNames = deviceValuesObj.getDeviceNames(); \n\n% set device values by name -&gt; only sets locally \ndeviceValuesObj.setDeviceValueByName('PMT_UR',42);\ndeviceValuesObj.setDeviceValueByName('PMT_UG',23);\n\n% set device values on server \nfemtoapiObj.setPMTAndLaserIntensityDeviceValues(deviceValuesObj);\n\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.setPMTAndLaserIntensityDeviceValues('[{\"name\":\"PMT_UR\",\"value\":42.0},{\"name\":\"PMT_UG\",\"value\":110.0},{\"name\":\"rPockelsCell\",\"value\":10.0},{\"name\":\"dummyY\",\"value\":11.0,\"space\":\"space2\"}]');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"setPMTAndLaserIntensityDeviceValues(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-properties-for-measurement-items/","title":"Get-set properties for measurement items","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-properties-for-measurement-items/#femtoapifilegetunitmetadatanodedescriptor-jsonitemstr-subscribe","title":"FemtoAPIFile.getUnitMetadata(nodeDescriptor, jsonItemStr, subscribe = \"\")","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-properties-for-measurement-items/#femtoapifilesetunitmetadatanodedescriptor-jsonitemstr","title":"FemtoAPIFile.setUnitMetadata(nodeDescriptor, jsonItemStr)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-properties-for-measurement-items/#femtoapifilesetunitmetadatanodedescriptor-jsonitemstr-json","title":"FemtoAPIFile.setUnitMetadata(nodeDescriptor, jsonItemStr, json)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-properties-for-measurement-items/#femtoapifilegetdisplayedpropertiesnodedescriptor-bdetailed","title":"FemtoAPIFile.getDisplayedProperties(nodeDescriptor, bDetailed)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/","title":"Get-set ZStack PMT/laser intensity device depth profile","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#_1","title":"Get-set ZStack PMT/laser intensity device depth profile","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#var-outjson-femtoapimicroscopegetzstacklaserintensityprofilemeasurementtype-spacename","title":"var outJson = FemtoAPIMicroscope.getZStackLaserIntensityProfile(measurementType = '', spaceName = '')","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#or","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#femtoapimicroscopegetzstacklaserintensityprofilemeasurementtype-spacename","title":"FemtoAPIMicroscope.getZStackLaserIntensityProfile(measurementType = '', spaceName = '')","text":"<p>UNSAFE operation.</p> <p>This command is used to get the Z-stack depth correction profile (the interpolation reference points) of PMT/ laser intensity devices. Its output has the same JSON schema as the setZStackLaserIntensityProfile() command.</p> <p>Has two filtering input parameters, these are:</p> <ul> <li>measurementType: gets the Z-stack depth correction profile for all spaces, but only for the given measurement type (currently its value can be \u2018resonant\u2019 or \u2018galvo\u2019)</li> <li>spaceName: gets the Z-stack depth correction profile for all measurement types (resonant, galvo), but only for the given space</li> </ul> <p>Notes:</p> <ul> <li>if called with no parameters, or an empty string \u2018\u2019, no filtering will be applied, so the parameters are get for all available spaces and measurement types (resonant, galvo)</li> <li>if the given measurement type or space name is wrong, it returns an empty JSON, and an error message</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#usage-in-matlab","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscope object must be created. After it, the usage is the same as described above, only the input/output parameter types are a bit different: </p> <p>result = femtoapiObj.getZStackLaserIntensityProfile(measurementType, spaceName) </p> <p>where measurementType and spaceName must be char arrays, and the retuned value is the retuned json parsed into an array of (nested) Matlab structs. </p> <p>In case of any error, it gives the error message as a Matlab error type exception, otherwise it returns true.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#examples","title":"Examples","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#c-code-examples","title":"C++ code examples","text":"<pre><code>// 1. Getting z-stack depth profile for resonant and galvo measurements, and for all spaces available:\nQString command = \u201cFemtoAPIMicroscope.getZStackLaserIntensityProfile() \u201c; // ( or FemtoAPIMicroscope.getZStackLaserIntensityProfile(\u2018\u2019) or FemtoAPIMicroscope.getZStackLaserIntensityProfile(\u2018\u2019,\u2019\u2019) )\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n// 2. Getting z-stack parameters for galvo measurement:\nQString command = \u201cFemtoAPIMicroscope.getZStackLaserIntensityProfile(\u2018galvo\u2019) \u201c ;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n// 3. Getting z-stack depth profile for all measurements, but \u2018space1\u2019:\nQString command = \u201cFemtoAPIMicroscope.getZStackLaserIntensityProfile(\u2018\u2019,\u2019space1\u2019) \u201c;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n// 4. Getting z-stack depth profile for resonant measurement, and space2:\nQString command = \u201cFemtoAPIMicroscope.getZStackLaserIntensityProfile(\u2018resonant\u2019,\u2019space2\u2019) \u201c;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\nfemtoapiObj.getZStackLaserIntensityProfile('space1','galvo'); % gets z stack intensity profile for galvo measurement \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getZStackLaserIntensityProfile();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"getZStackLaserIntensityProfile(): %s\" % simpleCmdParser.getJSEngineResult())\n\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#_2","title":"Get-set ZStack PMT/laser intensity device depth profile","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#var-succeed-femtoapimicroscopesetzstacklaserintensityprofilejson","title":"var succeed = FemtoAPIMicroscope.setZStackLaserIntensityProfile(json)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#or_1","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#femtoapimicroscopesetzstacklaserintensityprofile-json","title":"FemtoAPIMicroscope.setZStackLaserIntensityProfile( json)","text":"<p>UNSAFE operation.</p> <p>Used to set the Z-stack intensity depth profile of PMT/ laser intensity devices, based on 2 or 3 z-levels and device values at these levels, as interpolation points.</p> <p>The input JSON is an array, that consists of JSON objects, which contain one or more JSON objects for the different measurement types and/or spaces. These JSON objects consist of the following values:</p> <ul> <li>space: string, optional, the space which is used, if omitted, the default space is used.</li> <li>measurementType: string, which is the type of Z-stack measurement to apply the depth correction to, currently it can be \u201cresonant\u201d or \u201cgalvo\u201d.</li> <li>firstZ: a double value of the first Z relative position in a Z-stack measurement, the first reference Z interpolation point.</li> <li>intermediateZ: optional, an intermediate Z relative position, used as an interpolation reference point. If given, its value must be between \u2018firstZ\u2019 and \u2018lastZ\u2019.</li> <li>lastZ: double value of the last Z relative position in \u00b5m, until the Z-stack measurement is performed. The last reference Z interpolation point.</li> <li>zStep: double value of the Z step in a Z-stack measurement. It assigns the Z-planes to interpolate device values, based on \u2018DepthCorrection\u2019</li> <li>DepthCorrection: a JSON object that consists of a JSON array, which contains JSON object items with intensity values of PMT/laser intensity devices at given Z-planes (which is defined by the \u2018firstZ\u2019, \u2018intermediateZ\u2019 and \u2018lastZ\u2019 parameters). These device values assign the reference values for interpolation.</li> </ul> <p>The input JSON is validated against the following schema:</p> <pre><code>{\n\u00a0\u00a0\u00a0 \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n\u00a0\u00a0\u00a0 \"title\": \"Z-stack depth correction schema\",\n\u00a0\u00a0\u00a0 \"description\": \"Json array that contains the Z-Stack depth correction laser intensity values for all spaces and measurement types (galvo, resonant)\",\n\u00a0\u00a0\u00a0 \"type\": \"array\",\n\u00a0\u00a0\u00a0 \"minItems\": 1,\n\u00a0\u00a0\u00a0 \"items\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"Json object that contains the Z-Stack depth correction laser intensity values for a specific space and measurement type (galvo or resonant)\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\": \"object\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"properties\" :{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"space\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"Name of the space\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\": \"string\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"measurementType\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\": \"string\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"enum\":[\"resonant\",\"galvo\"],\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"Type of measurement, its value can only be 'resonant' or 'galvo'.\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"firstZ\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"first Z relative coordinate (to labeling origin)\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"number\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"intermediateZ\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"intermediate Z relative coordinate (to labeling origin)\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"number\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"lastZ\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"last Z relative coordinate (to labeling origin)\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"number\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"zStep\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\" : \"z step in um\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"number\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"DepthCorrection\" : {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\": \"z-stack laser intensities for the specified devices at z positions firstZ, (optionally intermediateZ), lastZ\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\":\"array\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"items\" :\u00a0 {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"object\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"properties\" : {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"name\" : {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"description\" : \"name of the PMT/Pockels device\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"string\"\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0},\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"values\" : {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\" : \"array\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"items\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"type\": \"number\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"minimum\" : 0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"minItems\" : 2,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"maxItems\" : 3\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"required\":[\"name\",\"values\"],\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"additionalProperties\": false\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }\n\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"required\": [ \"measurementType\",\"firstZ\",\"lastZ\",\"zStep\",\"DepthCorrection\" ],\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"additionalProperties\": false\n\u00a0\u00a0\u00a0 }\n} \n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#important-notes-and-restrictions-on-parameters","title":"Important notes and restrictions on parameters","text":"<p>There are some restrictions on Z-stack parameters:</p> <ul> <li>the minimum value of the \u2018zStep\u2019 parameter is currently 0.1 \u00b5m</li> <li>if firstZ = intermediateZ = lastZ results in an error</li> <li>otherwise, if intermediateZ = firstZ or intermediateZ =lastZ, the difference between lastZ and firstZ must be greater than or equal to the minimum Z step value</li> <li>In case 3 Z reference points are given (firstZ &lt; intermediateZ &lt; lastZ), the difference between reference points must be greater than or equal to the minimum Z step value</li> </ul> <p>Device values:</p> <ul> <li>all device intensity values must be positive double numbers</li> <li>in a \u201cDepthCorrection\u201d object, each \u201cvalues\u201d field must contain the same number of elements as the number of Z reference values</li> <li>in a \u2018DepthCorrection\u2019 JSON object, if the \u201cvalues\u201d parameter for a given device is below/above its lower/upper limit, it will be clamped to the given device\u2019s lower/upper limit accordingly</li> <li>the lower/upper limits of devices can be get by the command FemtoAPIMicroscope.getPMTAndLaserIntensityDeviceValues()</li> </ul> <p>Interpolation of reference points:</p> <ul> <li>in case of 2 reference points, the device values are interpolated linearly</li> <li>in case of 3 reference points, the pchip interpolation method is used</li> <li>if abs(lastZ \u2013 firstZ) / zStep is not an integer, the last Z plane position can be beyond the lastZ value, for example, If firstZ = 0.0, lastZ = 2.0, zStep = 0.6, the device values are interpolated at 5 Z-planes: 0.0, 0.6, 1.2, 1.8, 2.4</li> </ul> <p>If any of the above conditions are not met, or a device with an invalid name is present, or a JSON is given that does not meet the conditions of the given JSON schema, an error message is returned, and nothing is set on the server.</p> <p>The \u2018measurementType\u2019 and \u2018space\u2019 pairs are unique, so if the outer JSON array contains more than one object with the same measurement type and space, an error message is returned, and no parameter is set.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscope object must be created. After it, the usage is the same as described above, only the input/output parameter types are a bit different: </p> <p>succeeded = femtoapiObj.setZStackLaserIntensityProfile(jsonAsStruct) </p> <p>where the input parameter json is parsed into an array of (nested) Matlab structs.</p> <p>In case of any error, it gives the error message as a Matlab error type exception, otherwise it returns true.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#examples_1","title":"Examples","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/get-set-zstack-pmt-laser-intensity-device-depth-profile/#c-code-examples_1","title":"C++ code examples:","text":"<pre><code>// 1. Setting parameters for galvo measurement, with 3 reference points, on default space:\nQString command = \u201cFemtoAPIMicroscope.setZStackLaserIntensityProfile('[{\"measurementType\":\"galvo\",\"firstZ\":10.0,\"intermediateZ\": 13.0,\"lastZ\": 13.0,\"zStep\":0.5, \"DepthCorrection\":[{\"name\":\"PMT_UG\",\"values\":[0,2,5]},{\"name\":\"ResonantPockelsCell\",\"values\":[0,50,60]}]}]') \u201c;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n// This command creates 11 z planes, from firstZ = 10.0 to lastZ = 13.0, with zStep = 0.5. \n\n// 2. Setting parameters for resonant and galvo measurement in one command, for space1, with 3 reference values:\nQString command = \u201cFemtoAPIMicroscope.setZStackLaserIntensityProfile('[{\"measurementType\":\"galvo\",\"firstZ\":10.0,\"intermediateZ\": 12.0,\"lastZ\": 13.0,\"zStep\":0.9, \"DepthCorrection\":[{\"name\":\"PMT_UG\",\"values\":[0,2,5]},{\"name\":\"PMT_UR\",\"values\":[2,3,5]}]}, {\"measurementType\":\"resonant\",\"firstZ\":2.0,\"intermediateZ\": 5.0,\"lastZ\": 7.0,\"zStep\":0.5, \"DepthCorrection\":[{\"name\":\"PMT_UG\",\"values\":[0,2,5]},{\"name\":\"PMT_UR\",\"values\":[0,50,60]}]}]') \u201c;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\n\nzStackParameters.space = 'space1';\nzStackParameters.measurementType = 'galvo';\nzStackParameters.firstZ = 0.0;\nzStackParameters.zStep = 10.0;\nzStackParameters.zPlanes = 2;\n\ndeviceNames = {'PMT_UG','PMT_UR','PMT_GALVO','ResonantPockelsCell','Apt1'};\ndeviceValues = {[0.4;2.5],[3.5;1.6],[4.1;3.5],[2.3;10],[3.1;14.1]}; % sets 2 reference values for devices\ndepthCorrStruct = repmat(struct('name',[],'values',[]),length(deviceNames),1);\n\nfor i=1:length(deviceNames)\n    depthCorrStruct(i).name = deviceNames{i};\n    depthCorrStruct(i).values = deviceValues{i};\nend\n\nzStackParameters.DepthCorrection = depthCorrStruct;\nfemtoapiObj.setZStackLaserIntensityProfile(zStackParameters)\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.setZStackLaserIntensityProfile('[{\"measurementType\":\"galvo\",\"firstZ\":10.0,\"intermediateZ\": 13.0,\"lastZ\": 13.0,\"zStep\":0.5, \"DepthCorrection\":[{\"name\":\"PMT_UG\",\"values\":[0,2,5]},{\"name\":\"ResonantPockelsCell\",\"values\":[0,50,60]}]}]');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"setZStackLaserIntensityProfile(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/","title":"Handling measurement files","text":"<p>In its current release, the FemtoAPI supports the following operations on measurement files:</p> <ul> <li>createNewFile: Open a new, unnamed measurement file and set it as the destination for subsequent measurements</li> <li>setCurrentSession: Change to which open file the subsequent measurements will be saved into</li> <li>saveFileAsync: Save an open measurement file under its current name (if it already has one)</li> <li>saveFileAsAsync: Save an open measurement file under a new name</li> <li>closeFileNoSaveAsync: Close an open measurement file without saving</li> <li>closeFileAndSaveAsync: Save an open measurement file under its current name (if it already has one), then close it</li> <li>closeFileAndSaveAsAsync: Save an open measurement file under a new name, then close it</li> <li>openFilesAsync: Opens one or more existing measurement files</li> </ul> <p>These operations should suffice for saving your freshly acquired measurement data to measurement files. </p> <p>All these commands here (except setCurrentSession() ) return a json object, with the following fields in common: </p> <ul> <li>succeeded: bool value, itrue means that the file operation was initiated successfully and started in the background </li> <li>id: unique id of the command in string, or \"0\", if the background file operation hasn't started, because there was an error during the initiation of it (succeeded = false in this case), or because there is no need to start the background process (succeeded = true in this case). For example, saving a file which hasn't been modified since last save results in this case.</li> </ul> <p>In later sections, these common fields in the returned json will not be described again, but referenced as 'succeeded' and 'id'. Only the additional fields will be described. </p> <p>It is important to note that most of these measurement file operations run asynchronously, which means the following:</p> <ul> <li>When you call any of these operations, the FemtoAPI server checks whether all conditions of successfully starting the operation are met. If not, the FemtoAPI server returns a descriptive error message and does not start the file operation. Otherwise, the FemtoAPI server reports success and starts the file operation in the background.</li> </ul> <p>You can check the status of the started file operation the following way:</p> <ul> <li>in the returned json, the value of 'id' can be used as input parameter to FemtoAPIFile.getStatus(commandID) command, which returns whether the started background operation is still running or has ended, and if it has ended, whether there was an error or not. If you want to know if there is a pending operation on the currently opened files, you can run FemtoAPIFile.getStatus() without parameters. Details of these commands are described  here (Tools). </li> </ul> <p>Note on error messages: if you run any of these commands, and it fails, the error message will not show up on the MESc GUI in message box that requires user interaction. Instead of it, a status message will appear on the MESc GUI with the error message that vanishes within few seconds.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#differences-in-matlab","title":"Differences in Matlab","text":"<ul> <li>in Matlab client, the function syntaxes are almost the same, the only difference is, that the input parameter handle is a number (in case of file), or an array (in case of session) instead of a string, and the return value is the json got from server parsed as Matlab struct</li> <li>you have to instantiate FemtoAPIProcessing class (as described  here (Tutorial: using the FemtoAPI Matlab client)) to call these functions. It will be denoted as 'femtoapiObj' in the following sections</li> <li>in case of any error, you instanty get it as Matlab error type exception.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifilecreatenewfile","title":"var result= FemtoAPIFile.createNewFile()","text":"<p>Creates a new, unnamed file, and sets it as the current file (i.e., the file where new measurements are placed). As this file has no name yet, you cannot permanently save it with saveFileAsync or closeFileAndSaveAsync. To do so, you need to give it a name and a destination folder with saveFileAsAsync or closeFileAndSaveAsAsync.</p> <p>Return value: json object, with 'succeeded' = true and a valid 'id' if the new file was successfully created, otherwise 'succeeded' = false and id = 0.</p> <p>The new file cannot be created if</p> <ul> <li>the Windows TEMP drive is full,</li> <li>the Windows TEMP folder is not writable, or</li> <li>the number of files opened in MESc has reached its upper limit (currently: 400).</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab","title":"Usage in Matlab","text":"<p>result = mescapObj.createNewFile(); </p> <p>The returned value 'result' is the json get from server parsed in Matlab struct. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cvar isCreated = FemtoAPIFile.createNewFile()\u201d; \nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing(); % local connection\nfemtoapiObj.createNewFile(); \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.createNewFile();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"createNewFile(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre> <p>Note: if the asynchronous portion of this call fails (e.g., the Windows TEMP drive is full or not writable), this call returns true and you can get error information by calling the getStatus(id) command with the appropriate command ID, and will not show up an error message in the MESc GUI. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-setascurrent-femtoapifilesetcurrentsessionhandle","title":"var setAsCurrent = FemtoAPIFile.setCurrentSession(handle)","text":"<p>Sets the given file as the current file, which selects the last measurement session of the given file as the place to which subsequent measurements will be saved. You can also directly specify the last measurement session within an open file if you wish to do so.</p> <p>Note that MESc guarantees that exactly one file is always selected as current. If, e.g., the last open file is closed, MESc creates a new measurement file and sets it as current. MESc also guarantees that all open measurement files contain at least one measurement session. Therefore, exactly one current measurement session is selected as current one during the whole runtime of MESc.</p> <p>Input parameter:</p> <p>handle: the unique descriptor string of an opened .mesc file or the last measurement session in an opened .mesc file. For example, '52,1' means the .mesc file with ID 52 and its last measurement session with ID 1, and it is valid if no session ID greater than 1 exists within this file . You can visually check these handles to the left of each item (file, measurement session, measurement) in the Processing mode of the MESc GUI.</p> <p>Return value: true if the file has been successfully set as current, otherwise false. Possible reasons for failure:</p> <ul> <li>The input parameter is syntactically incorrect. It must represent a measurement file handle or a measurement session handle in the form 'fileIndex' or 'fileIndex,measurementSessionIndex'. Examples: '43', '65,0'.</li> <li>The given file or measurement session handle is syntactically adequate, but it does not represent an open file, or the last measurement session of an open file.</li> <li>The given file or the file of the given measurement session is being closed and, therefore, it is not accessible anymore.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>succeeded = femtoapiObj.setCurrentSession(handle)</p> <p>Input argument:</p> <p>handle: the above described file or measurement session unique descriptor string as numeric value (file handle, e.g. 47) or Matlab array (session handle, e.g. [45 0])</p> <p>Return value: bool, the same as described above </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_1","title":"Examples","text":"<p>C++ code example:</p> <pre><code>// set the file with index 52 as current, provided its last measurement session\n// index 0\n\nQString command = \u201cvar setAsCurrent = FemtoAPIFile.setCurrentSession('52,0')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// set the file with index 40 as current\n\nQString command = \u201cvar setAsCurrent = FemtoAPIFile.setCurrentSession('40')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing(); % local connection\nfemtoapiObj.setCurrentSession ([52,0]); \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.setCurrentSession('52');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"setCurrentSession(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifilesavefileasync-filehandle","title":"var result= FemtoAPIFile.saveFileAsync( fileHandle = '')","text":"<p>Saves the given measurement file, or the current measurement file if called without parameter or with an empty handle.</p> <p>Input parameter: </p> <p>fileHandle: the unique index of an open .mesc file converted to a string. For instance, handle '52' means the file with index 52. (File indices are displayed in the Processing mode of the MESc GUI, too.) If called with no file handle or an empty string, the current file will be saved.</p> <p>It returns the json object described . </p> <p>In the returned json: </p> <ul> <li>'succeeded' = true and valid 'id' : if the saving of the file was successfully initiated (in this case, the asynchronous portion of the call has been started successfully)</li> <li>'succeeded' = true and 'id' = 0 : if the file hasn't been modified since last save, so saving the file hasn't started</li> <li>'succeeded' = false and 'id' = 0 : failed to save file </li> </ul> <p>Possible reasons for failure:</p> <ul> <li>The given handle is syntactically incorrect, or there is no opened file in MESc with the given handle.</li> <li>The given file is being closed and, therefore, it is not accessible for saving anymore.</li> <li>The given file is new and does not yet have a name or it is open as read-only. Please use saveFileAsAsync in these cases instead.</li> <li>A previous save operation is in progress in the given file.</li> </ul> <p>If the operation has been initiated successfully, then you can use the returned 'id' to obtain whether this operation is in progress or not, and if it has ended then get an error information. See  getStatus (Tools) command for details.</p> <p>Note: if the asynchronous portion of this call fails (e.g., the target drive gets full), you get error information in the MESc GUI too, as status message which vanishes within few seconds. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_2","title":"Usage in Matlab","text":"<p>In Matlab, if the current file wanted to be saved, then no parameter is given:</p> <p>result = femtoapiObj.saveFileAsync(); </p> <p>Otherwise, give the handle of the file, as a number (positive integer) :</p> <p>result = femtoapiObj.saveFileAsync(fileHandle) </p> <p>The returned value 'result' is the json described above parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_2","title":"Examples","text":"<p>C++ code examples:</p> <pre><code>// save the current file if no input parameter is given, or an empty string\nQString command = \u201cvar success = FemtoAPIFile.saveFileAsync()\u201d; // or FemtoAPIFile.saveFileAsync('');\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// save the file with index 43:\nQString command = \u201cvar success = FemtoAPIFile.saveFileAsync('43')\u201d;\nauto cmdParser=client\u2192sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing();\n\n// save the current file if no input parameter is given, or an empty string\nfemtoapiObj.saveFileAsync();\n\n// save the file with index 43:\nfemtoapiObj.saveFileAsync ([43])\u201d;\n\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.saveFileAsync();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"saveFileAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifilesavefileasasyncnewabsoluteunicodepath-filehandle-overwriteexistingfile-false","title":"var result= FemtoAPIFile.saveFileAsAsync(newAbsoluteUnicodePath, fileHandle = '', overWriteExistingFile = false)","text":"<p>Saves the given measurement file, or the current measurement file, if called with an empty handle, to the given absolute path. You can also specify whether an existing file may be overwritten.</p> <p>If the given absolute path equals the current path of the given file, the command works exactly as saveFileAsync and the overwrite flag argument is ignored.</p> <p>Input parameters:</p> <ul> <li>newAbsoluteUnicodePath: The new absolute path as a Unicode string.</li> <li>fileHandle: The unique index of an open .mesc file converted to a string, e.g., '55'. If no file handle is given, MESc takes the current file.</li> <li>overWriteExistingFile: A Boolean flag denoting whether a preexisting file on newAbsoluteUnicodePath may be overwritten. If newAbsoluteFilePath equals the current path of the given file, this parameter is ignored.</li> </ul> <p>It returns the json object described . </p> <p>In the returned json: </p> <ul> <li>'succeeded' = true and valid 'id' : if the saving of the file was successfully initiated (in this case, the asynchronous portion of the call has been started successfully)</li> <li>'succeeded' = true and 'id' = 0 : newAbsoluteUnicodePath is the same as the path of the file given with its handle, and it hasn't been modified since last save, so saving the file hasn't started</li> <li>'succeeded' = false and 'id' = 0 : failed to save file </li> </ul> <p>Possible reasons for failure:</p> <ul> <li>The given handle is syntactically incorrect, or there is no open file in MESc with the given handle.</li> <li>The given file is being closed and, therefore, not accessible for saving.</li> <li>A previous save operation is in progress in the given file.</li> <li>The given path equals to the current path of the file, and the file is open as read-only, or it is new without a valid path. In this case, you should save the file under a different path.</li> <li>The given path differs from the current path of the file, but there is already a file there, and the overwrite flag was set to false.</li> <li>The given path differs from the current path of the file, there is a file on the given path, and the overwrite flag was set to true, but MESc could not delete the preexisting file.</li> <li>Could not create a read-write accessible file on the given path (the folder component of the given path does not exist, or it is not writable).</li> </ul> <p>If the operation has been initiated successfully, then you can use the returned 'id' to obtain whether this operation is in progress or not, and if it has ended then get an error information. See  getStatus (Tools) command for details.</p> <p>Note: if the asynchronous portion of this call fails (e.g., the target drive gets full), you get error information in the MESc GUI too, as status message which vanishes within few seconds. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_3","title":"Usage in Matlab","text":"<p>In Matlab, the usage is the same, there are only some minor differences regarding types of input parameters and returned value:</p> <p>result = femtoapiObj.saveFileAsAsync(newAbsoluteUnicodePath, fileHandle, overWriteExistingFile)</p> <p>Input parameter (required): </p> <ul> <li>newAbsoluteUnicodePath: character array</li> </ul> <p>Input parameters (optional):</p> <ul> <li>fileHandle: (positive integer) number </li> <li>overWriteExistingFile: bool</li> </ul> <p>Returns the json described above parsed into a Matlab struct. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_3","title":"Examples","text":"<p>C++ code usage and examples:</p> <pre><code>// save the current file on the given absolute path, do not overwrite existing file\n\nQString command = \u201cvar result= FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command)\n\n\n\n// save the file with index 53 on the given absolute path, do not overwrite an existing file\n\nQString command = \u201cvar result= FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc','53')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command)\n\n\n// save the file with index 53 on the given absolute path, overwrite existing file\n\nQString command = \u201cvar result= FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc','52', true)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command)\n\n\n\n// save the current file on the given absolute path, overwrite existing file\n\nQString command = \u201cvar result= FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc','', true)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command)\n\n\n\n// save the current file on the given absolute path, do not overwrite existing file\n\nQString command = \u201cvar result= FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc','', false)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command)\n\n\n\n// or, equivalently, you can simply write this as\n\nQString command = \u201cvar result= FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command)\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing();\n\n% save current file to the specified absolute path. If file exists there, then it will not be overwritten, no save occurs and an error is returned\nfemtoapiObj.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc');\n\n% Save file with handle 52 to the specified path. If file exists there, then it will not be overwritten, no save occurs and an error is returned. \nfemtoapiObj.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc',52, true);\n\n% save file with handle 52 to the specified path, if file exists, then overwrites it\nfemtoapiObj.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc',52, true);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.saveFileAsAsync('C:/Users/user/Documents/Measurements/example.mesc','52', true);\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"saveFileAsAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifileclosefilenosaveasyncfilehandle","title":"var result = FemtoAPIFile.closeFileNoSaveAsync(fileHandle = '')","text":"<p>Closes the given file without saving. With no or an empty input parameter, the current file is closed.</p> <p>Input parameter:</p> <ul> <li>fileHandle: The unique index of an open .mesc file converted to a string. For instance, handle '52' means the file with index 52. (File indices are displayed in the Processing mode of the MESc GUI, too.) If called with no file handle or an empty string, the current file will be closed.</li> </ul> <p>It returns the json object described . </p> <p>In the returned json: </p> <ul> <li>'succeeded' = true and valid 'id' : if the closing of the file was successfully initiated (in this case, the asynchronous portion of the call has been started successfully)</li> <li>'succeeded' = false and 'id' = 0 : otherwise</li> </ul> <p>Possible reasons for failure:</p> <ul> <li>The given handle is syntactically incorrect, or there is no open file in MESc with the given handle.</li> <li>A file operation is pending in the file: it is being closed or saved asynchronously.</li> </ul> <p>If the operation has been initiated successfully, then you can use the returned 'id' to obtain whether this operation is in progress or not, and if it has ended then get an error information. See  getStatus (Tools) command for details.</p> <p>Note1: if the asynchronous portion of this call fails, you get error information in the MESc GUI too, as status message which vanishes within few seconds. </p> <p>Note2: MESc guarantees that exactly one file and its last measurement session is always selected as current. This means that if the current file is closed, MESc automatically selects another open file as current. If the last open file is closed, MESc creates a new measurement file and sets it as current.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_4","title":"Usage in Matlab","text":"<p>In Matlab, if the current file wanted to be closed without save, then no parameter is given:</p> <p>result = femtoapiObj.closeFileNoSaveAsync(); </p> <p>Otherwise, give the handle of the file as input, as a number (positive integer) :</p> <p>result = femtoapiObj.closeFileNoSaveAsync(fileHandle) </p> <p>The returned value 'result' is the json described above parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_4","title":"Examples","text":"<p>C++ code usage and examples:</p> <pre><code>// close the current file without saving\n\nQString command = \u201cvar result= FemtoAPIFile.closeFileNoSaveAsync()\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// close the file with index 65 without saving it\n\nQString command = \u201cvar result= FemtoAPIFile.closeFileNoSaveAsync('65')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing();\nfemtoapiObj.closeFileNoSaveAsync ([65]);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.closeFileNoSaveAsync('65');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"closeFileNoSaveAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifileclosefileandsaveasyncfilehandle-compressfileifpossible-false","title":"var result= FemtoAPIFile.closeFileAndSaveAsync(fileHandle = '', compressFileIfPossible = false)","text":"<p>Saves the given file, then closes it. Optionally, compresses the file during saving.</p> <p>Input parameters:</p> <ul> <li>fileHandle: The unique index of an open .mesc file converted to a string, e.g., '55'. If no file handle or empty string is given, MESc takes the current file.</li> <li>compressFileIfPossible: A Boolean flag denoting whether the file should be compressed if possible.</li> </ul> <p>It returns the json object described . </p> <p>In the returned json: </p> <ul> <li>'succeeded' = true and valid 'id' : if the combined operation of saving and closing the file was successfully initiated (in this case, the asynchronous portion of the call has been started successfully)</li> <li>'succeeded' = false and 'id' = 0 : otherwise</li> </ul> <p>Possible reasons for failure:</p> <ul> <li>The given handle is syntactically incorrect, or there is no opened file in MESc with the given handle.</li> <li>A file operation is pending in the file: it is being closed or saved asynchronously.</li> <li>The given file is new and does not yet have a name or it is open as read-only. Please use closeFileAndSaveAsAsync in these cases instead.</li> </ul> <p>If the operation has been initiated successfully, then you can use the returned 'id' to obtain whether this operation is in progress or not, and if it has ended then get an error information. See  getStatus (Tools) command for details.</p> <p>Note1: if the asynchronous portion of this call fails, you get error information in the MESc GUI too, as status message which vanishes within few seconds. </p> <p>Note2: file compression means that the contents of the temporary file are copied to the given path, and the empty holes left behind by deleted objects are not. Since saving with compression is often slower than saving without compression (the latter being simple file copying), compression is never performed if nothing has been deleted from the measurement file, even if you set the compressFileIfPossible flag to true.</p> <p>Note3: MESc guarantees that exactly one file and its last measurement session is always selected as current. This means that if the current file is closed, MESc automatically selects another open file as current. If the last open file is closed, MESc creates a new measurement file and sets it as current.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_5","title":"Usage in Matlab","text":"<p>The usage in Matlab is the same as described above, except the types of input parameters and returned value are a bit different: </p> <p>result = femtoapiObj.closeFileAndSaveAsync(fileHandle, compressFileIfPossible);</p> <p>Input parameters (optional): </p> <ul> <li>fileHandle must be a (positive integer) number </li> <li>compressFileIfPossible is boolean value </li> </ul> <p>The returned value 'result' is the json described above parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_5","title":"Examples","text":"<p>C++ code usage and examples:</p> <pre><code>// close the current file and save it without trying to compress it\nQString command = \u201cvar result= FemtoAPIFile.closeFileAndSaveAsync()\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// close the file with index 65 and save it without trying to compress it\nQString command = \u201cvar result= FemtoAPIFile.closeFileAndSaveAsync('65')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// or, equivalently\nQString command = \u201cvar result= FemtoAPIFile.closeFileAndSaveAsync('65',false)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// close the file with index 65 and save it, possibly with compression\nQString command = \u201cvar result= FemtoAPIFile.closeFileAndSaveAsync('65', true)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing();\nfemtoapiObj.closeFileAndSaveAsync ([65], true); % close the file with index 65 and save it, possibly with compression\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.closeFileAndSaveAsync('65', true);\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"closeFileAndSaveAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifileclosefileandsaveasasyncnewabsolutefilepath-filehandle-overwriteexistingfile-false-compressfileifpossible-false","title":"var result = FemtoAPIFile.closeFileAndSaveAsAsync(newAbsoluteFilePath, fileHandle = '', overWriteExistingFile = false, compressFileIfPossible = false)","text":"<p>Saves the given file under a new name, then closes it. Optionally, compresses the file during saving. You can also specify whether an existing file may be overwritten.</p> <p>If the given absolute path equals the current path of the given file, the command works exactly as closeFileAndSaveAsync and the given overwrite flag is ignored.</p> <p>Input parameters:</p> <ul> <li>newAbsoluteUnicodePath: The new absolute path as a Unicode string.</li> <li>fileHandle: The unique index of an open .mesc file converted to a string, e.g., '55'. If no file handle is given, MESc takes the current file.</li> <li>overWriteExistingFile: A Boolean flag denoting whether a preexisting file on newAbsoluteUnicodePath may be overwritten. If newAbsoluteFilePath equals the current path of the given file, this parameter is ignored.</li> <li>compressFileIfPossible: A Boolean flag denoting whether the file should be compressed if possible.</li> </ul> <p>It returns the json object described . </p> <p>In the returned json: </p> <ul> <li>'succeeded' = true and valid 'id' : if the combined operation of saving and closing the file was successfully initiated (in this case, the asynchronous portion of the call has been started successfully)</li> <li>'succeeded' = false and 'id' = 0 : otherwise</li> </ul> <p>Possible reasons for failure:</p> <ul> <li>The given handle is syntactically incorrect, or there is no open file in MESc with the given handle.</li> <li>A file operation is pending in the file: it is being closed or saved asynchronously.</li> <li>The given path equals to the current path of the file, and the file is open as read-only, or it is new without a valid path. In this case, you should save the file under a different path.</li> <li>The given path differs from the current path of the file, but there is a file there already, and the overwrite flag was set to false.</li> <li>The given path differs from the current path of the file, there is a file on the given path, and the overwrite flag was set to true, but MESc could not delete the preexisting file.</li> <li>Could not create a read-write accessible file on the given path (the folder does not exist, or it is not writable).</li> </ul> <p>If the operation has been initiated successfully, then you can use the returned 'id' to obtain whether this operation is in progress or not, and if it has ended then get an error information. See  getStatus (Tools) command for details.</p> <p>Note1: if the asynchronous portion of this call fails(e.g., the target drive gets full), you get error information in the MESc GUI too, as status message which vanishes within few seconds. </p> <p>Note2: file compression means that the contents of the temporary file are copied to the given path, and the empty holes left behind by deleted objects are not. Since saving with compression is often slower than saving without compression (the latter being simple file copying), compression is never performed if nothing has been deleted from the measurement file, even if you set the compressFileIfPossible flag to true.</p> <p>Note3: MESc guarantees that exactly one file and its last measurement session is always selected as current. This means that if the current file is closed, MESc automatically selects another open file as current. If the last open file is closed, MESc creates a new measurement file and sets it as current.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_6","title":"Usage in Matlab","text":"<p>The usage in Matlab is the same as described above, except the types of input parameters and returned value are a bit different: </p> <p>result = femtoapiObj.closeFileAndSaveAsAsync(newAbsoluteFilePath, fileHandle, overWriteExistingFiles, compressFileIfPossible);</p> <p>Input parameters (required):</p> <ul> <li>newAbsoluteFilePath: char array</li> </ul> <p>Input parameters (optional): </p> <ul> <li>fileHandle must be a (positive integer) number </li> <li>overWriteExistingFiles is a boolen value </li> <li>compressFileIfPossible is a boolean value </li> </ul> <p>The returned value 'result' is the json described above parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_6","title":"Examples","text":"<p>C++ code usage and examples:</p> <pre><code>// close the current file and save it under a new name without compression\nQString command = \u201cvar success = FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// close the file with index 65 and save it to the given path without compression, and fail if there is already a file on the given path\nQString command = \u201cvar success = FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc','65', false)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// the above can also be written without specifying the third parameter as\nQString command = \u201cvar success = FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc','65')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// close the current file and save it to the given path with compression, and overwrite the file on the given path if it exists\nQString command = \u201cvar success = FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc','', true, true)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n\n// close the file with index 65 and save it with compression, and overwrite the file on the given path if it exists\nQString command = \u201cvar success = FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc','65', true, true)\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing();\n\n% close the file with index 65 and save it with compression, and overwrite the file on the given path if it exists\nfemtoapiObj.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc',[65], true, true); \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc','65', true, true);\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"closeFileAndSaveAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#_1","title":"Handling measurement files","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#var-result-femtoapifileopenfilesasyncfilepaths","title":"var result = FemtoAPIFile.openFilesAsync(filePaths)","text":"<p>Opens one or more file(s) asynchronously. </p> <p>Input parameter: </p> <ul> <li>filePaths: one or more full file path(s) in one unicode string(s), separated with semicolon within the string</li> </ul> <p>It returns the json object described . </p> <p>In the returned json: </p> <ul> <li>'succeeded' = true and valid 'id' : if opening the file(s) was successfully initiated (in this case, the asynchronous portion of the call has been started successfully)</li> <li>'succeeded' = false and 'id' = 0 : otherwise</li> </ul> <p>Possible reasons for failure: </p> <ul> <li>at least one given file path is invalid: it does not exists or is a dangling symbolic link/shourtcut</li> <li>the number of files opened in MESc has reached its upper limit (currently: 400)</li> </ul> <p>If the operation has been initiated successfully, then you can use the returned 'id' to obtain whether this operation is in progress or not, and if it has ended then get an error information. See  getStatus (Tools) command for details.</p> <p>Note1: If file opening is initiated from the MESc GUI and from the FemtoAPI at the same time, it does not generates an error, even if there are common files to open. The union of the two file list will be opened. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#usage-in-matlab_7","title":"Usage in Matlab","text":"<p>Usage is the same, but 'filePaths' is a character array</p> <p>result = femtoapiObj.openFilesAsync(filePaths)</p> <p>Input parameter (required): </p> <p>filePaths: character array, file paths are separated with semicolon</p> <p>The returned value 'result' is the json described above parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/handling-measurement-files/#examples_7","title":"Examples","text":"<p>C++ code usage and examples:</p> <pre><code>// open one file\nQString command = \u201cvar result= FemtoAPIFile.openFilesAsync('C:/Users/user/Documents/Measurements/example.mesc')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n\n// open two files\nQString command = \u201cvar result= FemtoAPIFile.openFilesAsync('C:/Users/user/Documents/Measurements/example.mesc;C:/Users/user/Documents/Measurements/example.mesc')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing();\n\n% open one file \nfemtoapiObj.openFilesAsync('C:/Users/user/Documents/Measurements/example.mesc'); \n\n% open two files\nfemtoapiObj.openFilesAsync('C:/Users/user/Documents/Measurements/example.mesc;C:/Users/user/Documents/Measurements/example2.mesc');\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.closeFileAndSaveAsAsync('C:/Users/user/Documents/Measurements/example.mesc');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"closeFileAndSaveAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/image-export/","title":"Image Export","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/image-export/#var-result-femtoapifilecreatetmptiffidentifier-nodedescriptor-applylut-channels-compress-breakview-exportrawdata-starttimeslice-endtimeslice","title":"var result= FemtoAPIFile.createTmpTiff('identifier', nodeDescriptor, applyLUT[, channels, compress, breakView, exportRawData, startTimeSlice, endTimeSlice]);","text":"<p>Creates an .ome.tiff file synchonized way, with the following options:</p> <ul> <li> <p>identifier is the unique identifier for the tiff creation in MESc. It can be any string.</p> </li> <li> <p>nodeDescriptor: unique index of a measurement unit, converted to a string, e.g. '43,0,0' </p> </li> <li> <p>applyLUT: boolean, </p> </li> <li> <p>channels: optional list of channel indices, separated by space converted to a string, eg '0,1'</p> </li> <li> <p>compress: optional boolean, loslessy compression</p> </li> <li> <p>breakView: optional boolean, rearrange image to the break view view</p> </li> <li> <p>exportRawData: optional boolean, export only raw data. This can be only true if applyLUT is false.</p> </li> <li> <p>startTimeSlice - endTimeSlice: the exportable frames interval.    It has different meaning depends on the method.</p> </li> <li> <p>It means volume at:</p> <ul> <li>multiROIMultiCube</li> <li>muliROISnake</li> <li>volumeScan</li> </ul> </li> <li> <p>It means frame at:</p> <ul> <li>multiROIChessBoard</li> <li>multiROILongitudinalRibbonScan</li> <li>multiROITransverseRibbonScan</li> <li>zStack</li> </ul> </li> <li> <p>It means line at:</p> <ul> <li>multiROIPointScan</li> <li>multiROILineScan</li> <li>multiROIMultiLine</li> </ul> </li> </ul> <p>The command sends the exported file metadata as a binary file.</p> <p>Returns a Json formatted string, which contains an object with the following keys:</p> <ul> <li><code>succeeded</code> : boolean, the export succeeded, the file stored in a temporary directory on the MESc machine</li> <li><code>id</code>: the input identifier</li> <li><code>tmp</code>: if succeeded was true, this key exists. This is the full path of the saved file.</li> <li><code>failExc</code>: exception message, which is same as send through <code>setLastCommandError</code> too</li> </ul> <p>This call must followed by a getTmpTiff call with the same identifier argument if <code>succeeded</code> == true </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/image-export/#var-result-gettmptiffidentifier","title":"var result = getTmpTiff('identifier')","text":"<p>This call must preceeded by a createTmpTiff call with the same identifier argument.</p> <ul> <li>The identifier arg must be the same as the preceeded createTmpTiff call argument.</li> </ul> <p>The command sends the exported file metadata as a binary file, if exists.  </p> <p>Returns a number:</p> <ul> <li>the file size which send through in websocket</li> <li>0 if the file is not exists</li> <li>int64_max on error</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/image-export/#var-result-canceltiffidentifier","title":"var result = cancelTiff('identifier')","text":"<ul> <li>The identifier arg must be the same as the preceeded createTmpTiff call argument.</li> </ul> <p>Returns true if this tiff export existed and succesfully notified to stop.</p> <p>Returns false otherwise.</p> <p>Note: Currently this function is disabled</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/","title":"Manipulating axis positions","text":"<p>The following operations are described here: </p> <ul> <li>getAxisPositions</li> <li>getAxisPosition</li> <li>doZero</li> <li>setAxisPosition</li> <li>isAxisMoving</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#_1","title":"Manipulating axis positions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#var-json-femtoapimicroscopegetaxispositions","title":"var json = FemtoAPIMicroscope.getAxisPositions()","text":"<p>UNSAFE operation.</p> <p>This command is used to get all configured and adjustable axis position information. The output JSON contains the following information:</p> <p>Every JSON object contains the following axis parameters:</p> <ul> <li>space: space of the axis is configured to</li> <li>Lock: if true, axis positions cannot be set (solely by the Handwheel, but only in low speed mode)</li> <li>Minimum/Maximum Z position: min/max absolute position of an axis configured to raw Z</li> <li>Near position: near position absolute coordinate in \u00b5m</li> <li>Mode: objective mode</li> <li>AxisPositions: a JSON object that contains 2 objects, one named \u201cStandardAxes\u201d and another named \u201cNonStandardAxes\u201d. Standard axes are usually Slow X,Y,Z, VirtX,Y, Z, Tilt X,Y,Z, and FastZ. Other axes, for example pipette manipulation axes, are found under \u201cNonStandardAxes\u201d in the JSON, if present.</li> </ul> <p>The StandardAxes/NonStandardAxes JSON array contains objects with information about the configured axes. These contain the following axis parameters:</p> <ul> <li>Axis: name of the configured axis</li> <li>Absolute: absolute position of the axis in \u00b5m</li> <li>Relative: relative position of the axis in \u00b5m (relative to the current position)</li> <li>AlertThreshold: axis threshold in \u00b5m, the maximum movement of which can be applied with the setAxisPosition() API command</li> <li>AxisLowerLimit: the minimum absolute position of the axis (varies if the absolute coordinate system is translated/rotated)</li> <li>AxisUpperLimit: the maximum absolute position of the axis (varies if the absolute coordinate system is translated/rotated)</li> <li>LabelingOriginOffset: labeling origin offset position</li> </ul> <p>Example output:</p> <pre><code>[{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisPositions\": {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"NonStandardAxes\": [ ],\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"StandardAxes\": [\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": 199.21805399270463,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 50,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"FastZ\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -200,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 200,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": 199.21805399270463\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": -28.18,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 9,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"SlowX\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -10000,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": -28.18\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Absolute\": -174.69,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 34,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"SlowY\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -10000,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"Relative\": -174.69\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": -117.64,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"SlowZ\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -24500,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": -117.64\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": 7.529920000000001,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 15,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"TiltX\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -55,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 47,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": 7.529920000000001\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": -28.50832,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 8,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"TiltY\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -44,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 77,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": -28.50832\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 9,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"VirtX\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -10058.559331683451,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 28.425122191018254,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": 0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\u00a0{\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 9,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"VirtY\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -244.7146052663152,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 200.52343632100892,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\"LabelingOriginOffset\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": 0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }, {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Absolute\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AlertThreshold\": 9,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Axis\": \"VirtZ\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisLowerLimit\": -450.55220157968716,\n \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"AxisUpperLimit\": 133.87231018703233,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"LabelingOriginOffset\": 199.21805399270463,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Relative\": 0\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 }\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 ]\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 },\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Lock\": false,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Maximum Z position\": 0,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Minimum Z position\": -24500,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Mode\": \"Standard\",\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"Near position\": -200,\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 \"space\": \"space1\" \n}]\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#usage-in-matlab","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscopeobject must be created. After it, the usage is the same as described above, only the returned value has a different format: </p> <p>result = femtoapiObj.getAxisPositions();</p> <p>where the returned value is the returned json from server parsed into an array of (nested) Matlab structs. </p> <p>In case of any error, it gives an error message as a Matlab error type exception.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#examples","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.getAxisPositions()\u201d ;\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\nresult = femtoapiObj.getAxisPositions();\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getAxisPositions();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"getAxisPositions(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#_2","title":"Manipulating axis positions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#var-json-femtoapimicroscopegetaxispositionaxisname-spacename","title":"var json = FemtoAPIMicroscope.getAxisPosition(axisName, spaceName = '')","text":"<p>UNSAFE operation.</p> <p>This command returns the part of the json returned by getAxisPositions() for the specified axis and space.</p> <p>Input parameters:</p> <ul> <li>axisName: string, name of a valid and configured axis. </li> <li>spaceName: string, optional, must be the name of the space for which the axis given by \u2018axisName\u2019 is configured. </li> </ul> <p>In case of success, it returns a json object, with the following fields: </p> <ul> <li>Axis: name of the configured axis</li> <li>Absolute: absolute position of the axis in \u00b5m</li> <li>Relative: relative position of the axis in \u00b5m (relative to the current position)</li> <li>AlertThreshold: axis threshold in \u00b5m, the maximum movement of which can be applied with the setAxisPosition() API command</li> <li>AxisLowerLimit: the minimum absolute position of the axis (varies if the absolute coordinate system is translated/rotated)</li> <li>AxisUpperLimit: the maximum absolute position of the axis (varies if the absolute coordinate system is translated/rotated)</li> <li>LabelingOriginOffset: labeling origin offset position</li> </ul> <p>In case of any error (e.g. space name is invalid), it returns an empty json and an error message. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#important-notes-on-usage","title":"Important notes on usage","text":"<ul> <li>in case the axisName/spaceName is invalid, it returns false, and an error message</li> <li>if the axis is not configured with the given space, it returns false, and an error message</li> <li>if the \u2018spaceName\u2019 parameter is not given, it uses a default space name (currently it is called \u2018space1\u2019)</li> </ul> <p>Note: List of standard (and non-standard) axes can be obtained by issuing the FemtoAPIMicroscope.getAxisPositions() command.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscopeobject must be created. After it, usage is the following: </p> <ul> <li>if called without parameters, it gets the above json parsed into struct, for default space: </li> </ul> <p>result = femtoapiObj.getAxisPosition(axisName);</p> <ul> <li>if called with two parameters, second parameter is char array, position type, which can be 'absolute' or 'relative' or empty char: </li> </ul> <p>relativeOrAbsolutePosition = femtoapiObj.getAxisPosition(axisName, positionType);</p> <p>Returns the requested position, but if positionType is empty char, result is the same as in the first case. </p> <ul> <li>if called with three parameters, third parameter is char array, name of the space which the axis is configured for: </li> </ul> <p>result = femtoapiObj.getAxisPosition(axisName, positionType, spaceName);</p> <p>Empty space name produces the same as in the second case. </p> <p>In case of any error, it gives an error message as a Matlab error type exception.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#examples_1","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.getAxisPosition('SlowZ')\u201d ;\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\n% get the axis position struct from server (contains limits, alert threshold, labeling origin offset too) and select position fields: \nresult = femtoapiObj.getAxisPosition('SlowX');\nrelativePos = result.relative;\nabsolutePos = result.absolute;\n\n% or return directly absolute/reltive position: \nrelativePos = femtoapiObj.getAxisPosition('SlowX', 'relative');\nabsolutePos = femtoapiObj.getAxisPosition('SlowX', 'absolute');\n\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getAxisPosition('Tiltx');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"getAxisPosition(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre> <p>var success = FemtoAPIMicroscope.doZero(axisName, spaceName ='')</p> <p>UNSAFE operation.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#description-and-usage","title":"Description and usage","text":"<p>This command is used to set the axis relative position to 0.0, and set the labeling origin to the current absolute position.</p> <p>Input parameters:</p> <ul> <li>axisName: string, name of a valid and configured axis </li> <li>spaceName: string, optional, must be the name of the space for which the axis given by \u2018axisName\u2019 is configured. </li> </ul> <p>Output: true, when zero was successful, false otherwise</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#important-notes-on-usage_1","title":"Important notes on usage","text":"<ul> <li>in case the axisName/spaceName is invalid, it returns false, and an error message</li> <li>if the axis is not configured with the given space, it returns false, and an error message</li> <li>if the \u2018spaceName\u2019 parameter is not given, it uses a default space name (currently it is called \u2018space1\u2019)</li> <li>if the Handwheel is locked (Lock is checked in the MESc GUI), axis zero cannot be done</li> <li>axis zero currently can only be done on standard axes (Slow(X,Y,Z), Virt(X, Y, Z), Tilt(X, Y, Z), FastZ)</li> </ul> <p>Note: List of standard (and non-standard) axes can be obtained by issuing the FemtoAPIMicroscope.getAxisPositions() command.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#usage-in-matlab_2","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscopeobject must be created. After it, the usage is the same as described above:</p> <p>succeeded= femtoapiObj.doZero(axisName, spaceName);</p> <p>where axisName and spaceName must be character arrays, and spaceName can be an empty char or omitted (default space is used in this case).</p> <p>In case of any error, it gives the error message as a Matlab error type exception. Otherwise, it returns true.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#examples_2","title":"Examples","text":"<p>C++ code examples</p> <pre><code>// zero axis \u2018TiltX\u2019, which is configured on default space\nQString command = \u201cFemtoAPIMicroscope.doZero(\u2018TiltX\u2019)\u201d;\n// (or \u201cFemtoAPIMicroscope.doZero(\u2018TiltX\u2019,\u2019space1\u2019)\u201d; )\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n\n// zero axis \u2018VirtY\u2019, configured on space2\nQString command = \u201cFemtoAPIMicroscope.doZero(\u2018VirtY\u2019,\u2019space2\u2019)\u201d;\n//(or \u201cFemtoAPIMicroscope.doZero(\u2018VirtY\u2019,\u2019space2\u2019)\u201d; )\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\naxisName = 'SlowZ';\nspace = 'space1';\n\nfemtoapiObj.doZero(axisName,space);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.doZero(\u2018TiltX\u2019);\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"doZero(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#_3","title":"Manipulating axis positions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#var-succeed-setaxispositionaxisname-newposition-isrelativepositiontrue-isrelativetocurrentpositiontrue-spacename","title":"var succeed = setAxisPosition(axisName, newPosition, isRelativePosition=true, isRelativeToCurrentPosition=true, spaceName = '')","text":"<p>UNSAFE operation.</p> <p>This command is used to set an absolute or relative position of a configured axis. Only one axis can be set at once. The given position must be within the axis and threshold limits. The limits with the valid axis names can be get with the command getAxispositions(), which will be described later.</p> <p>The required input parameters:</p> <ul> <li>axisName: string, it must be a configured axis name.</li> <li>newPosition: double, the new position that wanted to be set. It can be a relative or an absolute position, depending on the isRelativePosition flag.</li> </ul> <p>Optional input parameters:</p> <ul> <li>isRelativePosition: if true, the given position is relative, otherwise it is considered as an absolute position. Default: true</li> <li>isRelativeToCurrentPosition : bool, if true, the newPosition parameter means a relative position to the current position, otherwise it is relative to the labeling origin offset. Default: true</li> <li>spaceName: name of the space. default: empty string, which means the default space name</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#important-notes","title":"Important notes","text":"<ul> <li>only one axis position can be set at a time</li> <li>the axisName must be valid (if not, an error message is returned, and the position is not changed)</li> <li>every axis has its axis threshold limit, which is the maximum position change that is allowed relative to the current position in one command. If the new position that wanted to be set is out of this limit, the position will not be set, and the objective is not moved (an appropriate error message is returned)</li> <li>it is possible, that the new axis position is within the threshold limit of the given axis, but it would be out of the absolute limits of the axis. In this case, the objective is not moved, and an error message is returned.</li> <li>if any parameter is invalid, the objective is not moved, and an error message is returned</li> <li>the configured axis properties, the axis name, the axis threshold limits and the axis limits in the absolute coordinate system can be get by the getAxisPositions() command</li> <li>if a tilted axis is moved, then Z-stack parameters (firstZ, intermediateZ, zStep, zPlanes) will be reset to their default values due to coordinate system change.</li> </ul> <p>Note: if an absolute position is set, the value of the parameter isRelativeToCurrentPosition is irrelevant</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#usage-in-matlab_3","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscopeobject must be created. After it, the usage is the same as described above: </p> <p>succeeded = femtoapiObj.setAxisPosition(axisName, newPosition, isRelativePosition, isRelativeToCurrentPosition, spaceName);</p> <p>Input arguments (required): </p> <ul> <li>axisName: char array</li> <li>newPosition: double</li> </ul> <p>Input arguments (optional): </p> <ul> <li>isRelativePosition: bool, default value is true</li> <li>isRelativeToCurrentPosition: bool, default value is true</li> <li>spaceName: character array, default value is the default space (space1) </li> </ul> <p>In case of any error, it gives the error message as a Matlab error type exception, otherwise it returns true.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#examples_3","title":"Examples","text":"<p>C++ code examples</p> <pre><code>// Moving TiltX axis relative to the current position by 4.5:\nQString command = \u201cFemtoAPIMicroscope.setAxisPosition(\u2018TiltX\u2019, 4.5, true, true) \u201c\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n\n// Moving axis \u2018SlowX\u2019 relative to the labeling origin offset by 8.0 :\nQString command = \u201cFemtoAPIMicroscope.setAxisPosition(\u2018SlowX\u2019, 8.0, true, false) \u201c;\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n\n// Moving axis \u2018VirtZ\u2019 to absolute position 25.0 :\nQString command = \u201cFemtoAPIMicroscope.setAxisPosition(\u2018SlowZ\u2019, 25.0, false) \u201c\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n\n// Moving axis \u201cTiltY\u201d to absolute position 10.0 on space2:\nQString command = \u201cFemtoAPIMicroscope.setAxisPosition(\u2018TiltY\u2019, 10.0, false, false, \u201dspace2\u201d)\u201c;\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\n\n% set relative position to current position\nspace = \"space1\";\naxisName = \"SlowX\";\nposition = 5;\nisRelativePosition = true;\nisRelativeToCurrentPosition = true;\n\nfemtoapiObj.setAxisPosition(axisName,position,isRelativePosition,...\n                isRelativeToCurrentPosition,space)\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.setAxisPosition(\u2018SlowZ\u2019, 25.0, false) ;\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"setAxisPosition(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#_4","title":"Manipulating axis positions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#var-succeed-isaxismovingaxisname-spacename","title":"var succeed = isAxisMoving(axisName, spaceName = '')","text":"<p>UNSAFE operation.</p> <p>Returns whether the objective is moving along the given axis or not. The axisName must be configured to the given space. </p> <p>If emtpy char or no space name is given, default space ('space1') is considered. </p> <p>The required input parameter:</p> <ul> <li>axisName: string, it must be a configured axis name.</li> </ul> <p>Optional input parameter:</p> <ul> <li>spaceName: name of the space. default: empty string, which means the default space name</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#usage-in-matlab_4","title":"Usage in Matlab","text":"<p>First, a FemtoAPIMicroscope object must be created. After it, the usage is the same as described above: </p> <p>succeeded = femtoapiObj.isAxisMoving(axisName, spaceName);</p> <p>Input arguments (required): </p> <ul> <li>axisName: char array</li> </ul> <p>Input arguments (optional): </p> <ul> <li>spaceName: character array, if not given, default value is the default space (space1) </li> </ul> <p>In case of any error, it gives the error message as a Matlab error type exception, otherwise it returns true.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/manipulating-axis-positions/#examples_4","title":"Examples","text":"<p>C++ code examples</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.isAxisMoving('StageX') \u201c\nReplyMessageParser *cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\nisMoving = femtoapiObj.isAxisMoving(axisName);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.isAxisMoving(\u2018SlowZ\u2019) ;\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"isAxisMoving(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/","title":"MultiROI commands","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#_1","title":"MultiROI commands","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#var-result-femtoapifilecreatebackgroundframexdim-ydim-technologytype-backgroundimagerole-viewportjson-filenodedescriptor-t0inms-00-deltatinms-10-tdiminitial-1-isbessel-false","title":"var result = FemtoAPIFile.createBackgroundFrame(xDim, yDim, technologyType, backgroundImageRole, viewportJson, fileNodeDescriptor = '', t0InMs = 0.0, deltaTInMs = 1.0, tDimInitial = 1, isBessel = false)","text":"<p>Creates new measurement session and a time series measurement unit in it with the specified technology type, and adds one (or optionally more) frame to it. This measurement session is special: it cannot be target of new measurements, and only multiROI images can be created in it. </p> <p>Input parameters: </p> <ul> <li>xDim: measurement image x resolution </li> <li>yDim: measurement image y resolution </li> <li>technologyType: string, means the used technology for imaging, it can be 'resonant', 'galvo', or 'AO'. </li> <li>backgroundImageRole: string, means the used image role for background images, it can be 'background' and 'motionCorrection'</li> <li>viewportJson: viewport for measurement. It is a json object in compact string format. See examples below.</li> <li>fileNodeDescriptor: string, descriptor of the file node in the MESc GUI, in which the new background session and unit will be created. If it is not given or empty string, current file is considered. </li> <li>t0InMs: Measurement start time offset in ms. Double, default value is 0.0 </li> <li>deltaTInMs: Frame duration time in ms (1/frame rate). Positive double, default value is 1.0. </li> <li>tDimInitial: Number of frames to create in z (time) dimension. Positive integer, default value is 1. </li> <li>isBessel: creates a background frame of a Bessel type</li> </ul> <p>Returns a json object with the following fields: </p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false  </li> <li>id: command id, which is used as input to FemtoAPIFile.getStatus(commandID) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> <li>backgroundImagePath: string, path of the created background image in the hdf file, e.g. in file with node descriptor '55', if backgound image path is /MSession_0/MUnit_0, it is the MUnit '55,0,0' . </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#usage-in-matlab","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createBackgroundFrame(xDim, yDim, technologyType, backgroundImageRole, viewportJson, fileNodeDescriptor, t0InMs, deltaTInMs, tDimInitial, isBessel)</p> <p>For more information about usage, see the introduction and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#examples","title":"Examples","text":"<p>The following variables need to be defined: </p> <p>var viewport='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'</p> <p>C++ code example </p> <code>QString command = \u201cFemtoAPIFile.createBackgroundFrame(256,256,``'AO'``,'background',viewport)\u201d;</code> <code>auto cmdParser=client-&gt;sendJSCommand(command);</code> <p>Matlab client code example: </p> <code>viewport ='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'``;</code> <code>femtoapiObj = FemtoAPIProcessing();``% connect to local server (MESc)</code> <code>result = femtoapiObj.createBackgroundFrame(256,256,``'AO'``,'background',viewport)</code> <p>Python client code example: </p> <code>command``=``\"FemtoAPIFile.createBackgroundFrame(``256``,``256``,``'AO'``,'background',viewport);\u201d</code> <code>simpleCmdParser``=``client.sendJSCommand(command)</code> <code>resultCode``=``simpleCmdParser.getResultCode()</code> <code>if</code> <code>resultCode &gt;``0``:</code> <code>print` `(``\"Return code: %d\"` `%` `resultCode) `</code>print<code></code>(simpleCmdParser.getErrorText()) <code></code>else<code>: ` ```print` `(</code>\"createBackgroundFrame(): %s\"<code></code>%<code></code>simpleCmdParser.getJSEngineResult()) `"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#var-result-femtoapifilecreatebackgroundzstackxdim-ydim-zdim-technologytype-backgroundimagerole-viewportjson-filenodedescriptor-zstepinmicrons-10","title":"var result = FemtoAPIFile.createBackgroundZStack(xDim, yDim, zDim, technologyType, backgroundImageRole, viewportJson, fileNodeDescriptor = '', zStepInMicrons = 1.0)","text":"<p>Creates new measurement session and a z-stack series measurement unit in it with the specified technology type, This measurement session is special: it cannot be target of new measurements, and only multiROI images can be created in it. </p> <p>Input parameters: </p> <ul> <li>xDim: measurement image x resolution </li> <li>yDim: measurement image y resolution </li> <li>zDim: number of z planes </li> <li>technologyType: string, means the used technology for imaging, it can be 'resonant', 'galvo', 'AO' . </li> <li>backgroundImageRole: string, means the used image role for background images, it can be 'background' and 'motionCorrection'</li> <li>viewportJson: viewport for measurement. It is a json object in compact string format. See examples below.</li> <li>fileNodeDescriptor: string, descriptor of the file node in the MESc GUI, in which the new background session and unit will be created. If it is not given or empty string, current file is considered. </li> <li>zStepInMicrons: Step between z planes in um. Double, default value is 1.0 </li> </ul> <p>Returns a json object with the following fields: </p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false  </li> <li>id: command id, which is used as input to FemtoAPIFile.getStatus(commandID) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> <li>backgroundImagePath: string, path of the created background image in the hdf file, e.g. in file with node descriptor '55', if backgound image path is /MSession_0/MUnit_0, it is the MUnit '55,0,0' . </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createBackgroundZStack(xDim, yDim, zDim, technologyType, backgroundImageRole, viewportJson, zStepInMicrons)</p> <p>For more information about usage, see the introduction and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#examples_1","title":"Examples","text":"<p>The following variables need to be defined: </p> <p>var viewport='{\"transformation\": {\"translation\": [0,0,0],\"rotationQuaternion\": [0,0,0,1]},\"size\": [256,256]}'; </p> <p>C++ code example </p> <code>QString command = \u201cFemtoAPIFile.createBackgroundZStack(256,256,10,``'AO'``,'background',viewport)\u201d;</code> <code>auto cmdParser=client-&gt;sendJSCommand(command);</code> <p>Matlab client code example: </p> <code>viewport ='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'``;</code> <code>femtoapiObj = FemtoAPIProcessing();``% connect to local server (MESc)</code> <code>result = femtoapiObj.createBackgroundZStack(256,256,10,``'AO'``,'background',viewport)</code> <p>Python client code example: </p> <code>command``=``\"FemtoAPIFile.createBackgroundZStack(``256``,``256``,``10``,``'AO'``,'background',viewport);\u201d</code> <code>simpleCmdParser``=``client.sendJSCommand(command)</code> <code>resultCode``=``simpleCmdParser.getResultCode()</code> <code>if</code> <code>resultCode &gt;``0``:</code> <code>print` `(``\"Return code: %d\"` `%` `resultCode) `</code>print<code></code>(simpleCmdParser.getErrorText()) <code></code>else<code>: ` ```print` `(</code>\"createBackgroundZStack(): %s\"<code></code>%<code></code>simpleCmdParser.getJSEngineResult()) `"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#var-result-femtoapifilecreatemultiroi2dmunitxdim-tdim-methodtype-backgroundimagepath-deltatinms-10-t0inms-00","title":"var result = FemtoAPIFile.createMultiROI2DMUnit(xDim, tDim, methodType, backgroundImagePath, deltaTInMs = 1.0, t0InMs= 0.0)","text":"<p>Creates new measurement unit  scan time series measurement. </p> <p>Input parameters: </p> <ul> <li>xDim: measurement image x resolution </li> <li>tDim: number of timestamps </li> <li>methodType: 2D multiROI type, it can be 'multiROIPointScan', 'multiROILineScan', or 'multiROIMultiLine' </li> <li>backgroundImagePath: handle of background image in the file (e.g. 10,1,0 )</li> <li>deltaTInMs: Frame duration time in ms (1/frame rate). Positive double, default value is 1.0.</li> <li>t0InMs: Measurement start time offset in ms. Double, default value is 0.0 </li> </ul> <p>Returns a json object with the following fields: </p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false  </li> <li>id: command id, which is used as input to FemtoAPIFile.getStatus(commandID) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul> <p>Note: Background image must be created with commands createBackgroundFrame() or createBackgroundZStack() before creating multiROI image. These commands return the path of the background image too, which can be used as input parameter for creating multiROI image. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#usage-in-matlab_2","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createMultiROIMUnit(xDim, tDim, methodType, backgroundImagePath, deltaTInMs, t0InMs)</p> <p>For more information about usage, see the introduction and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#examples_2","title":"Examples","text":"<p>C++ code example </p> <code>QString command = \u201cFemtoAPIFile.createMultiROI2DMUnit(256,10,'multiROILineScan','10,1,0')\u201d;</code> <code>auto cmdParser=client-&gt;sendJSCommand(command);</code> <p>Matlab client code example: </p> <code>femtoapiObj = FemtoAPIProcessing();``% connect to local server (MESc)</code> <code>result = femtoapiObj.createMultiROI2DMUnit(256,10,'multiROILineScan','10,1,0')</code> <p>Python client code example: </p> <code>command``=``\"FemtoAPIFile.createMultiROI2DMUnit(256,10,'multiROILineScan','10,1,0')``;\u201d</code> <code>simpleCmdParser``=``client.sendJSCommand(command)</code> <code>resultCode``=``simpleCmdParser.getResultCode()</code> <code>if</code> <code>resultCode &gt;``0``:</code> <code>print` `(``\"Return code: %d\"` `%` `resultCode) `</code>print<code></code>(simpleCmdParser.getErrorText()) <code></code>else<code>: ` ```print` `(</code>\"createMultiROI2DMUnit(): %s\"<code></code>%<code></code>simpleCmdParser.getJSEngineResult()) `"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#var-result-femtoapifilecreatemultiroi3dmunitxdim-ydim-tdim-methodtype-backgroundimagepath-deltatinms-10-t0inms-00","title":"var result = FemtoAPIFile.createMultiROI3DMUnit(xDim, yDim, tDim, methodType, backgroundImagePath, deltaTInMs = 1.0, t0InMs= 0.0)","text":"<p>Creates new measurement unit  scan time series measurement. </p> <p>Input parameters: </p> <ul> <li>xDim: measurement image x resolution </li> <li>yDim: measurement image y resolution </li> <li>tDim: number of timestamps </li> <li>methodType: 3D multiROI type, it can be 'multiROIChessBoard', 'multiROITransverseRibbonScan', 'multiROILongitudinalRibbonScan'</li> <li>backgroundImagePath: handle of background image in the file (e.g. 10,1,0)</li> <li>deltaTInMs: Frame duration time in ms (1/frame rate). Positive double, default value is 1.0</li> <li>t0InMs: Measurement start time offset in ms. Double, default value is 0.0 .</li> </ul> <p>Returns a json object with the following fields: </p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false  </li> <li>id: command id, which is used as input to FemtoAPIFile.getStatus(commandID) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul> <p>Note: Background image must be created with commands createBackgroundFrame() or createBackgroundZStack() before creating multiROI image. These commands return the path of the background image too, which can be used as input parameter for creating multiROI image. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#usage-in-matlab_3","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createMultiROI3DMUnit(xDim, yDim, tDim, methodType, backgroundImagePath, deltaTInMs, t0InMs)</p> <p>For more information about usage, see the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#examples_3","title":"Examples","text":"<p>C++ code example </p> <code>QString command = \u201cFemtoAPIFile.createMultiROI3DMUnit(256,300,10,'multiROIChessBoard','10,1,0')\u201d;</code> <code>auto cmdParser=client-&gt;sendJSCommand(command);</code> <p>Matlab client code example: </p> <code>femtoapiObj = FemtoAPIProcessing();``% connect to local server (MESc)</code> <code>result = femtoapiObj.createMultiROI3DMUnit(256,10,'multiROIChessBoard','10,1,0')</code> <p>Python client code example: </p> <code>command``=``\"FemtoAPIFile.createMultiROI3DMUnit(256,10,'multiROIChessBoard','10,1,0')``;\u201d</code> <code>simpleCmdParser``=``client.sendJSCommand(command)</code> <code>resultCode``=``simpleCmdParser.getResultCode()</code> <code>if</code> <code>resultCode &gt;``0``:</code> <code>print` `(``\"Return code: %d\"` `%` `resultCode) `</code>print<code></code>(simpleCmdParser.getErrorText()) <code></code>else<code>: ` ```print` `(</code>\"createMultiROI3DMUnit(): %s\"<code></code>%<code></code>simpleCmdParser.getJSEngineResult()) `"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#var-result-femtoapifilecreatemultiroi4dmunitxdim-ydim-zdim-tdim-methodtype-backgroundimagepath-deltatinms-10-t0inms-00","title":"var result = FemtoAPIFile.createMultiROI4DMUnit(xDim, yDim, zDim, tDim, methodType, backgroundImagePath, deltaTInMs = 1.0, t0InMs= 0.0)","text":"<p>Creates new measurement unit  scan time series measurement. </p> <p>Input parameters: </p> <ul> <li>xDim: measurement image x resolution </li> <li>yDim: measurement image y resolution </li> <li>zDim: measurement image z resolution</li> <li>tDim: number of timestamps </li> <li>methodType: 4D multiROI type, it can be 'multiROIMultiCube', 'multiROISnake'</li> <li>backgroundImagePath: handle of background image in the file (e.g. <code>10,1,0</code> )</li> <li>deltaTInMs: Frame duration time in ms (1/frame rate). Positive double, default value is 1.0</li> <li>t0InMs: Measurement start time offset in ms. Double, default value is 0.0 .</li> </ul> <p>Returns a json object with the following fields: </p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false  </li> <li>id: command id, which is used as input to FemtoAPIFile.getStatus(commandID) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul> <p>Note: Background image must be created with commands createNackgroundFrame() or createBackgroundZStack() before creating multiROI image. These commands return the path of the background image too, which can be used as input parameter for creating multiROI image. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#usage-in-matlab_4","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createMultiROI4DMUnit(xDim, yDim, zDim, tDim, methodType, backgroundImagePath, deltaTInMs, t0InMs)</p> <p>For more information about usage, see the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/multiroi-commands/#examples_4","title":"Examples","text":"<p>C++ code example </p> <code>QString command = \u201cFemtoAPIFile.createMultiROI4DMUnit(256,300,10,20,'multiROIMultiCube','10,1,0')\u201d;</code> <code>auto cmdParser=client-&gt;sendJSCommand(command);</code> <p>Matlab client code example: </p> <code>femtoapiObj = FemtoAPIProcessing();``% connect to local server (MESc)</code> <code>result = femtoapiObj.createMultiROI4DMUnit(256,300,10,20,'multiROIMultiCube','10,1,0')</code> <p>Python client code example: </p> <code>command``=``\"FemtoAPIFile.createMultiROI4DMUnit(256,300,10,20,'multiROIMultiCube','10,1,0')``;\u201d</code> <code>simpleCmdParser``=``client.sendJSCommand(command)</code> <code>resultCode``=``simpleCmdParser.getResultCode()</code> <code>if</code> <code>resultCode &gt;``0``:</code> <code>print` `(``\"Return code: %d\"` `%` `resultCode) `</code>print<code></code>(simpleCmdParser.getErrorText()) <code></code>else<code>: ` ```print` `(</code>\"createMultiROI4DMUnit(): %s\"<code></code>%<code></code>simpleCmdParser.getJSEngineResult()) `"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/","title":"MUnit manipulations","text":"<p>The following measurement unit manipulations are implemented:</p> <ul> <li>create (time series or z-stack resonant/galvo/Ao fullframe scan)</li> <li>extend</li> <li>copy/move</li> <li>delete</li> <li>setting linked MUnit</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#notes-on-matlab-usage","title":"Notes on Matlab usage","text":"<p>In the Matlab FemtoAPI client, regarding the command descriptions and usage, the same applies as in case of C++/Python client, there are some minor differences regarding the input/output arguments. The usage from Matlab is the following:</p> <ul> <li>You need to create a FemtoAPIProcessing object, as described  here (Tutorial: using the FemtoAPI Matlab client)</li> <li>call the command with the same name as in case of C++/Python, and the input/output parameters have the following format:</li> <li>measurement unit handle, in input/output parameters: represented as Matlab array, instead of string, e.g. [43 0 0]</li> <li>countDims: represented as Matlab array</li> <li>result: the returned value is the json get from server parsed into a Matlab struct (if it contains measurement unit handle (e.g. copiedMUnitIdx, addedMUnitIdx), it is a Matlab array)</li> <li>If a command fails, then it throws an error type Matlab exception containing the error message</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_1","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilecreatetimeseriesmunitxdim-ydim-taskxmlparametersviewportjson-z0inms-00-zstepinms-10-zdiminitial-1","title":"var result = FemtoAPIFile.createTimeSeriesMUnit(xDim, yDim, taskXMLParameters,viewportJson, z0InMs = 0.0, zStepInMs = 1.0, zDimInitial = 1)","text":"<p>Creates new measurement unit for galvo/resonant/AO fullframe scan time series measurement.</p> <p>Input parameters:</p> <ul> <li>xDim: measurement image x resolution</li> <li>yDim: measurement image y resolution</li> <li>taskXMLParameters: measurementParamsXML for resonant/galvo/AO fullframe scan time series measurement.</li> <li>viewportJson: viewport for measurement</li> <li>z0InMs: Measurement start time offset in ms. Double, default value is 0.0</li> <li>zStepInMs: Frame duration time in ms (1/frame rate). Positive double, default value is 1.0.</li> <li>zDimInitial: Number of frames to create in z dimension. Positive integer, default value is 1.</li> </ul> <p>Returns a json object with the following fields:</p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createTimeSeriesMUnit(xDim, yDim, taskXMLParameters, viewportJson, z0InMs, zStepInMs, zDimInitial)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples","title":"Examples","text":"<p>The following variables need to be defined:</p> <p>var viewport='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'</p> <p>in API version 2.0 (MESc ver 4.5) : taskXMLParameters is replaced by a single string containing the scaning mode: galvo/resonant/AO</p> <p>galvo:</p> <p>var tp='galvo'</p> <p>resonant:</p> <p>var tp='resonant'</p> <p>AO fullframe scan:</p> <p>var tp='AO'</p> <p>C++ code example</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.createTimeSeriesMUnit(256,256,tp,viewport)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilecreatebesseltimeseriesmunitxdim-ydim-viewportjson-z0inms-00-zstepinms-10-zdiminitial-1","title":"var result = FemtoAPIFile.createBesselTimeSeriesMUnit(xDim, yDim, viewportJson, z0InMs = 0.0, zStepInMs = 1.0, zDimInitial = 1)","text":"<p>Creates new measurement unit of Bessel measurement type for AO fullframe scan time series measurement.</p> <p>Input parameters:</p> <ul> <li>xDim: measurement image x resolution</li> <li>yDim: measurement image y resolution</li> <li>viewportJson: viewport for measurement</li> <li>z0InMs: Measurement start time offset in ms. Double, default value is 0.0</li> <li>zStepInMs: Frame duration time in ms (1/frame rate). Positive double, default value is 1.0.</li> <li>zDimInitial: Number of frames to create in z dimension. Positive integer, default value is 1.</li> </ul> <p>Returns a json object with the following fields:</p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createBesselTimeSeriesMUnit(xDim, yDim, viewportJson, z0InMs, zStepInMs, zDimInitial)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_1","title":"Examples","text":"<p>The following variables need to be defined:</p> <p>var viewport='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'</p> <p>C++ code example</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.createBesselTimeSeriesMUnit(256,256,viewport)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>viewport = '{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}';\u00a0\nfemtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.createBesselTimeSeriesMUnit(256,256,viewport)\u00a0%\u00a0create\u00a0measurement\u00a0unit\u00a0\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.createBesselTimeSeriesMUnit(256,256,viewport);\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"createBesselTimeSeriesMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilecreatezstackmunitxdim-ydim-zdim-taskxmlparametersviewportjson-zstepinmicrons-10","title":"var result = FemtoAPIFile.createZStackMUnit(xDim, yDim, zDim, taskXMLParameters,viewportJson, zStepInMicrons = 1.0)","text":"<p>Creates new measurement unit for galvo/resonant/AO z-stack measurement.</p> <p>Input parameters:</p> <ul> <li>xDim: measurement image x resolution</li> <li>yDim: measurement image y resolution</li> <li>zDim: number of z planes</li> <li>taskXMLParameters: measurementParamsXML for resonant/galvo/AO fullframe scan z-stack measurement.</li> <li>viewportJson: viewport for measurement</li> <li>zStepInMicrons: Step between z planes in um. Double, default value is 0.0</li> </ul> <p>Returns a json object with the following fields:</p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_2","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createZStackMUnit(xDim, yDim, zDim, taskXMLParameters, viewportJson, zStepInMicrons)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_2","title":"Examples","text":"<p>The following variables need to be defined:</p> <p>var viewport='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'</p> <p>in API version 2.0 (MESc ver 4.5) : taskXMLParameters is replaced by a single string containing the scaning mode: galvo/resonant/AO</p> <p>galvo:</p> <p>var tp='galvo'</p> <p>resonant:</p> <p>var tp='resonant'</p> <p>AO fullframe scan:</p> <p>var tp='AO'</p> <p>C++ code example</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.createZStackMUnit(256,256,10,tp,viewport)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>viewport = '{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}';\ntp = 'galvo'\u00a0;\n\nfemtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.createZStackMUnit(256,256,10,tp,viewport)\u00a0%\u00a0create\u00a0measurement\u00a0unit\u00a0\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.createZStackMUnit(256,256,10,tp,viewport);\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"createZStackMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_2","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilecreatevolumescanmunitxdim-ydim-zdim-tdim-technologytype-viewportjson","title":"var result = FemtoAPIFile.createVolumeScanMUnit(xDim, yDim, zDim, tDim, technologyType, viewportJson)","text":"<p>Creates new measurement unit for galvo/resonant/AO fullframe volume scan measurement.</p> <p>Input parameters:</p> <ul> <li>xDim: measurement image x resolution</li> <li>yDim: measurement image y resolution</li> <li>zDim: number of Z planes</li> <li>tDim: number of time frames on each Z plane</li> <li>technologyType: measurementParamsXML for resonant/galvo/AO fullframe scan time series measurement.</li> <li>viewportJson: viewport for measurement</li> </ul> <p>Returns a json object with the following fields:</p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_3","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createVolumeScanMUnit(xDim, yDim, zDim, tDim, technologyType, viewportJson)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_3","title":"Examples","text":"<p>The following variables need to be defined:</p> <p>var viewport='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'</p> <p>in API version 2.0 (MESc ver 4.5) : taskXMLParameters is replaced by a single string containing the scaning mode: galvo/resonant/AO</p> <p>galvo:</p> <p>var tp='galvo'</p> <p>resonant:</p> <p>var tp='resonant'</p> <p>AO fullframe scan:</p> <p>var tp='AO'</p> <p>C++ code example</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.createVolumeScanMUnit(256,256,10,1,tp,viewport)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>viewport = '{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}';\ntp = 'galvo'\u00a0;\n\nfemtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.createVolumeScanMUnit(256,256,10,1,tp,viewport)\u00a0%\u00a0create\u00a0measurement\u00a0unit\u00a0\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.createVolumeScanMUnit(256,256,10,1,tp,viewport);\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"createTimeSeriesMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_3","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilecreatemultilayermunitxdim-ydim-zdim-technologytype-viewportjson","title":"var result = FemtoAPIFile.createMultiLayerMUnit(xDim, yDim, zDim, technologyType, viewportJson)","text":"<p>Creates new measurement unit for galvo/resonant/AO fullframe multi layer scan measurement.</p> <p>Input parameters:</p> <ul> <li>xDim: measurement image x resolution</li> <li>yDim: measurement image y resolution</li> <li>zDim: number of layers</li> <li>technologyType: measurementParamsXML for resonant/galvo/AO fullframe scan time series measurement.</li> <li>viewportJson: viewport for measurement</li> </ul> <p>Returns a json object with the following fields:</p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>addedMUnitIdx: In case of the new measurement unit has been successfully created, the unique index of the created measurement unit converted to string, e.g. \"34,0,1\"</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_4","title":"Usage in Matlab","text":"<p>result = femtoapiObj.createMultiLayerMUnit(xDim, yDim, zDim, technologyType, viewportJson)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_4","title":"Examples","text":"<p>The following variables need to be defined:</p> <p>each layer has it's own viewport</p> <p>var viewport='{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}, {\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}'</p> <p>technologyType: AO</p> <p>var tp='AO'</p> <p>C++ code example</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.createMultiLayerMUnit(256,256,2,tp,viewport)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>viewport = '{\"referenceViewportFormatVersion\": 1, \"viewports\":[{\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}, {\"geomTransRot\": [0,0,0,1], \"geomTransTransl\": [0,0,0], \"height\":256, \"width\": 256}]}';\ntp = 'galvo'\u00a0;\n\nfemtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.createMultiLayerMUnit(256,256,2,tp,viewport)\u00a0%\u00a0create\u00a0measurement\u00a0unit\u00a0\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.createMultiLayerMUnit(256,256,2,tp,viewport);\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"createMultiLayerMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_4","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifileextendmunitmunithandle-countdims","title":"var result = FemtoAPIFile.extendMUnit(mUnitHandle, countDims)","text":"<p>Extends a measurement unit given by 'mUnitHandle' with the number of frames 'countDims'.</p> <p>Input parameters:</p> <ul> <li>mUnitHandle: unique index of a measurement unit converted to string, e.g. '23,0,1'.</li> <li>countDims: number of frames to extend the measurement unit with</li> </ul> <p>Returns a json object containing the following fields:</p> <ul> <li>succeeded: bool, true if the extend measurement unit command has been successfully initiated, false otherwise.</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> </ul> <p>It fails when:</p> <ul> <li>the parameter mUnitHandle is syntactically invalid, or there is no opened measurement unit with this index is present, or</li> <li>the given measurement unit is not accessible because another asynchronous operation is running or the file is being closed, or</li> <li>this image type cannot be extended</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_5","title":"Usage in Matlab","text":"<p>result = femtoapiObj.extendMUnit(mUnitHandle, countDims)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_5","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.extendMUnit('43,0,2',10)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.extendMUnit ([43,0,2],10)\u00a0%\u00a0extends measurement\u00a0unit\u00a0with 10 frames, result is the returned json object  from server converted to struct\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.extendMUnit('43,0,2',10);\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.extendMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_5","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifiledeletemunitmunithandle","title":"var result = FemtoAPIFile.deleteMUnit(mUnitHandle)","text":"<p>Deletes a measurement unit from a .mesc file given by 'mUnitHandle' .</p> <p>Input parameters:</p> <ul> <li>mUnitHandle: unique index of a measurement unit converted to string, e.g. '23,0,1'.</li> </ul> <p>Returns a json object containing the following fields:</p> <ul> <li>succeeded: bool, true if the synchronous part of the command has been successfully run, false otherwise.</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>deletedMUnitIdx: the measurement unit index that has been deleted</li> </ul> <p>It fails when:</p> <ul> <li>the parameter 'mUnitHandle' is syntactically invalid, or there is no opened measurement unit with this index is present, or</li> <li>the given measurement unit is not accessible because another asynchronous operation is running or the file is being closed</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_6","title":"Usage in Matlab","text":"<p>result = femtoapiObj.deleteMUnit(mUnitHandle)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_6","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.deleteMUnit('43,0,2')\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.deleteMUnit ([43,0,2])\u00a0%\u00a0delete measurement\u00a0unit, result is the returned json object from server converted to struct\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.deleteMUnit('43,0,2');\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.deleteMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_6","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilecopymunitsourcemunithandle-destmhandle-bcopychannelcontents-true","title":"var result = FemtoAPIFile.copyMUnit(sourceMUnitHandle, destMHandle, bCopyChannelContents = true)","text":"<p>Copies the source measurement unit to the requested measurement session (or group). Channels with contents and metadata are copied by default. If 'bCopyChannelContents' is set to false, channels are copied almost the same way, except that channel data values will not be copied, and it will be created with zero values.</p> <p>Input parameters:</p> <ul> <li>sourceMUnitHandle: the unique index of the measurement unit to copy in string format, e.g. '34,0,0'</li> <li>destMHandle: the unique index of the destination measurement session (or group) to copy the source MUnit to, in string format, e.g. '43,0'.</li> <li>bCopyChannelContents: if true, channel contents of measurement unit will be copied too. Otherwise, channel data values are 0.</li> </ul> <p>Returns a json with the following fields:</p> <ul> <li>succeeded: Returns true if the copy of the unit was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>copiedParameters: Contains a measurement element and and other linked element if the copied MUnit has one. Unique index(es) of the newly created (copied) measurement unit(s) as string, e.g. '45,0,0'</li> </ul> <p>\"copiedParameters\": {\"background\": \"11,1,0\", \"measurement\": \"11,0,2\"}</p> <p>Note 1: If measurement MUnit is copied, then its linked MUnit(s) is/are copied as well.</p> <p>Note 2: the source and the MSession where the source measurement unit is located and the destination MSession can be different within the same file, or they can be in different measurement files.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_7","title":"Usage in Matlab","text":"<p>result = femtoapiObj.copyMUnit(sourceMUnitHandle, destMHandle, bCopyChannelContents)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_7","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.copyMUnit\u00a0('61,0,1', '62,0',\u00a0true)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\n\n%\u00a0copy\u00a0source\u00a0measurement\u00a0unit [61,0,1],\u00a0to\u00a0the\u00a0requested\u00a0measurement\u00a0session\u00a0\u00a0[62,0,1], including channel contents\nresult\u00a0=\u00a0femtoapiObj.copyMUnit ([61,0,1],\u00a0[62,0,1],\u00a0true);\u00a0% result is json converted to struct\nnewresult.copiedMUnitIdx % the copied measurement unit index as Matlab array, in this case [62,0,1]\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.copyMUnit\u00a0('61,0,1', '62,0',\u00a0true);\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0\u00a0print (\"copyMUnit\u00a0(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#_7","title":"MUnit manipulations","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilemovemunitsourcemunithandle-destmsessionhandle","title":"var result = FemtoAPIFile.moveMUnit(sourceMUnitHandle, destMSessionHandle)","text":"<p>Moves the source measurement unit to the requested measurement session (or group).  The content of the channels are always moved.</p> <p>Input parameters:</p> <ul> <li>sourceMUnitHandle: the index of the measurement unit to move</li> <li>destMSessionHandle: the index of the destination measurement session to move the source MUnit</li> </ul> <p>Returns a json with the following fields:</p> <ul> <li>succeeded: Returns true if the move of the unit was successfully initiated, otherwise it returns false</li> <li>id: command id, which is used as input to  FemtoAPIFile.getStatus(commandID) (Tools) command, to obtain the current status of the command (the asynchronous part), if succeeded == true.</li> <li>movedParameters: Contains a measurement element and other linked element of the moved MUnit (if any). Unique index(es) of the newly created (copied) measurement unit(s) as string, e.g. '45,0,0'</li> </ul> <p>\"movedParameters\": {\"background\": \"11,1,1\", \"measurement\": \"11,0,3\"}</p> <p>Note 1: the MSession where the source measurement unit is located and the destination MSession can be different within the same file, or they can be in different measurement files.</p> <p>Note 2: if the source measurement unit has linked MUnits, they are also moved, if moving is possible. (If the linked MUnit(s) is/are linked to another MUnit(s), then moving is not possible).</p> <p>Note 3: when moving is not possible, the main and the linked MUnit(s) will be copied intead of move.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_8","title":"Usage in Matlab","text":"<p>result = femtoapiObj.moveMUnit(sourceMUnitHandle, destMSessionHandle, bCopyChannelContents)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_8","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.moveMUnit('61,0,1', '62,0')\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\n\n%\u00a0move\u00a0source\u00a0measurement\u00a0unit [61,0,1],\u00a0to\u00a0the\u00a0requested\u00a0measurement\u00a0session\u00a0 [62,0,1]\u00a0\nresult\u00a0=\u00a0femtoapiObj.moveMUnit\u00a0([61,0,1], [62,0,1]);\u00a0\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.moveMUnit\u00a0('61,0,1', '62,0');\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"moveMUnit\u00a0(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#var-result-femtoapifilesetlinkedmunitsourcemunithandle-linkedmunithandle","title":"var result = FemtoAPIFile.setLinkedMUnit(sourceMUnitHandle, linkedMUnitHandle)","text":"<p>Links MUnit specified by 'linkedMUnitHandle' to the main MUnit with 'sourceUnitHandle'. The main MUnit must be in a measurement MSession and the linked MUnit must be within a background MSession within the same file as the main MUnit.</p> <p>Linking means that the linked MUnit is always copied/moved/deleted along with the main MUnit. Linking has the following properties:</p> <ul> <li>One background MUnit can be linked to several measurement MUnits</li> <li>Only one background image can be linked to a main MUnit with a specified image role</li> <li>The main and its linked MUnit(s) must be within the same file.</li> <li>When copying the main MUnit, the linked MUnit(s) is/are also copied.</li> <li>When moving the main MUnit, the linked MUnit(s) is/are only moved if it is not linked to another measurement MUnit(s). Otherwise the linked MUnit(s) is/are copied   with the main MUnit.</li> <li>Linked MUnit can't be copied/moved/deleted, only with the main MUnit.</li> <li>The linked MUnit is deleted automatically when the main MUnit is deleted, if and only if it is not linked to other MUnit(s).</li> <li>After an MUnit is linked to its main MUnit, it can't be deleted manually.</li> <li>An MUnit in the background MSession can be linked to more than one main MUnit. In this case, it is deleted when the last main MUnit   pointing to it is deleted.</li> </ul> <p>Input parameters:</p> <ul> <li>sourceMUnitHandle: the index of the main measurement unit. It must be an MUnit with measurement role.</li> <li>linkedMUnitHandle: the index of the destination measurement unit to link to the the mainMUnit . It must point to an MUnit in the background session.</li> </ul> <p>Returns true if linking was successful, false otherwise.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#usage-in-matlab_9","title":"Usage in Matlab","text":"<p>result = femtoapiObj.setLinkedMUnit(sourceMUnitHandle, linkedMUnitHandle)</p> <p>For more information about usage, see the  and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/munit-manipulations/#examples_9","title":"Examples:","text":"<p>Link MUnit with handle '61,1,0' from the background session to the main MUnit with handle '61,0,1':</p> <p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.setLinkedMUnit('61,0,1', '61,1,0')\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\u00a0\n</code></pre> <p>Matlab client code example:</p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\nresult\u00a0=\u00a0femtoapiObj.setLinkedMUnit ([61,0,1], [61,1,0]);\u00a0\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIFile.setLinkedMUnit('61,0,1', '61,1,0');\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"setLinkedMUnit(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/","title":"Read-write binary channel data","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#common-parameters-of-binary-read-and-write-commands","title":"Common parameters of binary read and write commands","text":"<ul> <li>handle The unique descriptor string of an open .mesc file, measurement session, measurement, or channel. For example, '52,0,1,1' means the .mesc file with ID 52, its measurement session with ID 0, its measurement unit with ID 1, and its channel number 1. Handles are displayed on the MESc GUI, too.</li> <li>fromDims A string enumerating the starting indices of a sub-hyperrectangle of a multidimensional data array. For example, in a 3-dimensional data array, '256,0,10' means index 256 in the first dimension, index 0 in the second dimension, and index 10 in the third dimension. Note that all indices are zero-based.</li> <li>countDims A string enumerating the dimensions of a sub-hyperrectangle of a multidimensional data array. For example, in a three-dimensional data array, '512,512,10' means 512 pixels in the first and second dimensions, and 10 frames in the third dimension.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#notes-for-using-binary-read-and-write-commands","title":"Notes for using binary read and write commands","text":"<ul> <li> <p>All indices in the parameter fromDims are zero-based. </p> </li> <li> <p>The parameters fromDims and countDims must have the same number of dimensions.</p> </li> <li> <p>If the parameters fromDims and countDims are not strings containing nonnegative integers separated by single commas, a corresponding error message is generated in the MESc log file with the tag &lt;MEScAPIServer&gt;, and the last error message can be retrieved with the FemtoAPI command 'FemtoAPIFile.getLastCommandError();'.</p> </li> <li> <p>In all binary read and write commands, raw data are always transferred using the data type of the channel specified by the handle, and the converted data are always transferred as double precision floating point numbers.</p> </li> <li> <p>If you write var before the return value of any FemtoAPI command, the result is not sent to the client as JSON or binary data. E.g.,</p> </li> <li> <p>var result = FemtoAPIFile.getProcessingState() stores the result on the server side, but</p> </li> <li> <p>result = FemtoAPIFile.getProcessingState() and FemtoAPIFile.getProcessingState() send the result to the client.</p> </li> <li> <p>The read(Raw)ChannelData commands described in the following section always return null to the client and store their results only on the server side.</p> </li> <li> <p>the sub-hyperrectangle described by the parameters fromDims and countDims must always have an intersection with the dimensions of the specified channel, e.g., they must fulfill the following conditions for all dimensions n (Otherwise, no data is transferred, and null is returned to the client):  </p> </li> <li> <p>(0&lt;=) fromDims(n) &lt; dimension(n) ,</p> </li> <li>1 &lt;= countDims(n) , </li> <li>countDims(n) can be the string 'Inf' , it means the whole image part after fromDims(n), so it is internally truncated as following: countDims(n) = dimension(n) - fromDims(n),</li> <li> <p>if fromDims(n) + countDims(n) &gt; dimension(n), then countDims(n) is truncated internally so that fromDims(n) + countDims(n) = dimension(n).</p> </li> <li> <p>The 'Inf' as countDims(n) parameter is useful when you want to read part of an image, but you don't know the exact dimensions of it. You only have to deal with the fromDims(n) parameter. </p> </li> <li> <p>In case of write functions, the data to write must have the same dimensions as the sub-hyperrectangle specfied by fromDims and (truncated) countDims parameters. Otherwise an error is returned and no data is written.</p> </li> <li> <p>readRawChannelDataToClientsBlob transfers raw binary data to the FemtoAPI client as a binary blob. This method is useful for quickly transferring large amounts of binary data from the server to the client. The read data type of raw data is the data type of the channel specified by the parameter handle.</p> </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#differences-in-matlab","title":"Differences in Matlab","text":"<p>In the Matlab variant of these commands, the following differences are present: </p> <ul> <li> <p>Regarding the read channel data commands, only the read(Raw)ChannelDataToClientsBlob commands are wrapped, because of practical reasons. It returns image data as 3D (or 4D in case of volume scan) matlab array. Similarly, regarding the write channel data command, the write(Raw)ChannelDataFromAttachment command is wrapped. </p> </li> <li> <p>In case of reading converted data, Matlab function readChannelData() actually reads the raw data from server, and uses the channel conversion values from processing state and converts it locally according to the given data type. </p> </li> <li> <p>input parameters are a bit different: </p> </li> <li> <p>readSubSlabSpec: instead of fromDims and countDims as strings, the sub-hyperrectangle of a multidimensional image array in read functions is specified as a cell containing numeric arrays: { [fromX : stepX : toX], [fromY : stepY : toY], [fromZ : stepZ : toZ] } in case of 3D channel data, and { [fromX : stepX : toX], [fromY : stepY : toY], [fromZ : stepZ : toZ], [fromT : stepT : toT] } in case of 4D channel data. For example: { [1:3:10], [2:5:300], [1:10] } means the image portion in X dimension from pixel 1 to 10, with step 3, in Y dimension from 2 to 300 with step 5, and in Z dimension, from 1 to 10. If it is not specified, the whole channel data is read.</p> </li> <li>channelHandle: as described above, a unique id of the requested channel, but given as a numeric array (e.g. [43 0 1 0] )</li> <li>in case of write functions, the image data is always given as input parameter, so the sub-hyperrectangle can be specified by fromDims and the input image data. (The dimensions of the given image array corresponds to the countDims parameter). </li> <li>input parameters fromDims and readSubSlabSpec use Matlab indexing (begin with 1)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#femtoapifilereadrawchanneldatatoclientsblobhandle-fromdims-countdims","title":"FemtoAPIFile.readRawChannelDataToClientsBlob(handle, fromDims, countDims)","text":"<p>Transfers raw binary data to the FemtoAPI client as a binary blob. This method is useful for quickly transferring large amounts of binary data from the server to the client. The read data type of raw data is the data type of the channel specified by the parameter handle.</p> <p>Return value: In case of a successful read, the server returns the binary data of the requested sub-hyperrectangle, and the JavaScript engine returns a JSON object with the size of the read data.</p> <p>Otherwise, no binary data are received and the JS engine returns 0 as the data size.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#usage-in-matlab","title":"Usage in Matlab:","text":"<p>Firstly, you need to create a FemtoAPIProcessing object, as described  here (Tutorial: using the FemtoAPI Matlab client). After it, you can call this command as following: </p> <p>rawData = readRawChannelData(channelHandle, readSubSlabSpec)</p> <p>Input parameters:</p> <p>Required: </p> <ul> <li>channelHandle: numeric array, unique id of the requested channel (e.g. [43 0 1 0] )</li> </ul> <p>Optional:</p> <ul> <li>readSubSlabSpec: cell, that contains numeric arrays, which specifies a sub-hyperrectangle of a multidimensional image array. Instead of 'fromDims' and 'countDims', it uses the following format: { [fromX : stepX : toX], [fromY : stepY : toY], [fromZ : stepZ : toZ] } in case of 3D channel data, and { [fromX : stepX : toX], [fromY : stepY : toY], [fromZ : stepZ : toZ], [fromT : stepT : toT] } in case of 4D channel data. For example: { [1:3:10], [2:5:300], [1:10] } means the image portion in X dimension from pixel 1 to 10, with step 3, in Y dimension from 2 to 300 with step 5, and in Z dimension, from 1 to 10. If not specified, the whole channel data is read.</li> </ul> <p>Notes on readSubSlabSpec parameter: </p> <ul> <li>the fromD, stepD, toD parameters have to be positive integers, otherwise an error is returned.</li> <li>in case of 3D channel data, the image slab has to be specified in X, Y, Z dimensions, unless the channel contains only 1 frame, in this case, readSubSlabSpec can be { fromX : stepX : toX, fromY : stepY : toY } or { fromX : stepX : toX, fromY : stepY : toY, 1 }, otherwise an error is returned and no data is read.</li> <li>in case of 4D channel data (e.g. volume scan), the slab has to be specified in all 4 dimensions, otherwise an error is returned and no data is read.</li> <li>other than the cases listed, if the subslab dimension size is less than 3D or greater than 4D, an error is returned </li> </ul> <p>Returns the read raw data as 2D (channel contains only 1 frame), 3D, or 4D (in case of volume scan data) array. The read raw data type is the channel data type (uint16 or double).</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples","title":"Examples:","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.readRawChannelDataToClientsBlob('61,0,1,0', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = MEScAPIProcessing(); % connect to local server (MESc) \n\n% read raw channel data of measurement unit [61,0,1], from channel 0\nimRawData = femtoapiObj.readRawChannelData ([61,0,1,0]);\n\n% read part of image data: 1:512 pixels in X, 1:512 in Y, and 1:10 in Z dimension\nreadSubSlabSpec = {[1:512],[1:512],[1:10]}; \nimDataPartRaw = femtoapiObj.readRawChannelData ([61,0,1,0],readSubSlabSpec);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.readRawChannelDataToClientsBlob('61,0,1,0', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"Image size %d\" % simpleCmdParser.getJSEngineResult())\n    if simpleCmdParser.hasBinaryParts() == True:\n        for parts in simpleCmdParser.getPartList():\n            #print(parts.data())\n            print( \"Binary part sizes: %d\" % parts.size())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#femtoapifilereadchanneldatatoclientsblobhandle-fromdims-countdims","title":"FemtoAPIFile.readChannelDataToClientsBlob(handle, fromDims, countDims)","text":"<p>The converted binary data is transferred from the server to the FemtoAPI client as a binary blob. The data type is double.</p> <p>Return value: The same as in the 'raw' case, but the converted binary data are returned from the server.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>Firstly, you need to create a FemtoAPIProcessing object, as described  here (Tutorial: using the FemtoAPI Matlab client). After it, you can call this command as following: </p> <p>convertedData = femtoapiObj.readChannelData(channelHandle, readDataType, readSubSlabSpec)</p> <p>Input arguments:</p> <p>Required: </p> <ul> <li>channelHandle: same as described at readRawChannelData command</li> <li>readDataType: data type of channel specified by 'channelHandle'. It can be 'uint16' or 'double'. </li> </ul> <p>Optional: </p> <ul> <li>readSubSlabSpec: same as described at readRawChannelData command</li> </ul> <p>Returns the converted image data.</p> <p>Note: This function internally reads the raw channel data from server in the channel data type, then converts it locally according to the given read data type ( 'readDataType' ).</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_1","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.readChannelDataToClientsBlob('61,0,1,0', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = MEScAPIProcessing(); % connect to local server (MESc) \n\n% read raw channel data of measurement unit [61,0,1], from channel 0\nimRawData = femtoapiObj.readChannelData ([61,0,1,0],'uint16');\n\n% read part of image data: 1:512 pixels in X, 1:512 in Y, and 1:10 in Z dimension\nreadSubSlabSpec = {[1:512],[1:512],[1:10]}; \nreadDataType = 'double'; % it can be 'double' or 'uint16'\nimDataPartRaw = femtoapiObj.readChannelData ([61,0,1,0],readDataType, readSubSlabSpec);\n\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.readChannelDataToClientsBlob('61,0,1,0', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"Image size %d\" % simpleCmdParser.getJSEngineResult())\n    if simpleCmdParser.hasBinaryParts() == True:\n        for parts in simpleCmdParser.getPartList():\n            #print(parts.data())\n            print( \"Binary part sizes: %d\" % parts.size())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#femtoapifilereadrawchanneldatajsonhandle-fromdims-countdims","title":"FemtoAPIFile.readRawChannelDataJSON(handle, fromDims, countDims)","text":"<p>The server sends the requested raw image data as a JSON string to the FemtoAPI client. No binary data are transferred.</p> <p>Return value: In case of a successful read, the specified raw values are returned to the client as a JSON array. Otherwise, an empty JSON array is returned. No binary data are sent from the server.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_2","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.readRawChannelDataJSON('61,0,0,0', '0,0,10', '512,512,1')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <p>This function is not present in the Matlab client. </p> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.readRawChannelDataJSON('61,0,0,0', '0,0,10', '512,512,1');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"readRawChannelDataJSON(): %s\" % simpleCmdParser.getJSEngineResult().encode('utf-8'))\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#femtoapifilereadchanneldatajsonhandle-fromdims-countdims","title":"FemtoAPIFile.readChannelDataJSON(handle, fromDims, countDims)","text":"<p>The server sends the requested converted image data as a JSON string to the FemtoAPI client. No binary data are transferred.</p> <p>Return value: In case of a successful read, the specified converted values are returned to the client as a JSON array. Otherwise, an empty JSON array is returned. No binary data are sent from the server.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_3","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.readChannelDataJSON('61,0,1,1', '0,0,3', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <p>This function is not present in the Matlab client. </p> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.readChannelDataJSON('61,0,1,1', '0,0,3', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"readChannelDataJSON(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-imgdata-femtoapifilereadrawchanneldatahandle-fromdims-countdims","title":"var imgData = FemtoAPIFile.readRawChannelData(handle, fromDims, countDims)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#imgdata-femtoapifilereadrawchanneldatahandle-fromdims-countdims","title":"imgData = FemtoAPIFile.readRawChannelData(handle, fromDims, countDims)","text":"<p>Reads raw channel data on the server side to a JavaScript variable. The read data type of raw data is the data type of the channel specified by the parameter handle.</p> <p>Return value: Both commands return the JSON result 'null' to the client side, and no binary data. The returned value is stored on the server side.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_4","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cvar data = FemtoAPIFile.readRawChannelData('61,0,1,0', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <p>This function is not present in the Matlab client. </p> <p>Python client code example: </p> <pre><code>command=\"var data = FemtoAPIFile.readRawChannelData('61,0,1,0', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"readRawChannelData(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-imgdata-femtoapifilereadchanneldatahandle-fromdims-countdims","title":"var imgData = FemtoAPIFile.readChannelData(handle, fromDims, countDims)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or_1","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#imgdata-femtoapifilereadchanneldatahandle-fromdims-countdims","title":"imgData = FemtoAPIFile.readChannelData(handle, fromDims, countDims)","text":"<p>Reads converted channel data on the server side into a JavaScript variable. The read data type of converted data is double.</p> <p>Both commands return the JSON result 'null' to the client side, and no binary data.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_5","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cvar data = FemtoAPIFile.readChannelData('61,0,1,0', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <p>This function is not present in the Matlab client. </p> <p>Python client code example: </p> <pre><code>command=\"var data = FemtoAPIFile.readChannelData('61,0,1,0', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"readChannelData(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-iswritten-femtoapifilewriterawchanneldatadata-handle-fromdims-countdims","title":"Var isWritten = FemtoAPIFile.writeRawChannelData(data, handle, fromDims, countDims)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or_2","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#iswritten-femtoapifilewriterawchanneldatadata-handle-fromdims-countdims","title":"isWritten = FemtoAPIFile.writeRawChannelData(data, handle, fromDims, countDims)","text":"<p>Writes raw channel data from the variable to the specified sub-hyperrectangle. The variable should be of the same type as the channel to write specified by handle, and the sub-hyperrectangle specified by fromDims and countDims must fulfill the conditions described in the introduction.</p> <p>The returned JSON object variable isWritten contains true and a 'Success' message, if the data was written successfully, otherwise it contains false and the error message itself. At the commands, in the former case, when var is before the isWritten variable, it is stored on the server side, and null is sent to the client, while in the latter case, the resulting variable is sent to the client as a JSON object.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_6","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cvar image = FemtoAPIFile.readRawChannelData('61,0,1,0', '0,0,0', '512,512,10'); FemtoAPIFile.writeRawChannelData(image,'61,0,1,1', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <p>This function is not present in the Matlab client. </p> <p>Python client code example: </p> <pre><code>command=\"var image = FemtoAPIFile.readRawChannelData('61,0,1,0', '0,0,0', '512,512,10'); FemtoAPIFile.writeRawChannelData(image,'61,0,1,1', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"read/write commands result: %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-iswritten-femtoapifilewritechanneldatadata-handle-fromdims-countdims","title":"var isWritten = FemtoAPIFile.writeChannelData(data, handle, fromDims, countDims)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or_3","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#iswritten-femtoapifilewritechanneldatadata-handle-fromdims-countdims","title":"isWritten = FemtoAPIFile.writeChannelData(data, handle, fromDims, countDims)","text":"<p>Writes the converted data from a variable. Otherwise the same is true as for the writeRawChannelData command. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_7","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cvar image = FemtoAPIFile.readChannelData('61,0,1,0', '0,0,0', '512,512,10'); FemtoAPIFile.writeChannelData(image,'61,0,1,1', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#usage-examples","title":"Usage examples:","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#read-and-write-raw-data","title":"Read and write raw data:","text":"<p>imgData = FemtoAPIFile.readRawChannelData('61,0,1,0', '0,0,0', '64,64,1');</p> <p>// reads data to a variable on the server side</p> <p>isWritten = FemtoAPIFile.writeRawChannelData(imgData, '62,0,0,0', '0,0,0', '64,64,1');</p> <p>// writes the imgData variable and the value of the isWritten variable (write success/failed) is returned to the client</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#read-and-write-converted-data","title":"Read and write converted data:","text":"<p>imgData = FemtoAPIFile.readChannelData('61,0,1,0', '0,0,0', '64,64,1');</p> <p>// reads data to a variable on the server side</p> <p>isWritten = FemtoAPIFile.writeChannelData(imgData, '62,0,0,0', '0,0,0', '64,64,1');</p> <p>// writes the imgData variable and the value of the isWritten variable (write success/failed) is returned to the client</p> <p>Matlab client code example: </p> <p>This function is not present in the Matlab client. </p> <p>Python client code example: </p> <pre><code>command=\"var image = FemtoAPIFile.readChannelData('61,0,1,0', '0,0,0', '512,512,10'); FemtoAPIFile.writeChannelData(image,'61,0,1,1', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"read/write commands result: %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#_1","title":"Read-write binary channel data","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-iswritten-femtoapifilewriterawchanneldatafromattachmenthandle-fromdims-countdims","title":"Var isWritten = FemtoAPIFile.writeRawChannelDataFromAttachment(handle, fromDims, countDims)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or_4","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#iswritten-femtoapifilewriterawchanneldatafromattachmenthandle-fromdims-countdims","title":"isWritten = FemtoAPIFile.writeRawChannelDataFromAttachment(handle, fromDims, countDims)","text":"<p>Writes the specified raw data from an attached binary data file. The attached binary data type must be the same as the channel data type of the specified data, and the fromDims and countDims parameters must fulfill the conditions described in the introduction.</p> <p>Return value: the same as for the write(Raw)ChannelData command.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#usage-in-matlab_2","title":"Usage in Matlab","text":"<p>Firstly, you need to create a FemtoAPIProcessing object, as described  here (Tutorial: using the FemtoAPI Matlab client). After it, you can call this command as following: </p> <p>femtoapiObj.writeRawChannelData(channelHandle, rawData, fromDims)</p> <p>Input arguments:</p> <p>Required: </p> <ul> <li>channelHandle: specifies the channel where to write 'rawData'. It must be a vector, e.g. [43,0,1,0] is the channel with index 0 in the measurement unit [43,0,1] </li> <li>rawData: specifies the image data to write as matlab array. </li> </ul> <p>Optional: </p> <ul> <li>fromDims: vector, specifies from which pixel the input rawData is written into the given channel, e.g. [0,0,0]. Details are in the introduction.</li> </ul> <p>Note: the written sub-hyperrectangle is specified by fromDims and rawData (the dimensions of rawData corresponds to the countDims parameter). </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_8","title":"Examples","text":"<p>C++ code example:</p> <pre><code>client-&gt;uploadAttachment(buffer);\n\nQString command = \u201cresult= FemtoAPIFile.writeRawChannelDataFromAttachment('61,0,1,1', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = MEScAPIProcessing() % connect to local server\n\n\nwriteFromDims = [1,1,1];\nfemtoapiObj.writeRawChannelData ([61,0,1,1], imDataRaw, writeFromDims);\n</code></pre> <p>Python client code example: </p> <pre><code>client.uploadAttachment(buffer);\ncommand=\"result= FemtoAPIFile.writeRawChannelDataFromAttachment('61,0,1,1', '0,0,0', '512,512,10');\"\nsimpleCmdParser=client.sendJSCommand(command)\n\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"writeRawChannelDataFromAttachment(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#_2","title":"Read-write binary channel data","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-iswritten-femtoapifilewritechanneldatafromattachmenthandle-fromdims-countdims","title":"var isWritten = FemtoAPIFile.writeChannelDataFromAttachment(handle, fromDims, countDims)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or_5","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#iswritten-femtoapifilewritechanneldatafromattachmenthandle-fromdims-countdims","title":"isWritten = FemtoAPIFile.writeChannelDataFromAttachment(handle, fromDims, countDims)","text":"<p>Writes the specified converted data from an attached binary data file. The attached binary data type must be the same as the channel data type of the specified data, and the fromDims and countDims parameters must fulfill the conditions described above.</p> <p>Return value: the same as for the write(Raw)ChannelData command.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#usage-in-matlab_3","title":"Usage in Matlab","text":"<p>Firstly, you need to create a FemtoAPIProcessing object, as described  here (Tutorial: using the FemtoAPI Matlab client). After it, you can call this command as following: </p> <p>femtoapiObj.writeChannelData(channelHandle, data, fromDims)</p> <p>The data parameter is the converted data to write. Otherwise, the same applies as in case of writeRawChannelData.</p> <p>Note: Internally, converted data is converted back to raw data first according to channel data type, then this raw data is sent to the server.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_9","title":"Examples","text":"<p>C++ code example:</p> <pre><code>client-&gt;uploadAttachment(buffer);\n\nQString command = \u201cresult= FemtoAPIFile.writeChannelDataFromAttachment('61,0,1,1', '0,0,0', '512,512,10')\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Notes:</p> <ul> <li>It is possible to read converted data and then write it back as raw data and vice versa.</li> <li>The data type of the written raw data must be the same as the channel data type (double or uint16), otherwise the writing operation fails.</li> <li>Converted data are always read and written in the data type double, while raw data are always read and written in the data type of the specified channel.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#var-result-femtoapifileaddlastframetomsessionsdestmsession-spacename","title":"var result = FemtoAPIFile.addLastFrameToMSession(sDestMSession, SpaceName)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#or_6","title":"or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#result-femtoapifileaddlastframetomsessionsdestmsession-spacename","title":"result = FemtoAPIFile.addLastFrameToMSession(sDestMSession, SpaceName)","text":"<p>Creates a new MUnit in the given MSession, and adds the frame on the immediate window (last frame of a measurement/live or snap) to it. If sDestMSession parameter is empty string, the current MSession is considered. Last frame is considered as the frame of immediate window of the space given by SpaceName, or from the default space if SpaceName is empty. Note: This is a synchronous operation, it waits until the new measurement unit is created and the immediate image is added to it, then returns the MUnit the node descriptor.</p> <p>Input parameters:</p> <ul> <li>sDestMSession: The index of the destination measurement session</li> <li>SpaceName: Space name</li> </ul> <p>Result:</p> <p>The node descriptor of the created measurement unit containing the immediate image.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#usage-in-matlab_4","title":"Usage in Matlab","text":"<p>result = femtoapiObj.addLastFrameToMSession(destMSessionHandle, spaceName)</p> <p>For more information about usage, see the introduction and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/read-write-binary-channel-data/#examples_10","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.addLastFrameToMSession('62,0', 'space1')\u201d; \nauto cmdParser=client-&gt;sendJSCommand(command); \n</code></pre> <p>*Matlab client code example:*** </p> <pre><code>femtoapiObj = FemtoAPIProcessing(); % connect to local server (MESc)  \nresult = femtoapiObj.addLastFrameToMSession ([62,0], 'space1'); \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.addLastFrameToMSession ('62,0', 'space1');\u201d \nsimpleCmdParser=client.sendJSCommand(command)  \nresultCode=simpleCmdParser.getResultCode() \n\nif resultCode &gt; 0: \n    print (\"Return code: %d\" % resultCode) \n    print (simpleCmdParser.getErrorText()) \nelse:   \n    print (\"moveMUnit (): %s\" % simpleCmdParser.getJSEngineResult()) \n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/setting-measurement-duration/","title":"Setting measurement duration","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/setting-measurement-duration/#_1","title":"Setting measurement duration","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/setting-measurement-duration/#var-succeeded-femtoapimicroscopesetmeasurementdurationduration-taskname-spacename","title":"var succeeded = FemtoAPIMicroscope.setMeasurementDuration(duration, taskName = '', spaceName = '')","text":"<p>Sets measurement duration for the given task and space. If taskName is empty, the current active task is considered. If spaceName is empty, default space ('space1') is considered. </p> <p>Input parameters: </p> <p>duration: double, the requested measurement duration </p> <p>taskName: optional, string, name of the measurement task to set the duration to. It must be 'resonant' or 'galvo'. If not given, the duration of the currently selected measurement will be set.</p> <p>spaceName: optional, string, name of the space. If not given, default space will be used.</p> <p>Note: the real measurement duration will be a bit greater than this value due to hardware delay. By calling the  getAcquisitionState() (Get acquisition state) command, you can inspect the 'durationEntered' and 'durationEstimated' json fields. The former is what you have given by setMeasurementDuration() command, and the latter will be the estimated duration, which is always greater than the entered duration. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/setting-measurement-duration/#matlab-usage","title":"Matlab usage","text":"<p>First, you need to create a FemtoAPIAcquisition object as described  here (Tutorial: using the FemtoAPI Matlab client). After it, usage is the same.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/setting-measurement-duration/#examples","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIMicroscope.setMeasurementDuration(10.1,'galvo')\u201d ;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition();\n% set duration of resonant measurement\nsucceeded = femtoapiObj.setMeasurementDuration(10,'resonant');\n\n% set duration of galvo measurement\nsucceeded = femtoapiObj.setMeasurementDuration(30,'galvo');\n\n% set duration of active measurement task\nsucceeded = femtoapiObj.setMeasurementDuration(20);\n\n% set active task's duration to infinite \nsucceeded = femtoapiObj.setMeasurementDuration(0);\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.setMeasurementDuration(10, 'resonant');\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"setMeasurementDuration(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/space-commands/","title":"Space commands","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/space-commands/#_1","title":"Space commands","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/space-commands/#var-result-femtoapifilesetpointstospacefilenodedescriptor-spacename-space1-bappend-false","title":"var result = FemtoAPIFile.setPointsToSpace(fileNodeDescriptor, spaceName = 'space1', bAppend = false)","text":"<p>Loades points from given measurement unit to space. </p> <p>Input parameters: </p> <ul> <li>fileNodeDescriptor: string, descriptor of the file node in the MESc GUI, in which the new background session and unit will be created. If it is not given or empty string, current file is considered. </li> <li>spaceName: string, space identifier space1 in most cases </li> <li>bAppend: boolean, if true the points are appended to the space, otherwise they will be overwritten</li> </ul> <p>Returns a boolean value: </p> <ul> <li>succeeded: Returns true if the measurement unit creation was successfully initiated, otherwise it returns false  </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/space-commands/#usage-in-matlab","title":"Usage in Matlab","text":"<p>result = femtoapiObj.setPointsToSpace(fileNodeDescriptor, spacename, bAppend)</p> <p>For more information about usage, see the introduction and the examples below.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/space-commands/#examples","title":"Examples","text":"<p>C++ code example </p> <code>QString command = \u201cFemtoAPIFile.setPointsToSpace('1,0,1',``'space1'``,true)\u201d;</code> <code>auto cmdParser=client-&gt;sendJSCommand(command);</code> <p>Matlab client code example: </p> <code>femtoapiObj = FemtoAPIProcessing();``% connect to local server (MESc)</code> <code>result = femtoapiObj.setPointsToSpace(``'1,0,1'``,'space1',true)</code> <p>Python client code example: </p> <code>command``=``\"FemtoAPIFile.setPointsToSpace(``256``,``256``,``'AO'``,'background',viewport);\u201d</code> <code>simpleCmdParser``=``client.sendJSCommand(command)</code> <code>resultCode``=``simpleCmdParser.getResultCode()</code> <code>if</code> <code>resultCode &gt;``0``:</code> <code>print` `(``\"Return code: %d\"` `%` `resultCode) `</code>print<code></code>(simpleCmdParser.getErrorText()) <code></code>else<code>: ` ```print` `(</code>\"setPointsToSpace(): %s\"<code></code>%<code></code>simpleCmdParser.getJSEngineResult()) `"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/","title":"Starting and stopping measurements","text":"<p>The measurement types that can be started and stopped through the FemtoAPI are as follows:</p> <ul> <li>Galvo XY scan</li> <li>Resonant XY scan</li> </ul> <p>The measurement start/stop functions are all asynchronous and have no input parameters.</p> <p>In case of these commands, the return value is true when the start/stop measurement task was successfully initiated, otherwise returns false and an error message.</p> <p>Start measurement commands fails when: </p> <ul> <li>a measurement has been started and is running yet</li> <li>the hardware is not ready for measure (because it is switched off, or a hardware error occurred)</li> </ul> <p>Stop measurement commands fails when: </p> <ul> <li>the hardware is not ready for measure (because it is switched off, or a hardware error occurred)</li> <li>no measurement has been started </li> <li>a measurement has been started, but there was a hardware error during it (in this case, measurement stops automatically in MESc)</li> </ul> <p>Notes:</p> <ul> <li>It is advisable to check the microscope state right after a start measurement command has been successfully initiated, and returned true. If it shows \"Working\" state, the measurement is running properly.</li> <li>You can check the state of the microscope hardware with the  getMicroscopeState() (Get microscope state) command, whether it is running properly or not, and in the latter case, the cause of the error. </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#usage-in-matlab","title":"Usage in Matlab","text":"<p>The Matlab variants of these commands use the same syntax. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#var-success-femtoapimicroscopestartgalvoscansnapasync","title":"var success = FemtoAPIMicroscope.startGalvoScanSnapAsync()","text":"<p>UNSAFE operation.</p> <p>Starts a galvo XY scan snap asynchronously</p> <p>Return value: boolean, true when the measurement start command was successfully initiated, false otherwise.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#var-success-femtoapimicroscopestartgalvoscanasync","title":"var success = FemtoAPIMicroscope.startGalvoScanAsync()","text":"<p>UNSAFE operation.</p> <p>Starts a galvo XY scan asynchronously</p> <p>Return value: boolean, true when successful, otherwise false.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#_1","title":"Starting and stopping measurements","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#var-success-femtoapimicroscopestopgalvoscanasync","title":"var success = FemtoAPIMicroscope.stopGalvoScanAsync()","text":"<p>UNSAFE operation.</p> <p>Stops a galvo XY scan asynchronously.</p> <p>Return value: boolean, true when successful, otherwise false.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#var-success-femtoapimicroscopestartresonantscansnapasync","title":"var success = FemtoAPIMicroscope.startResonantScanSnapAsync()","text":"<p>UNSAFE operation.</p> <p>Starts a resonant scan snap asynchronously.</p> <p>Return value: boolean, true when successful, otherwise false.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#_2","title":"Starting and stopping measurements","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#var-success-femtoapimicroscopestartresonantscanasync","title":"var success = FemtoAPIMicroscope.startResonantScanAsync()","text":"<p>UNSAFE operation.</p> <p>Starts a resonant scan asynchronously</p> <p>Return value: boolean, true when successful, otherwise false.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#_3","title":"Starting and stopping measurements","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#var-success-femtoapimicroscopestopresonantscanasync","title":"var success = FemtoAPIMicroscope.stopResonantScanAsync()","text":"<p>UNSAFE operation.</p> <p>Stops a resonant scan asynchronously</p> <p>Return value: boolean, true when successful, otherwise false.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/starting-and-stopping-measurements/#examples","title":"Examples","text":"<p>These examples are </p> <p>C++ code example: </p> <pre><code>QString command = \u201cFemtoAPIMicroscope.startGalvoScanAsync()\u201d;\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition(); % connects to local server\nmescapiObj.startGalvoScanAsync(); % starts galvo measurement \n\n% poll microscope state to check whether measurement has started successfully or not -&gt; state should change to Workint state\nt = 0;\nmeasurementStarted = false;\nwhile(t &lt; 10)\n    % wait (max. around 10s) until microscope gets into Measure state    \n    if(mescapiObj.getMicroscopeState().microscopeState == MicroscopeState.Working)\n        measurementStarted = true;\n        break;\n    end\n    pause(1);\n    t = t + 1;\nend\n\n% if not in working state, some error happened\nif(~measurementStarted)\n    if(~isempty(microscopeState.lastMeasurementError)\n        error(strcat('Start measurement failed. Reason: ', ...\n            microscopeState.lastMeasurementError));\n    else\n        error('Start measurement failed.');\n    end\nend\n</code></pre> <p>Python client code example:</p> <pre><code>command=\"FemtoAPIMicroscope.startGalvoScanAsync();\"\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n\nif resultCode &gt; 0:\n    print (\"Return code: %d\" % resultCode)\n    print (simpleCmdParser.getErrorText())\nelse:   \n    print (\"startGalvoScanAsync(): %s\" % simpleCmdParser.getJSEngineResult())\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_1","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-ismodified-femtoapifilemodifyconversionsconversionname-dscale-doffset-bsave-false","title":"var isModified = FemtoAPIFile.modifyConversion(sConversionName, dScale, dOffset, bSave = false)","text":"<p>Modifies conversion in MESc conversion manager to the given value, which can be saved to file if requested.</p> <p>Conversion is given by its name, and its type can only be identical or linear, otherwise this function returns false. </p> <p>Input parameters:</p> <ul> <li>sConversionName: string, name of the conversion, as it can be seen in MESc conversion manager. </li> <li>dScale: double, the new scale to set </li> <li>dOffset: double, the new offset to set</li> <li>bSave: boolean, if true, the conversion is saved to disk if it has been modified. Otherwise, the specified conversion modified only in memory. Default value is false.</li> </ul> <p>Returns: true if the named conversion's scale and offset has been successfully modified, </p> <p>false otherwise (e.g. if conversion name is invalid, or failed to save to the disk)</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#usage-in-matlab","title":"Usage in Matlab","text":"<p>First, a FemtoAPIProcessingobject must be created, as described  here (Tutorial: using the FemtoAPI Matlab client). Usage is the same as described above: </p> <p>isModified = femtoapiObj.modifyConversion(conversionName, scale, offset, bSave)</p> <p>Input parameters (required): </p> <ul> <li>conversionName: char array</li> <li>scale: double</li> <li>offset: double</li> </ul> <p>Input parameters (optional): </p> <ul> <li>bSave: logical value</li> </ul> <p>In case of any error, it throws an error type exception containing the error message, otherwise it returns true. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples","title":"Examples","text":"<p>C++ code example:</p> <pre><code>% set conversion PMT_UG parameters, without saving it \nQString\u00a0command\u00a0= \u201cFemtoAPIFile.modifyConversion('PMT_UG',2.0,1.1,false)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client example: </p> <pre><code>femtoapiObj = FemtoAPIProcessing;\n\n% set conversion PMT_UG parameters, without saving it \nfemtoapiObj.modifyConversion('PMT_UG',2.0,1.1,false);\u00a0\n</code></pre> <p>Python client example: </p> <pre><code>command=\"FemtoAPIFile.modifyConversion('PMT_UG', '2.0', '1.1', false)\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.modifyConversion(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_2","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-result-femtoapifilegetstatusscommandid","title":"var result = FemtoAPIFile.getStatus(sCommandID)","text":"<p>Gets status of an asynchronous file operation based on their command ID. You can get the command ID as the returned value of any asynchronous file operation command, if it was successfully initiated.</p> <p>It returns a json with the following fields: </p> <ul> <li>isPending: bool value, true if the requested file operation is in progress, false if it has been ended or if no such command ID exists.</li> <li>error: contains error information. It is empty string if no error has happened.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#usage-in-matlab_1","title":"Usage in Matlab","text":"<p>First create a FemtoAPIProcessingobject as described  here (Tutorial: using the FemtoAPI Matlab client). You can use it the same way as described above:</p> <p>result = femtoapiObj.getStatus(commandID) </p> <p>where commandID is a Matlab char array, and 'result' is the returned json from server parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_1","title":"Examples","text":"<p>C++ code example </p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.saveFileAsync()\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\nif (!cmdParser) {\n    qDebug()&lt;&lt;\"Can't create result parser!\";\n    return -1;\n}\nif (cmdParser-&gt;getResultCode()!=0) {\n    qDebug()&lt;&lt;cmdParser-&gt;getErrorText();\n    return -1;\n}\n\nQString result=cmdParser-&gt;getJSEngineResult().toString();\n\n// parse command result\nQJsonParseError error;\nQJsonDocument doc = QJsonDocument::fromJson(json.toUtf8(), &amp;error);\nif (doc.isNull())\n{\n    qDebug()&lt;&lt;\"Can't parse result!\";\n    return -1;\n}\nQJsonObject resObj = doc.object();\nQString commandID = resObj.value(\"id\") // get command ID \nQString\u00a0command\u00a0= \"FemtoAPIFile.getStatus(\" + commandID + \")\";\u00a0\n\n// get status \ncmdParser=client-&gt;sendJSCommand(command);\u00a0\nresult=cmdParser-&gt;getJSEngineResult().toString();\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\n\nresult = femtoapiObj.saveFileAsync(); % saves current file\ncommandID = result.id;\nsucceed = result.succeeded\ncurrFileHandle = femtoapiObj.getCurrentFileHandle\n\n% polling status while save operation is pending\nprocessing = true;\nif(succeed)\n    while(processing)\n        status = femtoapiObj.getStatus(commandID)\n        processing = status.isPending == 1\n        pause(0.1)\n    end\nend\n\nstatus = femtoapiObj.getStatus(commandID)\nif(~isempty(status.error))\n    disp(strcat(\"Error during asynchron save operation: \", status.error)) % in \u00a0\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.saveFileAsync()\"\nsimpleCmdParser=ws.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: \" + str(resultCode))\n    print (simpleCmdParser.getErrorText())\nelse:\n    cmdResult = json.loads(simpleCmdParser.getJSEngineResult())\n    print (\"Filesave success: \" + str(cmdResult[\"succeeded\"]))\n\ncommandId = cmdResult[\"id\"]\n\ncommand=\"FemtoAPIFile.getStatus('\" + str(commandId) + \"')\nsimpleCmdParser=client.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\nif resultCode &gt; 0:\n    print (\"Return code: \" + str(resultCode))\n    print (simpleCmdParser.getErrorText())\nelse:\n    cmdResult = simpleCmdParser.getJSEngineResult()\n    print (\"getStatus success:\" + str(cmdResult))\n\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-result-femtoapifilegetstatus","title":"var result = FemtoAPIFile.getStatus()","text":"<p>Gets the status of currently opened files. </p> <p>It returns the following json::</p> <p>openedFilesStatus: json array holding status information of currently opened files. It contains json objects with the following fields:</p> <ul> <li>fileIndex: file index (or file handle)</li> <li>lastCommandID: id of the last asynchronous command issued on the file</li> <li>fileStatus: status of the file, equal to one of the following values: \"OK\", \"FileDoesNotExist\", \"CopyCancelled\", \"UnspecifiedError\"</li> <li>isPendingFileOperation: true if there is currently a pending operation on the file, false otherwise</li> <li>lastError: last error on file</li> </ul> <p>lastFileOpenError: json object holding error information on the last asynchronous file operation (from GUI and API)</p> <ul> <li>commandID: last file operation command id (if file has been opened from GUI, commandID is empty string)</li> <li>error: error text or empty string in case of the last file open operation resulted with no error</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#usage-in-matlab_2","title":"Usage in Matlab","text":"<p>First create a FemtoAPIProcessingobject as described  here (Tutorial: using the FemtoAPI Matlab client). You can use it the same way as described above:</p> <p>result = femtoapiObj.getStatus() </p> <p>where 'result' is the returned json from server parsed into a Matlab struct.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_2","title":"Examples","text":"<p>C++ code example </p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.getStatus()\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\nif (!cmdParser) {\n    qDebug()&lt;&lt;\"Can't create result parser!\";\n    return -1;\n}\nif (cmdParser-&gt;getResultCode()!=0) {\n    qDebug()&lt;&lt;cmdParser-&gt;getErrorText();\n    return -1;\n}\n\nQString result=cmdParser-&gt;getJSEngineResult().toString();\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nresult = femtoapiObj.getStatus(); % get status of all opened .mesc files (json is parsed into struct)\n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.getStatus(fullPath)\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.getStatus(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre> <p>Example output json (after two MESc files are opened from GUI successfully): </p> <pre><code>{\n    \"lastFileOpenError\": {\n        \"commandID\": \"\",\n        \"error\": [\n        ]\n    },\n    \"openedFilesStatus\": [\n        {\n            \"fileIndex\": 99,\n            \"fileStatus\": \"OK\",\n            \"isPendingFileOperation\": false,\n            \"lastCommandId\": \"\",\n            \"lastError\": \"\"\n        },\n        {\n            \"fileIndex\": 100,\n            \"fileStatus\": \"OK\",\n            \"isPendingFileOperation\": false,\n            \"lastCommandId\": \"\",\n            \"lastError\": \"\"\n        }\n    ]\n}\n\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_3","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-curvexysize-femtoapifilecurveinfomunithandle-curveidx","title":"var curveXYSize = FemtoAPIFile.curveInfo(mUnitHandle, curveIdx)","text":"<p>Gets measurement unit's curve XY data, and sends it the to client as binary blob. </p> <p>Input parameters: </p> <ul> <li>mUnitHandle: unique index of a measurement unit, converted to a string, e.g. '43,0,0' </li> <li>curveIdx: index of the curve within measurement unit. </li> </ul> <p>Returns the number of curve data ( (X,Y) pairs) in case when curve data has been sent successfully to the client, and an empty string in case of any error. </p> <p>Errors occur in the following cases: </p> <ul> <li>mUnitHandle is ill formatted</li> <li>there is no opened measurement unit with the specified handle</li> <li>there is no curve with the given index in the given measurement unit</li> <li>the file lock was not successful (because other concurrent file operation was running at that time)</li> <li>the file is being closed</li> </ul> <p>Note: valid curve indices can be obtained by issuing  FemtoAPIFile.getProcessingState() (Get processing state) command. Its output contains the curve metadata of the opened measurement units. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#matlab-usage","title":"Matlab usage","text":"<p>First, you need to create a FemtoAPIProcessing object as described  here (Tutorial: using the FemtoAPI Matlab client). After it, call the command: </p> <p>curveDataXY = femtoapiObj.curveInfo(mUnitHandle, curveIdx)</p> <p>where mUnitHandle is a matlab array instead of string, e.g. [45,0,0]. </p> <p>It returns the curve data in an Nx2 array, where the first column is the 'X' data, and second column is the 'Y' data of the curve. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_3","title":"Examples","text":"<p>C++ code example </p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIFile.curveInfo('34,0,0',0)\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIProcessing(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\ncurveXY = femtoapiObj.curveInfo ([34,0,1],0); \ncurveXY(1,1) % first X data \ncurveXY(1,2) % first Y data \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIFile.curveInfo('34,2,1','1')\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\n    cmdResult = {}\n    cmdResult.update({\"Result\": simpleCmdParser.getJSEngineResult()})\n    xData = []\n    yData = []\n    curveData = {\"xData\": xData, \"yData\": yData}\n\n    for parts in simpleCmdParser.getPartList():\n        size = int(parts.size() / 2)\n        binaryDataX = QByteArray()\n        binaryDataY = QByteArray()\n        binaryDataX.append(parts[:size])\n        binaryDataY.append(parts[size:])\n\n        stream = QDataStream(binaryDataX)\n        stream.setByteOrder(QDataStream.ByteOrder.LittleEndian)\n        while not stream.atEnd():\n            floatData = stream.readDouble()\n            curveData[\"xData\"].append(floatData) \n        stream = QDataStream(binaryDataY)\n        stream.setByteOrder(QDataStream.ByteOrder.LittleEndian)\n        while not stream.atEnd():\n            floatData = stream.readDouble()\n            curveData[\"yData\"].append(floatData)\n\n        print( \"Binary part with size: \" + str(parts.size()))\n    cmdResult.update({\"CurveData\": curveData})\n    # cmdResult[\"Result\"] holds the number of curve data ( (X,Y) pairs) while cmdResult[\"CurveData\"] holds the actual data\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.curveInfo(): %s\" %\u00a0cmdResult[\"Result\"])\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_4","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-success-femtoapimicroscopesetfocusingmodefocusingmode-spacename","title":"var success = FemtoAPIMicroscope.setFocusingMode(focusingMode, spaceName = '')","text":"<p>UNSAFE command</p> <p>Switches to the given focusing mode 'focusingMode', if it is valid. </p> <p>Input parameters: </p> <ul> <li>focusingMode: string, valid values are obtained by the output of getFocusingModes() command</li> <li>spaceName: string, name of the space, if empty string, default space (\"space1\") is considered</li> </ul> <p>Returns true if successfully switched to the requested focusing mode, </p> <p>false in case of any errors. </p> <p>Errors occur in the following cases: </p> <ul> <li>input parameters are ill formatted or the given spaceName or focusing mode does not exist</li> <li>handwheel is locked </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#matlab-usage_1","title":"Matlab usage","text":"<p>First, you need to create a FemtoAPIAcquisition object as described  here (Tutorial: using the FemtoAPI Matlab client). After it, usage is the same as described above.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_4","title":"Examples","text":"<p>First, call getFocusingModes() before this command, to obtain configured and valid focusing modes.</p> <p>C++ code example </p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIMicroscope.setFocusingMode('Standard')\u201d;\u00a0// in case if 'Standard' is a valid mode\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIAcquisition(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nsucceeded = femtoapiObj.setFocusingMode('Virtual'); % in case if 'Virtual' is a valid mode \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.setfocusingMode('Virtual')\u201d\u00a0// in case if 'Virtual' is a valid mode\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIMicroscope.setfocusingMode(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_5","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-result-femtoapimicroscopegetfocusingmodesspacename","title":"var result = FemtoAPIMicroscope.getFocusingModes(spaceName = '')","text":"<p>UNSAFE command. </p> <p>Gets the available (configured) focusing modes for the specified space in json array, as it can be seen in the MESc GUI. If space name is not given, default space ('space1') is considered.</p> <p>In case of any error, an empty json array and an error message is returned.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#matlab-usage_2","title":"Matlab usage","text":"<p>First, you need to create a FemtoAPIAcquisition object as described  here (Tutorial: using the FemtoAPI Matlab client). After it, call the command: </p> <p>focusingModes = femtoapiObj.getFocusingModes()</p> <p>where the returned value is a string array. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_5","title":"Examples","text":"<p>C++ code example </p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIMicroscope.getFocusingModes()\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIAcquisition(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nfocusingModes = femtoapiObj.getFocusingModes(); \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getFocusingModes()\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIMicroscope.getFocusingModes(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_6","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-protocol-femtoapimicroscopegetactiveprotocol","title":"var protocol = FemtoAPIMicroscope.getActiveProtocol()","text":"<p>Gets the active protocol in json. This json contains information about:</p> <ul> <li>currently active user waveforms, channels, and patterns</li> <li>which waveform is currently set to be displayed on which channels</li> <li>display order and timing of the waveforms</li> <li>pattern metadata: path description, path order, cycle time, etc. </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#matlab-usage_3","title":"Matlab usage","text":"<p>First, you need to create a FemtoAPIAcquisition object as described  here (Tutorial: using the FemtoAPI Matlab client). After it, call the command: </p> <p>protocol= femtoapiObj.getActiveProtocol()</p> <p>where 'protocol' is the returned json from server parsed into a nested struct. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_6","title":"Examples","text":"<p>C++ code example </p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIMicroscope.getActiveProtocol()\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client code example: </p> <pre><code>femtoapiObj\u00a0=\u00a0FemtoAPIAcquisition(); %\u00a0connect\u00a0to\u00a0local server (MESc)\u00a0\u00a0\u00a0\nprotocol = femtoapiObj.getActiveProtocol(); \n</code></pre> <p>Python client code example: </p> <pre><code>command=\"FemtoAPIMicroscope.getActiveProtocol()\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIMicroscope.getActiveProtocol(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre> <p>Example output: </p> <pre><code>{\n    \"beginCut\": 0,\n    \"lastModified\": \"2020-04-15T14:01:42\",\n    \"measurementLength\": 0.2,\n    \"modifiedBy\": \"szalnor\",\n    \"name\": \"Default protocol\",\n    \"protocolId\": \"{bfa51e87-5084-4815-a8fa-88c84635ce12}\",\n    \"runtimeUniqueIndex\": \"\",\n    \"timelines\": [\n        {\n            \"channel\": {\n                \"channelID\": \"{94a61449-e21f-4aaa-bc6b-5878a9a1dafd}\",\n                \"channelType\": 2,\n                \"color\": \"#008b8b\",\n                \"dataType\": 0,\n                \"deviceName\": \"PatternSwitch\",\n                \"direction\": 2,\n                \"displayName\": \"Pattern switch\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 1,\n                \"hint\": 0,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"PATTERN_SWITCH_VIRTUAL_CHANNEL\",\n                \"lastModified\": \"2020-02-06T16:48:46\",\n                \"maximumValue\": 1,\n                \"minimumValue\": 0,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 0,\n                \"sourceType\": 0,\n                \"unitName\": \"On/off\"\n            },\n            \"curveColor\": \"#008b8b\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:25\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{42eac861-cad0-4d4f-bbe1-5c3e5b59dbde}\",\n            \"timelineObjects\": [\n                {\n                    \"lastModified\": \"2020-02-11T15:57:25\",\n                    \"modifiedBy\": \"szalnor\",\n                    \"objectType\": 1,\n                    \"parameters\": \"\",\n                    \"pattern\": {\n                        \"cyclePeriod\": 100,\n                        \"lastModified\": \"2020-02-11T15:57:25\",\n                        \"modifiedBy\": \"szalnor\",\n                        \"name\": \"Default immediate pattern space1\",\n                        \"paths\": [\n                            {\n                                \"label\": \"3\",\n                                \"lastModified\": \"2020-02-11T15:57:25\",\n                                \"modifiedBy\": \"szalnor\",\n                                \"pathID\": \"{2848cb00-faca-49c8-b9c2-7149eeb095b1}\",\n                                \"pathOrder\": 1,\n                                \"pathType\": 3,\n                                \"spiralAngleInRad\": 0,\n                                \"spiralEnd\": \"[0,0,0]\",\n                                \"spiralNormalVector\": \"[0,0,0]\",\n                                \"spiralRadius\": 1,\n                                \"spiralScale\": 1,\n                                \"spiralStart\": \"[0,0,0]\",\n                                \"spiralStepInRad\": 1,\n                                \"spiralZeroAngleVector\": \"[0,0,0]\",\n                                \"splineStepSize\": 1,\n                                \"transformMatrix\": \"[[1,0,0,43.2584],[0,1,0,-43.2489],[0,0,1,0],[0,0,0,1]]\",\n                                \"veritces3D\": \"[[-259.55,-27.288,0],[-216.292,298.108,0],[177.154,302.227,0]]\"\n                            }\n                        ],\n                        \"patternID\": \"{3d932c00-a391-4de7-99fa-0787a0ceeafd}\",\n                        \"space\": {\n                            \"lastModified\": \"2020-02-06T16:48:47\",\n                            \"modifiedBy\": \"szalnor\",\n                            \"name\": \"space1\",\n                            \"spaceID\": \"space1\"\n                        },\n                        \"sumOfPathLength\": 0\n                    },\n                    \"startAtMs\": 0,\n                    \"timelineObjectID\": \"{e267f1f0-932c-4300-8adb-ec66d6b70fca}\"\n                }\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{1fb91880-983f-4523-b77a-30d4ea3fbdfe}\",\n                \"channelType\": 1,\n                \"color\": \"#8b008b\",\n                \"dataType\": 0,\n                \"deviceName\": \"GearOutputCmdX\",\n                \"direction\": 2,\n                \"displayName\": \"Galvo cmd X\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 6,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"ch_galvo_cmdx\",\n                \"lastModified\": \"2020-02-06T16:48:47\",\n                \"maximumValue\": 400,\n                \"minimumValue\": -400,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 1,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#ffd700\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:25\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{34a2dd2b-c8f6-4cb5-ad01-cd1d9067f659}\",\n            \"timelineObjects\": [\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{beff7f4d-1fbf-4414-b66a-c35a04cef70e}\",\n                \"channelType\": 1,\n                \"color\": \"#ffd700\",\n                \"dataType\": 0,\n                \"deviceName\": \"GearOutputCmdY\",\n                \"direction\": 2,\n                \"displayName\": \"Galvo cmd Y\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 6,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"ch_galvo_cmdy\",\n                \"lastModified\": \"2020-02-06T16:48:47\",\n                \"maximumValue\": 400,\n                \"minimumValue\": -400,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 1,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#8b0000\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:25\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{a5aedc71-dc9c-4129-9b38-556ac3686c60}\",\n            \"timelineObjects\": [\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{90f2c483-580b-4f79-b7e1-618690281165}\",\n                \"channelType\": 1,\n                \"color\": \"#8b0000\",\n                \"dataType\": 0,\n                \"deviceName\": \"Laser473\",\n                \"direction\": 2,\n                \"displayName\": \"Laser 473\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 6,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"ch_laser_473\",\n                \"lastModified\": \"2020-02-06T16:48:46\",\n                \"maximumValue\": 100,\n                \"minimumValue\": 0,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 0,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#8fbc8f\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:25\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{46523ef5-0334-47c4-a483-6ff9a2eaf1d7}\",\n            \"timelineObjects\": [\n                {\n                    \"lastModified\": \"2020-02-11T15:57:25\",\n                    \"modifiedBy\": \"szalnor\",\n                    \"objectType\": 0,\n                    \"parameters\": \"{\\\"duration\\\":1500,\\\"waveformLoop\\\":true}\",\n                    \"startAtMs\": 0,\n                    \"timelineObjectID\": \"{514f0faa-030a-436f-8da9-c095eae601be}\",\n                    \"wave\": {\n                        \"amplitude\": 1,\n                        \"duration\": 1500,\n                        \"dutyCycle\": 50,\n                        \"frequency\": 100,\n                        \"lastModified\": \"2020-02-11T15:57:26\",\n                        \"modifiedBy\": \"szalnor\",\n                        \"name\": \"1111\",\n                        \"phase\": 0,\n                        \"samplesPerSecond\": 1000,\n                        \"waveCurves\": [\n                            {\n                                \"curve\": \"AAAAMgAAACYAWQBBAHgAaQBzAFAAbwBzAEQAZQBiAHUAZwBTAHQAcgBpAG4AZwAAAAoAAAAACABMAGUAZgB0AAAAEABZAEEAeABpAHMAUABvAHMAAAACAAAAAAAAAAAmAFgAQQB4AGkAcwBQAG8AcwBEAGUAYgB1AGcAUwB0AHIAaQBuAGcAAAAKAAAAAAwAQgBvAHQAdABvAG0AAAAQAFgAQQB4AGkAcwBQAG8AcwAAAAIAAAAAAAAAACIAVgBlAGMAVgBhAHIAaQBhAGIAbABlAFYAYQBsAHUAZQBzAAAACQAAAAAAAAAAIABWAGUAYwBWAGEAcgBpAGEAYgBsAGUATgBhAG0AZQBzAAAACQAAAAAAAAAAHgBWAGUAYwBWAGEAcgBpAGEAYgBsAGUARABpAHIAcwAAAAkAAAAAAAAAACwAUwB5AG0AYgBvAGwAUwB0AHkAbABlAEQAZQBiAHUAZwBTAHQAcgBpAG4AZwAAAAoAAAAADgBFAGwAbABpAHAAcwBlAAAAFgBTAHkAbQBiAG8AbABTAHQAeQBsAGUAAAACAAAAAAEAAAAUAFMAeQBtAGIAbwBsAFMAaQB6AGUAAAAGAD/wAAAAAAAAAAAAFgBTAHkAbQBiAG8AbABDAG8AbABvAHIAAAADAP8AAP8AAAAgAFIAZQBzAGEAbQBwAGwAaQBuAGcAUABvAGwAaQBjAHkAAAACAAAAAAAAAAAIAE4AYQBtAGUAAAAKAAAAAAgAMQAxADEAMQAAABIATABpAG4AZQBXAGkAZAB0AGgAAAAGAD/wAAAAAAAAAAAAKABMAGkAbgBlAFMAdAB5AGwAZQBEAGUAYgB1AGcAUwB0AHIAaQBuAGcAAAAKAAAAABQAUwBvAGwAaQBkACAATABpAG4AZQAAABIATABpAG4AZQBTAHQAeQBsAGUAAAACAAAAAAEAAAASAEwAaQBuAGUAQwBvAGwAbwByAAAAAwD/AAD/AAAADgBJAG4AZgBMAG8AbwBwAAAAAQAAAAAADgBIAGkAcwB0AG8AcgB5AAAACgAAAAAAAAAAGABEAG8AbQBhAGkAbgBQAG8AbABpAGMAeQAAAAIAAAAAAAAAACQAQwB1AHIAdgBlAEYAbwByAG0AYQB0AFYAZQByAHMAaQBvAG4AAAADAAAAAAIAAAAyAEMAdQByAHYAZQBEAGEAdABhAFkAVAB5AHAAZQBEAGUAYgB1AGcAUwB0AHIAaQBuAGcAAAAKAAAAABoAWQBWAGUAYwB0AG8AcgBEAG8AdQBiAGwAZQAAABwAQwB1AHIAdgBlAEQAYQB0AGEAWQBUAHkAcABlAAAAAgAAAAABAAAAWgBDAHUAcgB2AGUARABhAHQAYQBZAEMAdQByAHYAZQBEAGEAdABhAFkAVgBlAGMAdABvAHIARABvAHUAYgBsAGUARgBvAHIAbQBhAHQAVgBlAHIAcwBpAG8AbgAAAAMAAAAAAgAAAEIAQwB1AHIAdgBlAEQAYQB0AGEAWQBDAHUAcgB2AGUARABhAHQAYQBZAEYAbwByAG0AYQB0AFYAZQByAHMAaQBvAG4AAAADAAAAAAEAAABAAEMAdQByAHYAZQBEAGEAdABhAFkAQwB1AHIAdgBlAEQAYQB0AGEARgBvAHIAbQBhAHQAVgBlAHIAcwBpAG8AbgAAAAMAAAAAAQAAAEgAQwB1AHIAdgBlAEQAYQB0AGEAWQBDAG8AbgB2AGUAcgBzAGkAbwBuAFUAcABwAGUAcgBMAGkAbQBpAHQAVQBpAG4AdAAxADYAAAACAAAA//8AAABIAEMAdQByAHYAZQBEAGEAdABhAFkAQwBvAG4AdgBlAHIAcwBpAG8AbgBVAHAAcABlAHIATABpAG0AaQB0AEQAbwB1AGIAbABlAAAABgB/7////////wAAAEQAQwB1AHIAdgBlAEQAYQB0AGEAWQBDAG8AbgB2AGUAcgBzAGkAbwBuAFUAbgBpAHQATgBhAG0AZQBQAHIAZQBmAGkAeAAAAAoAAAAABAAgAFsAAABGAEMAdQByAHYAZQBEAGEAdABhAFkAQwBvAG4AdgBlAHIAcwBpAG8AbgBVAG4AaQB0AE4AYQBtAGUAUABvAHMAdABmAGkAeAAAAAoAAAAAAgBdAAAAOABDAHUAcgB2AGUARABhAHQAYQBZAEMAbwBuAHYAZQByAHMAaQBvAG4AVQBuAGkAdABOAGEAbQBlAAAACgAAAAAYAHUAbgBrAG4AbwB3AG4AIAB1AG4AaQB0AAAAMgBDAHUAcgB2AGUARABhAHQAYQBZAEMAbwBuAHYAZQByAHMAaQBvAG4AVABpAHQAbABlAAAACgAAAAAQAHUAbgB0AGkAdABsAGUAZAAAAEgAQwB1AHIAdgBlAEQAYQB0AGEAWQBDAG8AbgB2AGUAcgBzAGkAbwBuAEwAbwB3AGUAcgBMAGkAbQBpAHQAVQBpAG4AdAAxADYAAAACAAAAAAAAAABIAEMAdQByAHYAZQBEAGEAdABhAFkAQwBvAG4AdgBlAHIAcwBpAG8AbgBMAG8AdwBlAHIATABpAG0AaQB0AEQAbwB1AGIAbABlAAAABgD/7////////wAAADgAQwB1AHIAdgBlAEQAYQB0AGEAWQAvAEMAdQByAHYAZQBEAGEAdABhAFkAUgBhAHcARABhAHQAYQAAAAkAAAAABgAAAAYAAAAAAAAAAAAAAAAGAD/wAAAAAAAAAAAABgA/8AAAAAAAAAAAAAYAP/AAAAAAAAAAAAAGAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAADIAQwB1AHIAdgBlAEQAYQB0AGEAWABUAHkAcABlAEQAZQBiAHUAZwBTAHQAcgBpAG4AZwAAAAoAAAAAGgBYAFYAZQBjAHQAbwByAEQAbwB1AGIAbABlAAAAHABDAHUAcgB2AGUARABhAHQAYQBYAFQAeQBwAGUAAAACAAAAAAAAAABaAEMAdQByAHYAZQBEAGEAdABhAFgAQwB1AHIAdgBlAEQAYQB0AGEAWABWAGUAYwB0AG8AcgBEAG8AdQBiAGwAZQBGAG8AcgBtAGEAdABWAGUAcgBzAGkAbwBuAAAAAwAAAAACAAAAQgBDAHUAcgB2AGUARABhAHQAYQBYAEMAdQByAHYAZQBEAGEAdABhAFgARgBvAHIAbQBhAHQAVgBlAHIAcwBpAG8AbgAAAAMAAAAAAQAAAEAAQwB1AHIAdgBlAEQAYQB0AGEAWABDAHUAcgB2AGUARABhAHQAYQBGAG8AcgBtAGEAdABWAGUAcgBzAGkAbwBuAAAAAwAAAAABAAAASABDAHUAcgB2AGUARABhAHQAYQBYAEMAbwBuAHYAZQByAHMAaQBvAG4AVQBwAHAAZQByAEwAaQBtAGkAdABVAGkAbgB0ADEANgAAAAIAAAD//wAAAEgAQwB1AHIAdgBlAEQAYQB0AGEAWABDAG8AbgB2AGUAcgBzAGkAbwBuAFUAcABwAGUAcgBMAGkAbQBpAHQARABvAHUAYgBsAGUAAAAGAH/v////////AAAARABDAHUAcgB2AGUARABhAHQAYQBYAEMAbwBuAHYAZQByAHMAaQBvAG4AVQBuAGkAdABOAGEAbQBlAFAAcgBlAGYAaQB4AAAACgAAAAAEACAAWwAAAEYAQwB1AHIAdgBlAEQAYQB0AGEAWABDAG8AbgB2AGUAcgBzAGkAbwBuAFUAbgBpAHQATgBhAG0AZQBQAG8AcwB0AGYAaQB4AAAACgAAAAACAF0AAAA4AEMAdQByAHYAZQBEAGEAdABhAFgAQwBvAG4AdgBlAHIAcwBpAG8AbgBVAG4AaQB0AE4AYQBtAGUAAAAKAAAAABgAdQBuAGsAbgBvAHcAbgAgAHUAbgBpAHQAAAAyAEMAdQByAHYAZQBEAGEAdABhAFgAQwBvAG4AdgBlAHIAcwBpAG8AbgBUAGkAdABsAGUAAAAKAAAAABAAdQBuAHQAaQB0AGwAZQBkAAAASABDAHUAcgB2AGUARABhAHQAYQBYAEMAbwBuAHYAZQByAHMAaQBvAG4ATABvAHcAZQByAEwAaQBtAGkAdABVAGkAbgB0ADEANgAAAAIAAAAAAAAAAEgAQwB1AHIAdgBlAEQAYQB0AGEAWABDAG8AbgB2AGUAcgBzAGkAbwBuAEwAbwB3AGUAcgBMAGkAbQBpAHQARABvAHUAYgBsAGUAAAAGAP/v////////AAAAOABDAHUAcgB2AGUARABhAHQAYQBYAC8AQwB1AHIAdgBlAEQAYQB0AGEAWABSAGEAdwBEAGEAdABhAAAACQAAAAAGAAAABgAAAAAAAAAAAAAAAAYAQG9AAAAAAAAAAAAGAEBvYAAAAAAAAAAABgBAhtgAAAAAAAAAAAYAQIbgAAAAAAAAAAAGAECXcAAAAAAAAAAADgBDAG8AbQBtAGUAbgB0AAAACgAAAAAA\",\n                                \"lastModified\": \"2020-02-11T15:57:25\",\n                                \"modifiedBy\": \"szalnor\",\n                                \"partIndex\": 0,\n                                \"waveCurveID\": 180\n                            }\n                        ],\n                        \"waveID\": \"{bb39da8a-bb9d-480b-9f30-395eea24c168}\",\n                        \"waveMaxValue\": 1,\n                        \"waveMinValue\": 0,\n                        \"waveType\": 4,\n                        \"yOffset\": 0\n                    }\n                }\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{08aec2ac-c292-4882-b8f8-0abffea6b2bb}\",\n                \"channelType\": 1,\n                \"color\": \"#008b8b\",\n                \"dataType\": 0,\n                \"deviceName\": \"PMTGatingUG\",\n                \"direction\": 2,\n                \"displayName\": \"PMT Gating UG\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 6,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"ch_PMT_Gating_UG\",\n                \"lastModified\": \"2020-02-06T16:48:47\",\n                \"maximumValue\": 5,\n                \"minimumValue\": 0,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 0,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#008b8b\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:28\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{91eb7a0f-b7c4-4575-9348-bf41a6d88fda}\",\n            \"timelineObjects\": [\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{afc1edab-6581-4af0-affb-772b9c580102}\",\n                \"channelType\": 1,\n                \"color\": \"#00008b\",\n                \"dataType\": 0,\n                \"deviceName\": \"DummyOutput\",\n                \"direction\": 2,\n                \"displayName\": \"Shutter\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 4,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"ch_shutter\",\n                \"lastModified\": \"2020-02-06T16:48:46\",\n                \"maximumValue\": 1.7976931348623157e+308,\n                \"minimumValue\": -1.7976931348623157e+308,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 0,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#00008b\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:28\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{7c56b739-e5e2-4e64-a3b0-dece1d306d34}\",\n            \"timelineObjects\": [\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{8991c9c0-ba31-4663-8584-6de7974f71ca}\",\n                \"channelType\": 1,\n                \"color\": \"#ff8c00\",\n                \"dataType\": 0,\n                \"deviceName\": \"Sh3\",\n                \"direction\": 2,\n                \"displayName\": \"Shutter473\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 4,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"ch_shutter473\",\n                \"lastModified\": \"2020-02-06T16:48:46\",\n                \"maximumValue\": 1.79769e+308,\n                \"minimumValue\": -1.79769e+308,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 0,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#ff8c00\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:28\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{f23b1a3e-21d8-4f47-a577-7304e1c3202d}\",\n            \"timelineObjects\": [\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{31fc61f4-9b3e-4b5f-bd70-41338d125204}\",\n                \"channelType\": 1,\n                \"color\": \"#8fbc8f\",\n                \"dataType\": 0,\n                \"deviceName\": \"DummyOutput2\",\n                \"direction\": 2,\n                \"displayName\": \"CH CMDY\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 4,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"dummyOutput2\",\n                \"lastModified\": \"2020-02-06T16:48:46\",\n                \"maximumValue\": 1.7976931348623157e+308,\n                \"minimumValue\": -1.7976931348623157e+308,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 0,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#8fbc8f\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:28\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{0ec4007b-341c-41ee-b2a9-9e4e0cae7a0a}\",\n            \"timelineObjects\": [\n            ]\n        },\n        {\n            \"channel\": {\n                \"channelID\": \"{641288d0-49d8-4150-b9cf-43ae973c44fd}\",\n                \"channelType\": 1,\n                \"color\": \"#8a2be2\",\n                \"dataType\": 0,\n                \"deviceName\": \"DummyOutput3\",\n                \"direction\": 2,\n                \"displayName\": \"CH CmdY\",\n                \"enabled\": 1,\n                \"hideInputCurve\": 0,\n                \"hint\": 4,\n                \"hostName\": \"FEMTO-0212\",\n                \"identifier\": \"dummyOutput3\",\n                \"lastModified\": \"2020-02-06T16:48:46\",\n                \"maximumValue\": 1.7976931348623157e+308,\n                \"minimumValue\": -1.7976931348623157e+308,\n                \"modifiedBy\": \"szalnor\",\n                \"sampleRate\": 1000,\n                \"sourceType\": 0,\n                \"unitName\": \"\"\n            },\n            \"curveColor\": \"#8a2be2\",\n            \"curveHide\": 0,\n            \"enabled\": true,\n            \"lastModified\": \"2020-02-11T15:57:28\",\n            \"modifiedBy\": \"szalnor\",\n            \"timelineID\": \"{34955e58-5b4a-480d-8863-f2df320965de}\",\n            \"timelineObjects\": [\n            ]\n        }\n    ],\n    \"version\": \"1.0\"\n}\n\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_7","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-succeeded-femtoapimicroscopesetactivetaskandsubtasktaskname-subtaskname-timeseries","title":"var succeeded = FemtoAPIMicroscope.setActiveTaskAndSubTask(taskName, subTaskName = 'timeSeries')","text":"<p>UNSAFE command</p> <p>Sets the given measurement task and subtask. Task means the type of measurement, it can be resonant or galvo, and subtask is the measurement mode, it can be timeseries, Z-stack or volume scan. </p> <p>It does the same if you would select these tabs and sub tabs on the MESc GUI. </p> <p>Input parameters: </p> <p>taskName: string, name of the task to set. It can be 'resonant' or 'galvo', the MESc GUI changes to these tabs accordingly. </p> <p>subTaskName: string, optional parameter, name of the sub task to set. Its value can be on of the strings 'timeSeries', 'zStack' or 'volumeScan'. If not given, timeseries measurement will be selected on the MESc GUI by default. </p> <p>In case of success, it returns true, otherwise false. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#matlab-usage_4","title":"Matlab usage","text":"<p>You must create a FemtoAPIAcquisition object, after it, usage is the same as described above.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_7","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIMicroscope.setActiveTaskAndSubTask('resonant','zStack')\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition;\nsucceeded = femtoapiObj.setActiveTaskAndSubTask('galvo','zStack');\u00a0\n</code></pre> <p>Python client example: </p> <pre><code>command=\"FemtoAPIFile.setActiveTaskAndSubTask('galvo','zStack')\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.setActiveTaskAndSubTask(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_8","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-version-femtoapimicroscopegetcommandsetversion-or","title":"var version = FemtoAPIMicroscope.getCommandSetVersion() or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-version-femtoapifilegetcommandsetversion","title":"var version = FemtoAPIFile.getCommandSetVersion()","text":"<p>Gets the version of the FemtoAPI command set in string. Example output: \"v.1.0\". </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_8","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIMicroscope.getCommandSetVersion()\u201d;\u00a0\n// or QString\u00a0command\u00a0= \u201cFemtoAPIFile.getCommandSetVersion()\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition; % or femtoapiObj = FemtoAPIProcessing\nsucceeded = femtoapiObj.getCommandSetVersion();\u00a0\n</code></pre> <p>Python client example: </p> <pre><code>command=\"FemtoAPIFile.getCommandSetVersion()\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.getCommandSetVersion(): %s\" %\u00a0simpleCmdParser.getJSEngineResult())\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#_9","title":"Tools","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-lasterror-femtoapimicroscopegetlastcommanderror-or","title":"var lastError= FemtoAPIMicroscope.getLastCommandError() or","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#var-lasterror-femtoapifilegetlastcommanderror","title":"var lastError = FemtoAPIFile.getLastCommandError()","text":"<p>Gets the error information of the last issued command. It returns a json object with the following fields: </p> <ul> <li>ErrorCode: integer, code of the error. In case of no error, it is 0. </li> <li>ErrorText: string, the cause of the error</li> <li>ErrorType: string, type of the error, for example ParameterError, FileError, SystemError, NoError. </li> </ul> <p>Example output (in case of no error): </p> <pre><code>{\n    \"ErrorCode\": 0,\n    \"ErrorText\": \"\",\n    \"ErrorType\": \"eNoError\"\n}\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-command-reference/tools/#examples_9","title":"Examples","text":"<p>C++ code example:</p> <pre><code>QString\u00a0command\u00a0= \u201cFemtoAPIMicroscope.getLastCommandError()\u201d;\u00a0\n// or QString\u00a0command\u00a0= \u201cFemtoAPIFile.getLastCommandError()\u201d;\u00a0\nauto cmdParser=client-&gt;sendJSCommand(command);\n</code></pre> <p>Matlab client example: </p> <pre><code>femtoapiObj = FemtoAPIAcquisition; % or femtoapiObj = FemtoAPIProcessing\nsucceeded = femtoapiObj.getLastCommandError();\u00a0\n</code></pre> <p>Python client example: </p> <pre><code>command=\"FemtoAPIFile.getLastCommandError()\u201d\u00a0\nsimpleCmdParser=client.sendJSCommand(command)\u00a0\u00a0\n\nresultCode=simpleCmdParser.getResultCode()\u00a0\n\nif\u00a0resultCode\u00a0&gt; 0:\u00a0\n\u00a0\u00a0\u00a0 print (\"Return\u00a0code: %d\" %\u00a0resultCode)\u00a0\n\u00a0\u00a0\u00a0 print (simpleCmdParser.getErrorText())\u00a0\nelse:\u00a0\u00a0\u00a0\n\u00a0\u00a0\u00a0 print (\"FemtoAPIFile.getLastCommandError(): %s\" %\u00a0simpleCmdParser.getJSEngineResult()))\u00a0\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/","title":"The FemtoAPI library reference","text":"<ul> <li>APIWebSocketClient reference</li> <li>ReplyMessageParser reference</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/","title":"APIWebSocketClient reference","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/#bool-apiwebsocketclientconnecttoserver","title":"bool APIWebSocketClient::connectToServer()","text":"<p>Opens a WebSocket connection to the FemtoAPI server. It returns true, if the connection is established successfully, otherwise, it returns false.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/#void-apiwebsocketclientclose","title":"void APIWebSocketClient::close()","text":"<p>Close the WebSocket connection.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/#virtual-replymessageparser-apiwebsocketclientloginconst-qstring-username-const-qstring-password","title":"virtual ReplyMessageParser * APIWebSocketClient::login(const QString &amp;userName, const QString &amp;password)","text":"<p>Login to the FemtoAPI server using password-based authentication. The password is always transferred in an encoded form over the FemtoAPI connection.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/#virtual-replymessageparserreleaseptr-apiwebsocketclientsendjscommandconst-qstring-message","title":"virtual ReplyMessageParser::ReleasePtr APIWebSocketClient::sendJSCommand(const QString &amp;message)","text":"<p>Send a JavaScript command sequence to the FemtoAPI server. It returns a ReplyMessageParser object.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/#replymessageparser-apiwebsocketclientbinaryparser","title":"ReplyMessageParser * APIWebSocketClient::binaryParser()","text":"<p>Get a pointer to the binary parser object.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/apiwebsocketclient-reference/#void-apiwebsocketclientuploadattachmentqbytearray-attachment","title":"void APIWebSocketClient::uploadAttachment(QByteArray &amp;attachment)","text":"<p>Upload a binary attachment for sending.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/","title":"ReplyMessageParser reference","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#int-replymessageparsergetresultcode","title":"int ReplyMessageParser::getResultCode()","text":"<p>Get the error code of the last AbstractAPIClient command. The list of error codes:</p> <ul> <li>0: No error</li> <li>100: Server reply timed out (typical timeout value: 30 s).</li> <li>101: Unknown message type. This is an irrecoverable low-level protocol error.</li> <li>102: Bad request ID. This is an irrecoverable low-level protocol error.</li> <li>103: Can't get request ID. This is an irrecoverable low-level protocol error.</li> <li>104: Unhandled binary message. This is an irrecoverable low-level protocol error.</li> <li>210: Login name format error. The login name should be at least 3 characters long.</li> <li>211: Password format error. The password should be at least 5 characters long and must contain at least one capital letter, at least one number, and at least one symbol.</li> <li>212: Can't set login flag in the model. This should never happen.</li> <li>213: Server is busy. The binary data has not yet arrived in full.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#qstring-replymessageparsergeterrortext","title":"QString ReplyMessageParser::getErrorText()","text":"<p>Get a textual error description of the last AbstractAPIClient command. Useful for reporting errors to users.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#qvariant-replymessageparsergetjsengineresult","title":"QVariant ReplyMessageParser::getJSEngineResult()","text":"<p>Get the return value of a JavaScript command. The return value is usually a QString holding a JSON object.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#bool-replymessageparserhasbinaryparts","title":"bool ReplyMessageParser::hasBinaryParts()","text":"<p>Returns whether the latest function call returned binary data.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#bool-replymessageparserisinwaitstate","title":"bool ReplyMessageParser::isInWaitState()","text":"<p>Returns whether the binary parser is still waiting to receive all data.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#bool-replymessageparseriscompleted","title":"bool ReplyMessageParser::isCompleted()","text":"<p>Returns whether we have received all binary data parts.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#qbytearraylist-replymessageparsergetpartlist","title":"QByteArrayList &amp;ReplyMessageParser::getPartList()","text":"<p>Get the returned binary data sliced into one or more portions.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-library-reference/replymessageparser-reference/#void-replymessageparserclear","title":"void ReplyMessageParser::clear()","text":"<p>Reset the message parser.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/","title":"The FemtoAPI Matlab client","text":"<ul> <li>FemtoAPI Matlab demos</li> <li>FemtoAPI Matlab function reference</li> <li>Helper classes and functions</li> <li>Prerequisites and setting up the environment</li> <li>Tutorial: using the FemtoAPI Matlab client</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/","title":"FemtoAPI Matlab function reference","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#command-reference","title":"Command reference","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#femtoapiprocessing-class","title":"FemtoAPIProcessing class","text":"<p>Get/set processing state: </p> <ul> <li>getProcessingState( obj ) (Get processing state)</li> <li>setProcessingState( obj, processingState ) (Get processing state)</li> </ul> <p>Read/write channel data: </p> <ul> <li>rawChannelData = readRawChannelData( obj, channelHandle, varargin ) (Read-write binary channel data)</li> <li>channelData = readChannelData( obj, channelHandle, readDataType, varargin ) (Read-write binary channel data)</li> <li>writeRawChannelData( obj, channelHandle, rawData, varargin ) (Read-write binary channel data)</li> <li>writeChannelData( obj, channelHandle, data, varargin ) (Read-write binary channel data)</li> <li>result = addLastFrameToMSession( obj, destMSessionHandle, spaceName ) (Read-write binary channel data)</li> </ul> <p>File operations: </p> <ul> <li>result = createNewFile(obj) (Handling measurement files)</li> <li>succeeded = setCurrentFile(obj, handle) (Handling measurement files)</li> <li>result = openFilesAsync( obj, fileNames ) (Handling measurement files)</li> <li>result\u00a0= saveFileAsync( obj, varargin ) (Handling measurement files)</li> <li>result\u00a0= saveFileAsAsync( obj, newAbsolutePath, varargin ) (Handling measurement files)</li> <li>result= closeFileNoSaveAsync( obj, varargin ) (Handling measurement files)</li> <li>result= closeFileAndSaveAsync( obj, varargin ) (Handling measurement files)</li> <li>result\u00a0= closeFileAndSaveAsAsync( obj, varargin ) (Handling measurement files)</li> </ul> <p>Measurement unit operations: </p> <ul> <li>result = createTimeSeriesMUnit( obj, xDim, yDim, taskXMLParameters, viewportJson, varargin ) (MUnit manipulations)</li> <li>result = createZStackMUnit( obj, xDim, yDim, zDim, taskXMLParameters, viewportJson, varargin ) (MUnit manipulations)</li> <li>result = extendMUnit( obj, mUnitHandle, frameCount ) (MUnit manipulations)</li> <li>result = copyMUnit( obj, sourceMImageHandle, destMItemHandle, varargin ) (MUnit manipulations)</li> <li>result = moveMUnit( obj, sourceMImageHandle, destMItemHandle ) (MUnit manipulations)</li> <li>result = deleteMUnit( obj, mUnitHandle ) (MUnit manipulations)</li> </ul> <p>Channel operations: </p> <ul> <li>result = addChannel( obj, mUnitHandle, channelName ) (Add and remove channels)</li> <li>result = deleteChannel( obj, channelHandle ) (Add and remove channels)</li> </ul> <p>Tools: </p> <ul> <li>curveData = getCurve( obj, measurementHandle, curveIdx ) (Tools)</li> <li>isModified = modifyConversion( obj, conversionName, scale, offset, varargin ) (Tools)</li> <li>json = getStatus(obj, varargin) (Tools)</li> <li>version = getCommandSetVersion() (Tools)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#femtoapiacquisition-class","title":"FemtoAPIAcquisition class","text":"<p>Getting states: </p> <ul> <li>acquisitionState = getAcquisitionState( obj ) (Get acquisition state)</li> <li>result = getMicroscopeState( obj ) (Get microscope state)</li> </ul> <p>Start/stop measurements, setting duration:</p> <ul> <li>isStopped = startGalvoScanSnapAsync(obj) (Starting and stopping measurements)</li> <li>isStarted = startGalvoScanAsync(obj) (Starting and stopping measurements)</li> <li>isStopped = stopGalvoScanAsync(obj) (Starting and stopping measurements)</li> <li>isStarted = startResonantScanSnapAsync(obj) (Starting and stopping measurements)</li> <li>isStarted = startResonantScanAsync(obj) (Starting and stopping measurements)</li> <li>isStoppped = stopResonantScanAsync(obj) (Starting and stopping measurements)</li> <li>succeeded = setMeasurementDuration(obj, duration) (Setting measurement duration)</li> </ul> <p>Manipulating axis positions: </p> <ul> <li>axisPositions = getAxisPositions(obj) (Manipulating axis positions)</li> <li>axisPosition = getAxisPosition(obj,axisName,varargin) (Manipulating axis positions)</li> <li>succeeded = setAxisPosition(obj, axisName, position,varargin) (Manipulating axis positions)</li> <li>succeeded = doZero(obj, axisName,varargin) (Manipulating axis positions)</li> <li>isMoving = isAxisMoving(obj, axisName, varargin) (Manipulating axis positions)</li> </ul> <p>Get/set Z-stack device intensity depth profile: </p> <ul> <li>zStackLaserIntensityProfile = getZStackLaserIntensityProfile(obj,varargin) (Get-set ZStack PMT/laser intensity device depth profile)</li> <li>succeeded = setZStackLaserIntensityProfile(obj,zStacklaserIntensities) (Get-set ZStack PMT/laser intensity device depth profile)</li> </ul> <p>Get/set imaging window parameters: </p> <ul> <li>imagingWindowParameters = getImagingWindowParameters(obj,varargin) (Get-set imaging window (viewport) parameters)</li> <li>succeeded = setImagingWindowsParameters(obj,imagingParams) (Get-set imaging window (viewport) parameters)</li> </ul> <p>Get/set device values: </p> <ul> <li>deviceValues = getPMTAndLaserIntensityDeviceValues(obj) (Get-set PMT/Laserintensity device values)</li> <li>succeeded = setPMTAndLaserIntensityDeviceValues(obj,deviceValues) (Get-set PMT/Laserintensity device values)</li> </ul> <p>Tools: </p> <ul> <li>succeeded = setFocusingMode(obj, focusingMode, varargin) (Tools)</li> <li>focusingModes = getFocusingModes(obj, varargin) (Tools)</li> <li>protocol = getActiveProtocol(obj) (Tools)</li> <li>succeeded = setActiveTaskAndSubTask(obj, taskName, subTaskName = 'timeSeries') (Tools)</li> <li>version = getCommandSetVersion() (Tools)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#helper-functions","title":"Helper functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#femtoapiprocessing-class_1","title":"FemtoAPIProcessing class","text":"<ul> <li>commonCurvesMetaDataTable = getCommonCurvesMetaDataTable( obj, measurementHandleArray, channelType ) (Helper classes and functions)</li> <li>exportedFileNames = batchExportCurvesTxt( obj, commonCurveMetaDataTable, measurementHandleArray, selectedChannels, absoluteFilePath ) (Helper classes and functions)</li> <li>exportedFileNames = batchExportCurvesMat( obj, commonCurveMetaDataTable, measurementHandleArray, selectedChannels, absoluteFilePath ) (Helper classes and functions)</li> <li>exportedFileNames = batchExportMeasurementMetaData(obj, measurementHandleArray, fileName) (Helper classes and functions)</li> <li>data = getMeasurementMetaData(obj, handle) (Helper classes and functions)</li> <li>dataRef\u00a0 = getMeasurementMetaDataRef(obj, handle) (Helper classes and functions)</li> <li>data\u00a0 = getMeasurementMetaDataField(obj, handle, fieldName) (Helper classes and functions)</li> <li>setMeasurementMetaDataField(obj, handle, fieldName, value) (Helper classes and functions)</li> <li>val = getMeasurementMetaDataFieldRecursive(obj,rootHandle,fieldName,doWarning) (Helper classes and functions)</li> <li>val = getMeasurementMetaDataFieldSelective(obj,rootHandle,fieldName) (Helper classes and functions)</li> <li>setMeasurementMetaDataFieldSelective(obj,rootHandle, fieldName, value) (Helper classes and functions)</li> <li>val = getChildHandles(obj, handle) (Helper classes and functions)</li> <li>val = getNumOfChildHandles(obj,handle) (Helper classes and functions)</li> <li>val = getOpenedFileHandles(obj) (Helper classes and functions)</li> <li>val = getCurrentFileHandle(obj) (Helper classes and functions)</li> <li>val = getCurrentSessionHandle(obj) (Helper classes and functions)</li> <li>val = getFileName(obj, handle)\u00a0(Helper classes and functions)</li> <li>waitForCompletion( obj, result ) (Helper classes and functions)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#hstruct-class-helper-classes-and-functions","title":"HStruct class (Helper classes and functions)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#femtoapiacquisition-class_1","title":"FemtoAPIAcquisition class","text":"<ul> <li>taskParameters = getTaskParameters(taskType,spaceName) (Helper classes and functions)</li> <li>[activeTask, activeSubTask] = getActiveTaskAndSubTask(obj,varargin) (Helper classes and functions)</li> <li>activeSubTask = getActiveSubTaskForTask(obj,taskType,varargin) (Helper classes and functions)</li> <li>parameters = getActiveSubTaskParameters(obj, taskType) (Helper classes and functions)</li> <li>configuredAxes = getConfiguredAxes(obj) (Helper classes and functions)</li> <li>isConfigured = isAxisConfigured(obj,axisName) (Helper classes and functions)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#common-methods-of-femtoapiprocessing-and-femtoapiacquisition-classes","title":"Common methods of FemtoAPIProcessing and FemtoAPIAcquisition classes:","text":"<ul> <li>connect( obj, varargin ) (Helper classes and functions)</li> <li>disconnect( obj ) (Helper classes and functions)</li> <li>isConnected( obj ) (Helper classes and functions)</li> <li>getUrlAddress( obj ) (Helper classes and functions)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#devicevalues-class","title":"DeviceValues class","text":"<ul> <li>deviceNames = getDeviceNames(obj) (Helper classes and functions)</li> <li>index = getDeviceIndexByName(obj, deviceName) (Helper classes and functions)</li> <li>deviceValuesStructArray = getDeviceValuesStructArray(obj) (Helper classes and functions)</li> <li>deviceValuesStructArray = getDeviceValuesCellArray(obj) (Helper classes and functions)</li> <li>obj = setDeviceValueByName(obj,deviceName,deviceValue) (Helper classes and functions)</li> <li>deviceValue = getDevicePropertyByName(obj,deviceName,propertyName) (Helper classes and functions)</li> <li>deviceValue = getDevicePropertyByIndex(obj,propertyName,index) (Helper classes and functions)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#lut-class","title":"LUT class","text":"<ul> <li>obj = LUT(varargin) (Helper classes and functions)</li> <li>lutStruct = getLUTStruct(obj) (Helper classes and functions)</li> <li>colorObj = convertToColorValue( obj, val ); (Helper classes and functions)</li> <li>channelData_converted = convertChannelToARGB(obj, channelData ); (Helper classes and functions)</li> <li>channelData_converted = convertChannelToRGBA(obj, channelData ) (Helper classes and functions)</li> <li>rescale(obj,newLowerBound, newUpperBound) (Helper classes and functions)</li> <li>obj = setRangeBounds(obj, lower, upper) (Helper classes and functions)</li> <li>obj = setRangeLowerBound(obj, lower) (Helper classes and functions)</li> <li>obj = setRangeUpperBound(obj, upper) (Helper classes and functions)</li> <li>obj = fullReset(obj) (Helper classes and functions)</li> <li>reset(obj,varargin) (Helper classes and functions)</li> <li>valid = validateLUTStructure( obj, LUTStruct ) (Helper classes and functions)</li> <li>size = getSize(obj) (Helper classes and functions)</li> <li>colorMap (Helper classes and functions)</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#color-class-helper-classes-and-functions","title":"Color class (Helper classes and functions)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-function-reference/#conversion-classes-helper-classes-and-functions","title":"Conversion classes (Helper classes and functions)","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/","title":"Helper classes and functions","text":"<p>These functions provide easier usage to the FemtoAPI Matlab client. Here only the most relevant informations are described, you can find the full documentation to these functions in the code. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#_1","title":"Helper classes and functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#femtoapiprocessing-class","title":"FemtoAPIProcessing class","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#manipulating-channel-curve-data","title":"Manipulating channel curve data","text":"<p>commonCurvesMetaDataTable = getCommonCurvesMetaDataTable( obj, measurementHandleArray, channelType )</p> <p>Gets metadata of common curves of the specified measurements and channel type (input or output) in a table.</p> <p>exportedFileNames = batchExportCurvesTxt( obj, commonCurveMetaDataTable, selectedMeasurementHandles, selectedChannels, absoluteFilePath )</p> <p>Filters the common curve metadata table by selected handles and channel names (the must be present in common metadata table), then gets the curves from the server, and saves curve data to the given absolute path in .txt file.</p> <p>exportedFileNames = batchExportCurvesMat( obj, commonCurveMetaDataTable, measurementHandleArray, selectedChannels, absoluteFilePath )</p> <p>The same as batchExportCurveTxt, but saves curve data to mat file.</p> <p>exportedFileNames = batchExportMeasurementMetaData(obj, measurementHandleArray, fileName)</p> <p>Exports 'measurementInfo' and 'measurementParams' fields of the specified measurement units to JSON.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#getset-measurement-metadata","title":"Get/set measurement metadata","text":"<p>data = getMeasurementMetaData(obj, handle)</p> <p>Gets part of processing state metadata, based on the given handle. It retrieves data from locally stored processing state.</p> <p>dataRef = getMeasurementMetaDataRef(obj, handle)</p> <p>Same as getMeasurementMetaData, but it returns reference (HStruct handle object).</p> <p>data = getMeasurementMetaDataField(obj, handle, fieldName)</p> <p>Gets the value of a given field of processing state metadata, based on the given handle. It retrieves data from locally stored processing state.</p> <p>setMeasurementMetaDataField(obj, handle, fieldName, value)</p> <p>Sets the value of a given metadata field based the given handle. It sets value in the locally stored processing state structure. You have to call the  setProcessingState() (Get processing state) command to send changes to the server.</p> <p>val = getMeasurementMetaDataFieldRecursive(obj,rootHandle,fieldName,doWarning)</p> <p>Gets the values of the given metadata field of the sub-tree which root is rootHandle. If doWarning = true, then it only prints warning message if the given field is not found in a part-structure. Otherwise it throws an error.</p> <p>It returns an Nx2 cell array containing the pairs of handle and the corresponding field value. It retrieves data from locally stored processing state.</p> <p>val = getMeasurementMetaDataFieldSelective(obj,rootHandle,fieldName) </p> <p>It is a special case of getMeasurementMetaDataFieldRecursive(), it only gets the metadata field values of the children of rootHandle.</p> <p>It returns an Nx2 cell array containing the pairs of child handle and the corresponding field value. It retrieves data from locally stored processing state.</p> <p>setMeasurementMetaDataFieldSelective(obj,rootHandle, fieldName, value) </p> <p>Sets the given value to field in all metadata structure which handles are child handles of rootHandle. It sets value in the locally stored processing state structure. You have to call the  setProcessingState() (Get processing state) command to send changes to the server.</p> <p>val = getChildHandles(obj, handle)</p> <p>Returns the child handles of handle. It retrieves data from locally stored processing state.</p> <p>val = getNumOfChildHandles(obj,handle)</p> <p>Returns the number of child handles of handle.</p> <p>val = getOpenedFileHandles(obj)</p> <p>Gets the handles of currently opened files. It retrieves data from locally stored processing state.</p> <p>val = getCurrentFileHandle(obj)</p> <p>Gets the handle of the current measurement file. It retrieves data from locally stored processing state.</p> <p>val = getCurrentSessionHandle(obj)</p> <p>Gets the handle of the current measurement session. It retrieves data from locally stored processing state.</p> <p>val = getFileName(obj, handle) </p> <p>Gets name of the file which handle is the given file handle. It retrieves data from locally stored processing state.</p> <p>waitForCompletion( result )</p> <p>Waits for completion of an asynchronous command. Input parameter 'result' is the return value of the asynchronous command, a struct which contains the command id. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#hstruct-class","title":"HStruct class","text":"<p>Wraps data passed in the constructor in a handle object. This is used by FemtoAPIProcessing class to store references to measurement item metadata (file, session, unit, channel) in a tree based structure, for faster data access.</p> <p>Data access is based on the unique identifier of measurement items (named as measurement item handle).</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#femtoapiacquisition-class","title":"FemtoAPIAcquisition class","text":"<p>configuredAxes = getConfiguredAxes(obj);</p> <p>Gets the name of currently configured axes as string array. It uses local data, so must be called after  getAcquisitionState() (Get acquisition state) or  getAxisPositions() (Manipulating axis positions) command.</p> <p>isConfigured = isAxisConfigured(obj,axisName)</p> <p>Returns whether the given axis name is valid or not. It uses local data, so must be called after  getAcquisitionState() (Get acquisition state) or  getAxisPositions() (Manipulating axis positions) command.</p> <p>taskParameters = getTaskParameters(obj,taskType,spaceName)</p> <p>Gets the parameters for the specified task and space. Task type can be 'resonant' or 'galvo', and if space name is not given, default space is considered. It uses local data, so to get up-to-date information,  getAcquisitionState() (Get acquisition state) command must be called before this. </p> <p>activeSubTask = getActiveSubTaskForTask(obj,taskType,varargin)</p> <p>Gets the active sub task (measurement mode, e.g. timeseries, Z-Stack, volume scan) for the given task (which can be resonant or galvo). It uses local data, so to get up-to-date information,  getAcquisitionState() (Get acquisition state) command must be called before this. </p> <p>parameters = getActiveSubTaskParameters(obj, taskType)</p> <p>Gets the parameters of the active sub task (measurement mode, e.g. timeseries, Z-Stack, volume scan) for the given task (which can be resonant or galvo). It uses local data, so to get up-to-date information,  getAcquisitionState() (Get acquisition state) command must be called before this. </p> <p>[activeTask, activeSubTask] = getActiveTaskAndSubTask(obj,varargin)</p> <p>Gets the active task (can be resonant or galvo) and sub task (measurement mode, e.g. timeseries, Z-Stack, volume scan). It uses local data, so to get up-to-date information,  getAcquisitionState() (Get acquisition state) command must be called before this. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#common-helpers-of-femtoapiprocessing-and-femtoapiacquisition-classes","title":"Common helpers of FemtoAPIProcessing and FemtoAPIAcquisition classes","text":"<p>connect(obj,varargin)</p> <p>Connects to the server specified by parameter varargin{1}, in the format ws://ip_address:port. If called without parameters, it tries to connect to localhost (equivalent to ws://localhost:8888 ). Note that currently port 8888 is used. </p> <p>disconnect(obj)</p> <p>Closes the active connection. </p> <p>connected = isConnected(obj)</p> <p>Returns true if connected to the server, otherwise it returns false. </p> <p>urlAddress = getUrlAddress(obj)</p> <p>Returns the URL address of the active connection in format ws://ip_address:port. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#_2","title":"Helper classes and functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#devicevalues-class","title":"DeviceValues class","text":"<p>Wrapper class for device value struct get from server, for easier data handling. It is used to get and and device values by device name locally, and after it, </p> <p>deviceNames = getDeviceNames(obj)</p> <p>Gets device names.</p> <p>index = getDeviceIndexByName(obj, deviceName)</p> <p>Gets device index. </p> <p>deviceValuesStructArray = getDeviceValuesStructArray(obj)</p> <p>Converts DeviceValues object to struct array. </p> <p>deviceValuesCellArray = getDeviceValuesCellArray(obj)</p> <p>Converts DeviceValues object to cell array of struct. </p> <p>obj = setDeviceValueByName(obj,deviceName,deviceValue)</p> <p>Sets value of the requested device given by its name. </p> <p>deviceValue = getDevicePropertyByName(obj,deviceName,propertyName)</p> <p>Gets the named property of the device specified by deviceName.</p> <p>deviceValue = getDevicePropertyByIndex(obj,propertyName,index)</p> <p>Gets the named property of the device specified by index. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#lut-class","title":"LUT class","text":"<p>Basic lookup table class.</p> <p>obj = LUT(varargin)</p> <p>Constructs a LUT object from the input LUT struct , or a default LUT, if no input parameter is specified. </p> <p>lutStruct = getLUTStruct(obj)</p> <p>Gets the LUT structure. </p> <p>colorObj = convertToColorValue( obj, val )</p> <p>Converts an uint16 or double value (or array of values) to color(s) and returns a Color object (or an array of objects).</p> <p>channelData_converted = convertChannelToARGB(obj, channelData )</p> <p>Converts 2D channel image data into an ARGB image, based on color LUT. </p> <p>channelData_converted = convertChannelToRGBA(obj, channelData )</p> <p>Converts 2D channel image data into an RGBA image, based on color LUT. </p> <p>rescale(obj,newLowerBound, newUpperBound)</p> <p>Rescales LUT based on the given lower/upper bounds.</p> <p>obj = setRangeBounds(obj, lower, upper)</p> <p>Sets the given lower and upper bounds to LUT. If the given range does not intersect with the current range, LUT will be reset.</p> <p>Otherwise, LUT colors and values will be clamped according to the new bounds.</p> <p>obj = setRangeLowerBound(obj, lower)</p> <p>Sets the given lower bound to LUT. If the given range does not intersect with the current range, LUT will be reset.</p> <p>Otherwise, LUT colors and values will be clamped according to the new bounds.</p> <p>obj = setRangeUpperBound(obj, upper)</p> <p>Sets the given upper bound to LUT. If the given range does not intersect with the current range, LUT will be reset.</p> <p>Otherwise, LUT colors and values will be clamped according to the new bounds.</p> <p>obj = fullReset(obj)</p> <p>Resets the LUT ranges, colors and corresponding values to default.</p> <p>reset(obj,varargin)</p> <p>Resets LUT colors and corresponding values to to given values, or if just color value (or object is given), to constant color with lower range value. </p> <p>It will not change the lower/upper LUT ranges. </p> <p>isValid = validateLUTStructure( obj, LUTStruct )</p> <p>Check whether the given LUT structure is valid or not</p> <p>size = getSize(obj)</p> <p>Gets the number if color-value pairs in the lookup table. </p> <p>lutObj.m_colorMap</p> <p>Gets the color map as rows of R,G,B values.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#color-class","title":"Color class","text":"<p>It is a utility class and is useful for converting between different color representations, such as uint32, struct (contains uint8 type R, G, B, A components), hex string, and uint8 array. It can handle ARGB or RGBA color order.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#_3","title":"Helper classes and functions","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/helper-classes-and-functions/#conversion-classes","title":"Conversion classes","text":"<p>Two main classes are ConversionIdentity and ConversionLinear. These have common methods for converting between raw and converted data vice versa, for uint16 and double type data.</p> <p>These classes are used by read(Raw)ChannelData and write(Raw)ChannelData functions to convert image data. </p> <p>The classes have common functions for the forward and inverse conversions, for uint16 and double types: </p> <p>Forward conversion functions: </p> <p>res = convertToDouble(obj,val) res = convertToUint16(obj,val)</p> <p>Inverse conversion functions: </p> <p>res = invConvertToDouble(obj,val) res = invConvertToUint16(obj,val)</p> <p>Check whether value is within conversion ranges (both in raw and converted space): </p> <p>val = isLimitedDouble(obj) val = isLimitedUint16(obj) val = isLimited(obj) val = isWithinLimitsUint16(obj,num) val = isWithinLimitsDouble(obj,num) res = isWithinConvertedMinMaxValuesUint16(obj,value) res = isWithinConvertedMinMaxValuesDouble(obj,value) </p> <p>Setting offset and scale (for linear conversion): </p> <p>val = offsetBy(obj,add); val = scaleBy(obj,scale); </p> <p>Reset conversion lower and upper limits:</p> <p>resetLowerLimitsFromUint16Value(obj, varargin) resetUpperLimitsFromUint16Value(obj, varargin) resetLowerLimitsFromDoubleValue(obj, varargin) resetUpperLimitsFromDoubleValue(obj, varargin)</p> <p>resetLimitsFromDoubleValues(obj, varargin) resetLimitsFromUint16Values(obj,varargin)</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/prerequisites-and-setting-up-the-environment/","title":"Prerequisites and setting up the environment","text":"<p>The minimum Matlab version to run the FemtoAPI Matlab client is R2016b. </p> <p>You must add the folder of the Matlab client library to the Matlab path, and FemtoAPI.dll must be in a folder that is on the Windows PATH. </p> <p>Follow the steps:</p> <p>Environment variables</p> <p>Edit</p> <p>Add the dll file to a certain folder (here it is c:\\MES\\FEMTO_API_DLL) and define this folder as New (by Browsing or by typing)</p> <p>Save</p> <p>It might require the complete restart of the PC.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/tutorial-using-the-femtoapi-matlab-client/","title":"Tutorial: using the FemtoAPI Matlab client","text":"<p>The Matlab client wraps the FemtoAPI library's functionality, and makes it easy to use from Matlab. It uses two main classes: FemtoAPIProcessing and FemtoAPIAcquisition.</p> <p>FemtoAPIProcessing class: used for measurement processing purposes, such as file operations (read, write, create new file, or measurement unit, set current file, etc.), getting the processing state (metadata found on the processing panel of the MESc GUI) or the setting part of the processing state (e.g. comment of measurement session/group/unit, channel conversion and LUT), etc.</p> <p>You can find the list of callable functions in the  FemtoAPI command reference (The FemtoAPI command reference), under 'FemtoAPIFile namespace'. </p> <p>FemtoAPIAcquisition class: used for measurement acquisition purposes, such as starting/stopping galvo/resonant measurements, getting/setting values of PMT and Laser intensity devices, objective positions, the viewport, getting the acquisition state (metadata found on the acquisition panel of the MESc GUI), etc. </p> <p>You can find the list of callable functions in the  FemtoAPI command reference (The FemtoAPI command reference), under 'FemtoAPIMicroscope namespace'. </p> <p>Important notes: </p> <ul> <li>if you create FemtoAPIProcessing and FemtoAPIAcquisition objects, they will use the same FemtoAPI connection (only one FemtoAPI connection is created). </li> <li>you have to explicitly call femtoapiObj.disconnect() in the end of your script, when you ended up using FemtoAPI commands, but before clearing these objects</li> </ul> <p>Note: Due to practical reasons, not all functions in the command reference are available in the Matlab client. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/tutorial-using-the-femtoapi-matlab-client/#connecting-to-the-server","title":"Connecting to the server","text":"<p>A connection to the server can be established by creating a FemtoAPIProcessing or a FemtoAPIAcquisition object. </p> <pre><code>% Creating FemtoAPIProcessing object with no parameters, connects to the local MESc server through websocket, logs in with predefined username and password, and gets the processing state\nfemtoapiObj1 = FemtoAPIProcessing(); % or FemtoAPIProcessing('ws://localhost:8888') \n\n% Connecting to server with ip 192.168.80.19 and port 8888\nfemtoapiObj2 = FemtoAPIProcessing('ws://192.168.80.19:8888');\n\n% The above operations, with FemtoAPIAcquisition object, are done with the same syntax:\nfemtoapiObj3 = FemtoAPIAcquisition(); % or FemtoAPIAcquisition('ws://localhost:8888') \n\nfemtoapiObj4 = FemtoAPIAcquisition('ws://192.168.80.19:8888'); \n</code></pre> <p>If an error occurs during connection or login, an error message is thrown, and the object is not created. </p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/tutorial-using-the-femtoapi-matlab-client/#command-example-get-and-set-channel-conversion","title":"Command example: get and set channel conversion","text":"<p>Depending on the command intended to run, the FemtoAPIProcessing or the FemtoAPIAcquisition class must be instantiated. </p> <pre><code>% Connect to server with ip 192.168.80.10 (FemtoAPI uses port 8888). If connection and login is successful,\n% femtoapiObj is created, and processing state is updated. Otherwise an error is thrown. \nfemtoapiObj = FemtoAPIProcessing('ws://192.168.80.10:8888');\n\n% if processing state has changed on the server, it can be updated by calling the getProcessingState() command.\nfemtoapiObj.getProcessingState();\n\n% get the processing state member, it contains the whole processing state structure (should be called after getProcessingState() to get the most recent state)\nprocessingState = femtoapiObj.m_processingState;\n\n% get copy of channel conversion struct, where channel handle (unique id, can be optained from the MESc GUI) of the channel is [52,0,0,0]. \n% This means, that the channel is within the measurement unit with handle [52,0,0], and its index is 0. It must be an id of an already opened measurement unit in the MESc GUI, \n% which must have channel with index 0, otherwise this function will give an error, that no such measurement unit exists. \nchannelConv = femtoapiObj.getMeasurementMetaDataField ([52,0,0,0],'conversion');\n\n% change conversion\nchannelConv.offset = 10.0;\nchannelConv.scale = 2.0;\n\n% set new channel conversion struct locally \nfemtoapiObj.setMeasurementMetaDataField ([52,0,0,0],'conversion',channelConv);\n\n% send processing state changes to the server by calling setProcessingState() command\nsucceeded = femtoapiObj.setProcessingState();\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/tutorial-using-the-femtoapi-matlab-client/#disconnectingreconnecting-fromto-the-server","title":"Disconnecting/reconnecting from/to the server","text":"<pre><code>% connect to local server\nfemtoapiObj = FemtoAPIProcessing();\n\n% check connection status with isConnected() method. It must be 1, if connected, and 0, if disconnected from server.\nisConnected = femtoapiObj.isConnected();\n\n% disconnect - must be called before destroying the object\nfemtoapiObj.disconnect();\n\n% After disconnect, femtoapiObj is not destroyed, but if calling some command that would communicate to the server, it will give an error\nfemtoapiObj.getProcessingState(); % will give an error\n\n% But, after reconnect, it works as usual\nfemtoapiObj.connect();\nfemtoapiObj.getProcessingState(); % now it works\n\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/","title":"FemtoAPI Matlab demos","text":"<ul> <li>Device control demo</li> <li>FemtoAPI browser demo</li> <li>Image processing demo</li> <li>Instructions to implement ROI calculations</li> <li>Measurement control demo</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/device-control-demo/","title":"Device control demo","text":"<p>This is a client program which connects to the MESc application (the server) and does some basic measurement control with the use of the FemtoAPI.</p> <p>FemtoAPI provides an easy-to-use interface to interact with MESc, e.g., to obtain information from opened measurement files, to read and write image data, and to start and stop measurements. With the help of the FemtoAPI, users can write programs to process measurement data and to create custom measurement protocols.</p> <p>This demo demonstrates a basic FemtoAPI measurement control program which does the following: \u2022 reads some specific device parameters (PMT and Pockels cell names, values) from MESc, \u2022 lets you modify these values and sends them back to the running MESc application which can be seen simultaneously in the MESc application.</p> <p>The MATLAB user interface of the device control demo</p> <p>Prerequisites 1. Start the MESc application 2. Click the \u201cAcquisition (F3)\u201d button to the right half of the MESc title bar 3. Click the \u201cResonant\u201d tab to the left 4. Open \u201cDevice Parameters\u201d 5. Select \u201cspace1\u201d 6. Start MATLAB and run the demo program measurement_control_demo.m</p> <p>How it works 1. Click on the update button first to acquire data from the server: PMT Pockels cell names will appear in the list box, with the first one selected, and its value will be seen in % format in the edit box (the slider moves as well to the relative position of the selected value) 2. Data is read once from the server, when you click the update button 3. When selecting other PMTs or Pockels cells in the list box, the slider and the edit box will represent the value of the newly selected PMT or Pockels cell 4. When the user drags the slider, the value in the edit box changes accordingly, but no data is sent back to the server. When the user releases the slider, the actual data in the edit box will be sent to MESc where it will be displayed 5. When user edits the value in the edit box, and then click somewhere else on the GUI, slider changes it position accordingly, and the modified data is sent back to MESc where it will be displayed</p> <p>Notes The demo program writes some information to the MATLAB command prompt, for example: \u2022 the connection to the server was successful, \u2022 data was read/sent from/to the running MESc application, \u2022 or when it starts and no data is read from MESc yet, and user clicks into the GUI, a message can be seen in the MATLAB command propmt to indicate clicking the update button, \u2022 or when user clicks on update, and no data can be seen, then it can be seen in the command prompt to change the MESc configuration (usually when space1 is selected in Device parameters, and there is no data).</p> <p>When you close and reopen MESc, the demo program needs to be re-run to connect to the new MESc instance.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/femtoapi-browser-demo/","title":"FemtoAPI browser demo","text":"<p>This is a client program which connects to the MESc application (the server) and demonstrates some of the basic data access functionality of the FemtoAPI.</p> <p>The FemtoAPI provides an easy-to-use interface to interact with MESc, e.g., to obtain information from opened measurement files, to read and write image data, and to start and stop measurements. With the help of the FemtoAPI, users can write programs to process measurement data and to create custom measurement protocols.</p> <p>This demo demonstrates a basic file browser of .mesc files opened in the MESc application. It does the following:</p> <ul> <li>lists currently opened measurement files, measurement sessions, and measurement units,</li> <li>displays some of the measurement metadata in a way similar to the Processing tab of the MESc application,</li> <li>reads an image frame (selected with a slider) from the selected measurement unit,</li> <li>can get and save common input/output channel data of the selected measurement units</li> <li>can save measurement parameters to json file</li> </ul> <p>The MATLAB user interface of the FemtoAPI browser demo</p> <p>Prerequisites</p> <ol> <li>Start the MESc application</li> <li>Open one or more MESc files</li> <li>Click the \u201cProcessing (F4)\u201d button to the right half of the MESc title bar</li> <li>Open a measurement unit in the measurement unit viewer by double clicking on it in the tree view to the left</li> <li>Start MATLAB and run the demo program femtoapi_browser_App</li> </ol> <p>How it works</p> <ol> <li> <p>After opening the femtoapi_browser_App program, the list of measurement units open in the running MESc application is acquired. All measurement units from each opened MESc file will be listed in a tree structure, similar to the Processing tab of MESc.</p> </li> <li> <p>When selecting a measurement unit in the list box, its first frame is read from the running MESc application and displayed in the image field. Some metadata of the selected measurement file/session/unit is also displayed in the table to the bottom left.</p> </li> <li> <p>When you drag the slider, the image frames are read from the running MESc application and displayed in the image field.</p> </li> <li> <p>Above the image field, a drop-down list contains the names of channels in the selected measurement unit. If the measurement unit contains more than one channels, by switching channel in the drop-down list, the image of the selected channel is displayed.</p> </li> <li> <p>Open some new files in the running MESc application, then click the \u201cRefresh data\u201d button in the demo window to acquire the updated list of open measurement units.</p> </li> <li> <p>Steps of batch exporting input/output curve data to file:</p> <ul> <li>select one or more measurement units from the treeview and click the \"Batch export input curves...\" or \"Batch export output curves...\" button</li> <li>then you can see the name of common input/output channels of the selected measurement units. You can select one or more channels and press \"Ok\".</li> <li>after that, a window appears, where you can specify the file name type you want to save to (.mat or .txt). Then press OK.</li> <li>the created file contains the curve data from the common input/output channels of the selected measurement units</li> </ul> </li> <li> <p>Steps of exporting measurement parameters:</p> <ul> <li>select one or more measurement units from the treeview and click the \"Batch export measurement parameters...\" button</li> <li>after that, a window appears, where you can specify the file name. Then press OK.</li> <li>the saved file the content of \"measurementInfo\", \"measurementParamsXML\" and \"measurementParams\". See the  processing state json(DEV-A-1668703787) structure for details.</li> </ul> </li> </ol> <p>Notes:</p> <p>The demo program writes some information to the MATLAB command prompt, e.g.:</p> <ul> <li>the connection to the server was successful or not,</li> <li>data was read from the running MESc application.</li> </ul> <p>If a new file is opened in the MESc application, the \"Refresh data\" button needs to be clicked to update the file list in mescapi_browser.</p> <p>When you close and reopen MESc, the demo program needs to be restarted to connect to the new MESc instance</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/image-processing-demo/","title":"Image processing demo","text":"<p>This is a client program which connects to the MESc application (the server) and performs a basic</p> <p>image processing step with the use of the FemtoAPI.</p> <p>FemtoAPI provides an easy-to-use interface to interact with MESc, e.g., to obtain information from opened measurement files, to read and write image data, and to start and stop measurements. With the help of the FemtoAPI, users can write programs to process measurement data and to create custom measurement protocols.</p> <p>This demo demonstrates a basic FemtoAPI image processing program which does the following: \u2022 lists measurement units opened in the MESc software, \u2022 reads an image frame (selected with a slider) from the selected measurement unit, \u2022 performs Gaussian filtering on the selected image frame, and \u2022 writes the filtered image frame through the FemtoAPI into the MESc file which can be seen simultaneously in the MESc application.</p> <p>The MATLAB user interface of the image processing demo</p> <p>Prerequisites</p> <p>1. Start the MESc application 2. Open one or more MESc files 3. Click the \u201cProcessing (F4)\u201d button to the right half of the MESc title bar 4. Open a measurement unit in the measurement unit viewer by double clicking on it in the tree view to the left 5. Start MATLAB and run the demo program processing_image_data_demo.m</p> <p>How it works 1. Click the \u201cUpdate Unit List\u201d button in the demo window to acquire the list of open measurement units in the running MESc application. All measurement units from each opened MESc file will be listed 2. When selecting a measurement unit in the list box, the first image will be read from the running MESc application and displayed in the image field 3. When you drag the slider, the image frames will be read from the running MESc application and displayed in the image field 4. When you click the \u201cSmooth\u201d button, the smoothed image frame data will be displayed and sent back to the running MESc application which will immediately display this change 5. In the LUT options area set the desired LUT value to enhance the visibility of the important features of your measurement data. You can drag the slider, or type the required value in the field below</p> <p>Notes The demo program writes some information to the MATLAB command prompt, e.g.: \u2022 the connection to the server was successful, \u2022 data was read/sent from/to the running MESc application, \u2022 when the demo starts up and the user clicks into the GUI, a message gives the advice to click the \u201cUpdate Unit List\u201d button first.</p> <p>When you close and reopen MESc, the demo program needs to be re-run to connect to the new MESc instance.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/instructions-to-implement-roi-calculations/","title":"Instructions to implement ROI calculations","text":"<p>To implement ROI calculations, the following data must be read from server: </p> <ul> <li>ROI metadata </li> <li>channel image data</li> <li>axis conversions</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/instructions-to-implement-roi-calculations/#read-roi-and-channel-data","title":"Read ROI and channel data","text":"<p>You can implement your own ROI calculations in Matlab. The following code is just a starting point to this. </p> <pre><code>mUnitHandle = [54 0 0]; % handle of measurement unit that contains ROI-s\nfemtoapiObj = FemtoAPIProcessing; % connect to local server\nrois = femtoapiObj.getMeasurementMetaDataField(mUnitHandle,'rois'); % get ROI metadata as struct/cell array\n</code></pre> <p>You get all the ROI metadata in json array, and in Matlab this is converted to a struct/cell array. For example, rectangular ROI-s metadata in json:</p> <pre><code>    \"rois\": [\n        {\n            \"color\": \"#ffff00ff\",\n            \"firstZPlane\": 0,\n            \"label\": \"2\",\n            \"lastZPlane\": 0,\n            \"role\": \"standard\",\n            \"type\": \"rectangleXY\",\n            \"uniqueID\": \"{8e1e875a-e586-4555-b90b-dd166f25e294}\",\n            \"vertices\": [\n                [\n                    -89.93968910440431,\n                    145.61758404165928\n                ],\n                [\n                    -140.22283243505154,\n                    62.742649916250144\n                ],\n                [\n                    -95.26945476637809,\n                    35.46785137354358\n                ],\n                [\n                    -44.98631143573071,\n                    118.34278549895265\n                ],\n                [\n                    -89.93968910440431,\n                    145.61758404165928\n                ]\n            ]\n        },\n        {\n            \"color\": \"#ffffff00\",\n            \"firstZPlane\": 0,\n            \"label\": \"3\",\n            \"lastZPlane\": 0,\n            \"role\": \"standard\",\n            \"type\": \"rectangleXY\",\n            \"uniqueID\": \"{450bb5dc-18e5-4b3b-bf89-4e162db9eddb}\",\n            \"vertices\": [\n                [\n                    18.716456070640128,\n                    107.4893125709017\n                ],\n                [\n                    -23.780909975208516,\n                    37.446626726985805\n                ],\n                [\n                    23.313104122004017,\n                    8.873028619718838\n                ],\n                [\n                    65.81047016785303,\n                    78.91571446363446\n                ],\n                [\n                    18.716456070640128,\n                    107.4893125709017\n                ]\n            ]\n        },\n        {\n            \"color\": \"#ffff0000\",\n            \"firstZPlane\": 0,\n            \"label\": \"4\",\n            \"lastZPlane\": 0,\n            \"role\": \"standard\",\n            \"type\": \"rectangleXY\",\n            \"uniqueID\": \"{3b881950-8542-4447-a1ec-88986ae67c13}\",\n            \"vertices\": [\n                [\n                    -8.523654683878924,\n                    205.33164893046816\n                ],\n                [\n                    -47.77694698576971,\n                    140.63573299830162\n                ],\n                [\n                    1.457704115861958,\n                    110.76333497706783\n                ],\n                [\n                    40.71099641775294,\n                    175.45925090923424\n                ],\n                [\n                    -8.523654683878924,\n                    205.33164893046816\n                ]\n            ]\n        }\n    ]\n\n</code></pre> <p>Note1: If there is a json object with regularPolygonXY type the json array, there are additional ROI parameters: regularPolygonRotationPoint, regulaPolygonCenter, regularPolygonSides. </p> <p>Because of this, the fields in the returned json array will not be the same in all object, and in this case, the json array is converted to a cell array in Matlab. Otherwise, if all json objects contain the same fields, the resulted array is converted to struct array. </p> <p>Note2: The ROI vertices and the additional parameters in case of regularPolygonXY type are (X,Y) points in \u03bcm unit (converted data). </p> <p>You can find the description of ROI fields  here(DEV-A-1668703787).</p> <p>After ROI metadata is read, you can read the raw or converted data of the requested channel. You don't have to read all the channel data, just the part where ROI-s are found. This can be done by selecting channel data from the </p> <p>[firstZPlane, lastZPlane] z domain.</p> <p>For example, to read the channel with index 1 where ROI-s are found:</p> <pre><code>channelHandle = [mUnitHandle 1];\n\n% get channel image dimensions\ndims = femtoapiObj.getMeasurementMetaDataField(channelHandle, 'dimensions');\ndimX= dims(1).size;\ndimY = dims(2).size;\n\n% get axis conversions \nconvX = dims(1).conversion; % 'x' axis conversion\nconvY = dims(2).conversion; % 'y' axis conversion\n\n\n% get converted channel data where ROI-s are found, from channel 1\nsubslab3D = {1:dimX, 1:dimY, firstZPlane:lastZPlane};\nchannelData = femtoapiObj.readChannelData(channelHandle, 'double', subslab3D)\n</code></pre> <p>After ROI metadata, axis conversions and channel data are read:</p> <ul> <li>from ROI vertices, you can find its area within its boundaries </li> <li>you can find the mean of the image pixels (or other aggregate functions) within the ROI boundaries using axis conversion, that converts pixel (X,Y) coordinates to physical coordinates</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-matlab-client/femtoapi-matlab-demos/measurement-control-demo/","title":"Measurement control demo","text":"<p>This is a client program which connects to the MESc application (the server) and performs a measurement snap of the selected type. </p> <p>This demo program demonstrates a basic measurement control. It can do the following: </p> <ul> <li>get some of the relevant measurement parameters for resonant/galvo measurements and for the selected sub type on the MESc GUI </li> <li>start/stop a measurement of the selected measurement type</li> <li>set duration of the measurement </li> <li>when the measurement ends, it updates the measurement parameters and shows a frame from the measurement</li> <li>image channel name can be selected from a drop-down list, and the image of the selected channel will be shown accordingly</li> <li>if the measurement start command failed for some reason (hardware is initializing, or in off state, of an error happened during measurement), it shows the reason of failure in a message box</li> </ul> <p>Prerequisites</p> <ol> <li>Start the MESc application</li> <li>Set up and attach the hardware to be able to run measurements</li> <li>Click the \u201cAcquistion(F3)\u201d button to the right half of the MESc title bar</li> <li>Start MATLAB and run the demo program measurement_control_demo.mlapp</li> </ol> <p>How it works </p> <ol> <li>After opening the measurement_control_demo program, you can see an empty table and axes. Click on the \"Update measurement parameters\" button to get the parameters that are currently set on the MESc GUI, for galvo/resonant tabs. </li> <li>If there are some .mesc files opened, the 1st frame of the last measurement unit of the current measurement session is shown in the demo UI.</li> <li>You can select the image channel by from the dropdown list, and frame from that channel is shown accordingly.</li> <li>You can switch between \"Resonant\" and \"Galvo\" tabs, you can see the measurement parameters of the selected type.</li> <li>Set the duration of the selected measurement in the \"duration\" edit box, then click on the \"Set measurement duration\" button to make changes on the server. If you set it to 0, an infinite measurement will be started.</li> <li>If you click on \"Update measurement parameters\", you can see the updated measurement duration that you previously set.</li> <li>Click on \"Start\" button. It will start the measurement of the selected type. In case of infinite measurement, you have to stop it manually by pressing the \"Stop\" button. Otherwise, the measurement will stop automatically when the measurement time has elapsed. Beside \"Stop\" button, the message changes to \"Measurement is running\". </li> <li>If the hardware layer is off, or an error happened, a message box appears with the last measurement error. </li> <li>After the measurement ends without an error, an image from the middle of the measurement is shown. The handle of the measurement unit and the index of the shown frame can be seen in the \"measurement unit handle\" and \"frame index\" fields. Beside \"Stop\" button, the message changes to \"No measurement is running\".</li> </ol> <p>Notes:</p> <p>This demo example is supported only by Matlab R2019b or higher versions!</p> <p>The demo program writes some information to the MATLAB command prompt, e.g.:</p> <ul> <li>the connection to the server was successful or not,</li> <li>data was read from the running MESc application.</li> </ul> <p>When you close and reopen MESc, the demo program needs to be restarted to connect to the new MESc instance.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-python-client/","title":"The FemtoAPI Python client","text":"<ul> <li>Prerequisites and setting up the python environment</li> <li>Tutorial: creating a FemtoAPI Python client with the FemtoAPI library</li> <li>Tutorial: using FemtoAPI with a simple WebSocket in Python</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-python-client/prerequisites-and-setting-up-the-python-environment/","title":"Prerequisites and setting up the python environment","text":""},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-python-client/prerequisites-and-setting-up-the-python-environment/#prerequisites","title":"Prerequisites","text":"<p>Python installed.</p> <p>Supported versions:</p> <ul> <li>32 bit: 3.6, 3.7, 3.8</li> <li>64 bit: 3.6, 3.7, 3.8</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-python-client/prerequisites-and-setting-up-the-python-environment/#installation","title":"Installation","text":"<p>The Python client can be installed with the python package installer (pip) which should be installed by default with python.</p> <p>Run from command line: 'pip install femtoapi'</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-python-client/tutorial-creating-a-femtoapi-python-client-with-the-femtoapi-library/","title":"Tutorial: creating a FemtoAPI Python client with the FemtoAPI library","text":"<p>Install FemtoAPI Python client</p> <pre><code>pip install femtoapi\n</code></pre> <p>Connect to the API server</p> <pre><code>from PySide2.QtCore import *\nfrom PySide2.QtWebSockets import *\nfrom femtoapi import PyFemtoAPI\n\napp = QCoreApplication(sys.argv)\nws=PyFemtoAPI.APIWebSocketClient('ws://localhost:8888')\nws.login(\"name\", \"pass\")\n</code></pre> <p>Example command use</p> <pre><code>command='FemtoAPIFile.getProcessingState()'\nsimpleCmdParser=ws.sendJSCommand(command)\nresultCode=simpleCmdParser.getResultCode()\n    if resultCode &gt; 0:\n    print (\"Return code: \" + str(resultCode))\n    print (simpleCmdParser.getErrorText())\nelse:\n    print(json.loads(simpleCmdParser.getJSEngineResult())) #import json\n\n</code></pre> <p>Close connection</p> <pre><code>ws.close()\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/the-femtoapi-python-client/tutorial-using-femtoapi-with-a-simple-websocket-in-python/","title":"Tutorial: using FemtoAPI with a simple WebSocket in Python","text":"<p>Firstly, install the Python websocket-client:</p> <pre><code>pip install websocket-client\n</code></pre> <p>Connect to the local MESc server through WebSocket, and issue a command: </p> <pre><code>from websocket import create_connection\nws = create_connection(\"ws://localhost:8888/websocket\")\nws.send(\"FemtoAPIFile.getProcessingState()\")\nresult = ws.recv()\nprint (\"Received '%s'\" % result)\nws.close()\n</code></pre> <p>Note: The commands that would transfer binary data between client and server cannot be used with simple WebSocket API. Currently, the following commands are concerned:</p> <ul> <li>Write(Raw)ChannelDataFromAttachment </li> <li>read(Raw)ChannelDataToClientsBlob </li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/","title":"Using the FemtoAPI client in C++ code","text":"<p>This chapter gives an overview of how to use the FemtoAPI library in c++ code.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/","title":"C++ tutorial: creating a FemtoAPI client with the FemtoAPI library","text":"<p>Femtonics recommends that all FemtoAPI clients are built on the official FemtoAPI library provided by Femtonics Ltd. This library is developed in tandem with the server side of FemtoAPI and offers full compatibility and good performance upon all future MESc releases.</p> <p>This section is aimed at FemtoAPI client implementors and describes the structure and use of the official FemtoAPI library.</p> <p>The public interface of the FemtoAPI library is described by three C++ header file: ReplyMessageParser.h</p> <p>Below, we describe in detail the sequence of steps needed to use the FemtoAPI library.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/#create-an-api-websocketclient","title":"Create an API WebSocketClient","text":"<p>The first step of initializing the client side of a FemtoAPI connection is instantiating an APIWebSocketClient object. The FemtoAPI client can run on the same computer as MESc or on any other computer that can access the port the FemtoAPI server is listening on (default: 8888). </p> <p>FemtoAPI is connecting with a WebSocket connection to the running MESc instance of your choice. To maximize the versatility of FemtoAPI,</p> <ul> <li>any number of FemtoAPI clients can connect to the same FemtoAPI server, from the same computer or from different ones, and</li> <li>a FemtoAPI client can make any number of connections to any number of FemtoAPI servers, running on the same computer or on different computers.</li> </ul> <p>C++ code example for connecting to the FemtoAPI server running on the same computer as the FemtoAPI client and listening on the default port:</p> <p>C++ code example:</p> <pre><code>APIWebSocketClient *wsClient=new APIWebSocketClient(QUrl(\"ws://localhost:8888\"));\nbool isOk = wsClient-&gt;connectToServer();\u00a0\n</code></pre> <p>If the connection is successfully created, true is returned. Otherwise, false is returned and the state of the FemtoAPI client is not changed in any way.</p>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/#log-in-to-the-femtoapi-server","title":"Log in to the FemtoAPI server","text":"<p>The last step of initializing the client side of a FemtoAPI connection is authenticating to the FemtoAPI server.</p> <p>The FemtoAPI server implements password-based authentication. Any login names with at least three characters and any passwords of at least five characters, containing at least one capital letter, one numeral, and one symbol are accepted. This arrangement may change in the future.</p> <p>C++ code example for logging in to the FemtoAPI server:</p> <pre><code>auto loginParser = wsclient-&gt;login(\"userName\",\"Passwd123%\");\n\nif(loginParser-&gt;getResultCode() != 0) { \n    qDebug() &lt;&lt; loginParser-&gt;getErrorText();\n} \n</code></pre> <p>The ReplyMessageParser object returned by the login() method above</p> <ul> <li>is managed by the AbstractAPIClient object, i.e., you do not need to delete it, and</li> <li>is guaranteed to hold its contents until the next method call of the AbstractAPIClient object.</li> </ul>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/#run-a-javascript-command-in-the-femtoapi-server","title":"Run a JavaScript command in the FemtoAPI server","text":"<p>The main utility of a FemtoAPI connection is in remotely running JavaScript commands on the FemtoAPI server. The FemtoAPI server usually answers by returning a JSON object encoded in UTF-8.</p> <p>C++ code example for running a JavaScript command sequence in the FemtoAPI server and receiving its reply:</p> <pre><code>auto simpleCmdParser = wsclient-&gt;sendJSCommand(\"a=100; b=200; c=a+b;\"); \nQString result = simpleCmdParser-&gt;getJSEngineResult().toString();\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/#send-binary-data-as-an-argument-of-a-javascript-command","title":"Send binary data as an argument of a JavaScript command","text":"<p>Some of the JavaScript commands interpreted by the FemtoAPI server need binary data as one of their arguments. These binary data should be uploaded as an attachment to the FemtoAPI server before running the respective JavaScript command.</p> <p>C++ code example for attaching data from file to a subsequent JavaScript command:</p> <pre><code>QFile file(\"fileNameToAttach\"); \nif(file.open(QIODevice::ReadOnly)) {\n    QByteArray buffer;\n    buffer = file.readAll();\n    wsclient-&gt;uploadAttachment(buffer);\n    file.close(); \n}\n\nQString command = QString(\"...\");\nauto cmdReplyParser = wsclient-&gt;sendJSCommand(command);\n</code></pre> <p>C++ code example for attaching raw data to a subsequent JavaScript command:</p> <pre><code>QByteArray buffer;\nstd::vector&lt;double&gt; vecData = {0, 10};\n\nbuffer.append(QByteArray::fromRawData (reinterpret_cast&lt;char *&gt;(vecData.data()), vecData.size() * sizeof (double)));\n\nwsclient-&gt;uploadAttachment(buffer);\n\nQString command = QString(\"...\");\nauto cmdReplyParser = wsclient-&gt;sendJSCommand(command);\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/#read-binary-data-from-femtoapi","title":"Read binary data from FemtoAPI","text":"<p>WARNING: The methods in this section are subject to minor changes.</p> <p>You can read binary data from MESc with FemtoAPI in several ways.</p> <ul> <li>Transfer binary data to the FemtoAPI client as a binary blob. This method is useful for quickly transferring large amounts of binary data from the server to the client.</li> </ul> <p>C++ code example:</p> <pre><code>QString command = \"FemtoAPIFile.readRawChannelDataToClientsBlob('47,0,0,0','0,0,0', '512,512,1')\";\nauto binaryParser = wsclient-&gt;sendJSCommand(command);\nwhile(!binaryParser-&gt;isCompleted()) {\n    QThread::msleep(100);\n}\n\nQFile binFile(\"fileOut.bin\");\nbinFile.open(QIODevice::WriteOnly); \n\nif(binaryParser-&gt;hasBinaryParts()) {\n    QDataStream out(&amp;binFile);\n    for(auto parts: binaryParser-&gt;getPartList()) {\n        out.writeRawData(parts.data(),parts.size()); \n    } \n}\nbinFile.close();\n</code></pre> <ul> <li>Transfer binary data to the FemtoAPI client as textual data in JSON format. This method is too slow for production code, but it is a useful debugging tool.</li> </ul> <p>C++ code example:</p> <pre><code>QString command = \u201cFemtoAPIFile.readRawChannelDataJSON('47,0,0,0', '0,0,1', '512,512,1');\"; \nauto cmdParser = wsclient-&gt;sendJSCommand(command);\n</code></pre> <ul> <li>Transfer binary data to a server-side JavaScript variable. Usage example: server-side image processing.</li> </ul> <p>C++ code example:</p> <pre><code>QString command = \"var binaryvar = FemtoAPIFile.readRawChannelData('47,0,0,0','0,0,0','512,512,1');\";\nauto cmdParser=wsclient-&gt;sendJSCommand(command);\n</code></pre>"},{"location":"kb/api2/femtoapi-v2-0-home/femtoapi-2-0/using-the-femtoapi-client-in-c-code/c-tutorial-creating-a-femtoapi-client-with-the-femtoapi-library/#close-the-femtoapi-connection-and-clean-up","title":"Close the FemtoAPI connection and clean up","text":"<p>C++ code example for properly terminating a single FemtoAPI connection and cleaning up:</p> <pre><code>wsclient-&gt;close();\ndelete clientManager;\n</code></pre>"}]}